<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../libs/global.ent">
<!-- NAMES --><!ENTITY canonical-name "Canonical Ltd.">
<!ENTITY project-name "Ubuntu Documentation Project">
<!ENTITY ubuntu "<phrase>Ubuntu</phrase>">
<!ENTITY sg-title "Server Guide">
<!-- VERSIONS --><!ENTITY distro-version "Jaunty Jackalope">
<!ENTITY distro-rev "9.04">
<!ENTITY distro-release-date "April 2009">
<!ENTITY distro-short-codename "jaunty">
<!ENTITY distro-apt-cd-name "Ubuntu 9.04_Jaunty_Jackalope">
<!ENTITY linux-kernel-version "2.6.27">
<!ENTITY gcc-version "4.3.1">
<!ENTITY glibc-version "2.8">
<!ENTITY python-version "2.5">
<!ENTITY glossary SYSTEM "../common/C/glossary.xml">
<!-- LEGAL URLs --><!ENTITY legalnotice SYSTEM "../libs/C/legalnotice.xml">
<!ENTITY gpl-url '<ulink url="http://www.gnu.org/licenses/gpl.html">GNU General Public License</ulink>'>
<!ENTITY cc "http://creativecommons.org/">
<!ENTITY cc-attrib '<ulink url="http://creativecommons.org/licenses/by-sa/2.5/">Attribution-ShareAlike 2.5</ulink>'>
<!ENTITY cc-fulldeed-url "http://creativecommons.org/licenses/by-sa/2.5/legalcode/">
<!ENTITY fdl-url '<ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink>'>
<!ENTITY cc-disclaimer-url "http://creativecommons.org/licenses/disclaimer-popup?lang=en">
<!-- CANONICAL URL RESOURCES --><!ENTITY canonical-url "http://www.canonical.com">
<!-- OTHER UBUNTU RELATED RESOURCES --><!ENTITY upstart-url "http://upstart.ubuntu.com">
<!-- UBUNTU IRC INFORMATION --><!ENTITY irc-network "Freenode">
<!ENTITY irc-server "irc.ubuntu.com">
<!ENTITY ubuntu-irc "irc.ubuntu.com channel #ubuntu">
<!ENTITY kubuntu-irc "irc.ubuntu.com channel #kubuntu">
<!ENTITY xubuntu-irc "irc.ubuntu.com channel #xubuntu">
<!ENTITY edubuntu-irc "irc.ubuntu.com channel #edubuntu">
<!-- UBUNTU URL RESOURCES --><!ENTITY ubuntu-packages "http://packages.ubuntu.com">
<!ENTITY ubuntu-web "http://www.ubuntu.com">
<!ENTITY ubuntu-main "http://www.ubuntu.com">
<!ENTITY ubuntu-download "http://www.ubuntu.com/download">
<!ENTITY ubuntu-forums "http://www.ubuntu.com/community/forums">
<!ENTITY ubuntu-components "http://www.ubuntu.com/ubuntu/components">
<!ENTITY ubuntu-lists "http://lists.ubuntu.com">
<!ENTITY ubuntu-wiki "http://wiki.ubuntu.com">
<!ENTITY ubuntu-bugzilla "https://launchpad.net/distros/ubuntu/+bugs">
<!ENTITY ubuntu-doc-bugs "https://launchpad.net/products/ubuntu-doc/+bugs">
<!ENTITY ubuntu-support "http://www.ubuntu.com/support">
<!ENTITY ubuntu-paidsupport "http://www.ubuntu.com/support/paid">
<!ENTITY ubuntu-freesupport "http://www.ubuntu.com/support/free">
<!ENTITY ubuntu-comments "http://www.ubuntuforums.org/showthread.php?p=21787">
<!ENTITY ubuntu-documentation "http://help.ubuntu.com">
<!ENTITY ubuntu-documentation-repos "https://docteam.ubuntu.com/repos/trunk">
<!ENTITY ubuntu-doc-team "https://wiki.ubuntu.com/DocumentationTeam">
<!ENTITY ubuntu-doc-list "http://lists.ubuntu.com/mailman/listinfo/ubuntu-doc">
<!ENTITY ubuntu-shipit "http://shipit.ubuntu.com">
<!ENTITY ubuntu-launchpad "https://launchpad.ubuntu.com">
<!ENTITY ubuntu-rosetta "https://launchpad.ubuntu.com/rosetta">
<!ENTITY ubuntu-planet "http://planet.ubuntu.com">
<!ENTITY ubuntu-philosophy "http://www.ubuntu.com/ubuntu/philosophy">
<!ENTITY ubuntu-participate "http://www.ubuntu.com/community/participate/">
<!ENTITY ubuntu-marketplace "http://www.ubuntu.com/support/marketplace">
<!ENTITY ubuntu-hwdb "http://hwdb.ubuntu.com">
<!-- UBUNTU WIKI RESOURCES --><!ENTITY wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY restricted-formats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-RestrictedFormats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-XChatHowto "https://help.ubuntu.com/community/XChatHowto">
<!ENTITY wiki-RootSudo "https://help.ubuntu.com/community/RootSudo">
<!ENTITY wiki-HowToGetHelp "https://help.ubuntu.com/community/HowToGetHelp">
<!ENTITY transcode "https://help.ubuntu.com/community/DVDRippingandEncoding">
<!ENTITY wiki-Wine "https://help.ubuntu.com/community/Wine">
<!ENTITY wiki-Cedega "https://help.ubuntu.com/community/Cedega">
<!ENTITY wiki-Nano "https://help.ubuntu.com/community/NanoHowto">
<!ENTITY wiki-locoteams "https://wiki.ubuntu.com/LoCoTeamList">
<!ENTITY wiki-BasicCommands "https://help.ubuntu.com/community/BasicCommands">
<!ENTITY wiki-filepermissions "https://help.ubuntu.com/community/FilePermissions">
<!-- KUBUNTU URL RESOURCES --><!ENTITY kubuntu-web "http://www.kubuntu.org">
<!ENTITY kubuntu-main "http://www.kubuntu.org">
<!ENTITY kubuntu-download "http://releases.ubuntu.com/kubuntu/">
<!ENTITY kubuntu-packages "http://packages.ubuntu.com/edgy/">
<!ENTITY kubuntu-cdpackages-nodefault "http://people.ubuntu.com/~cjwatson/seeds/kubuntu-edgy/ship">
<!ENTITY kubuntu-lists "http://lists.ubuntu.com/archives/kubuntu-users/">
<!ENTITY kubuntu-lists-users "http://lists.ubuntu.com/mailman/listinfo/kubuntu-users/">
<!ENTITY kubuntu-lists-devel "http://lists.ubuntu.com/mailman/listinfo/kubuntu-devel/">
<!ENTITY kubuntu-mirrors "http://distrowatch.com/kubuntu">
<!ENTITY kubuntu-forums "http://kubuntuforums.net">
<!ENTITY kubuntu-wiki "https://wiki.kubuntu.org">
<!ENTITY kubuntu-documentation-site "http://www.kubuntu.org/documentation.php">
<!ENTITY kubuntu-wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY kubuntu-support "http://www.kubuntu.org/support.php">
<!-- XUBUNTU URL RESOURCES --><!ENTITY xubuntu-web "http://www.xubuntu.org">
<!ENTITY xubuntu-main "http://www.xubuntu.org">
<!ENTITY xubuntu-web-help "http://www.xubuntu.org/help">
<!-- DEBIAN RESOURCES --><!ENTITY debian-apt "http://www.debian.org/doc/user-manuals#apt-howto">
<!-- EXTERNAL URL RESOURCES --><!ENTITY linmodem "http://www.linmodems.org/">
<!ENTITY gnome "http://www.gnome.org/">
<!ENTITY linuxorg "http://www.linux.org/">
<!ENTITY ooo "http://www.openoffice.org/">
<!ENTITY kde "http://www.kde.org/">
<!ENTITY lugww "http://lugww.counter.li.org/">
<!ENTITY ubuntu-watch "http://distrowatch.com/ubuntu/">
<!ENTITY realplayer-download "http://www.real.com/linux/">
<!ENTITY nvu-download "http://www.nvu.com/download.html">
<!ENTITY sunjava-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY xorg "http://www.x.org">
<!ENTITY dyndns "http://www.dyndns.org">
<!ENTITY shoutcast "http://www.shoutcast.com/">
<!ENTITY freedomtoaster "http://www.freedomtoaster.org/">
<!ENTITY xfce "http://www.xfce.org/">
<!-- ubuntu-screenshots TODO --><!ENTITY kubuntu-screenshots "http://shots.osdir.com/">
<!ENTITY mozilla "http://www.mozilla.org/">
<!ENTITY mozilla-firefox "http://www.mozilla.org/products/firefox/">
<!ENTITY gnu "http://www.gnu.org/">
<!ENTITY gnu-philosophy "http://www.gnu.org/philosophy/">
<!ENTITY win4lin "http://www.win4lin.com">
<!ENTITY codeweavers "http://www.codeweavers.com">
<!ENTITY kernel "http://www.kernel.org">
<!ENTITY google "http://www.google.com">
<!ENTITY kdelook " http://www.kde-look.org">
<!ENTITY lulu-store "http://www.lulu.com/ubuntu-doc">
<!-- this entity controls the url for addons--><!ENTITY java-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY skype-deb "skype_1.2.0.17-1_i386.deb">
<!ENTITY skype-download "http://www.skype.com/go/getskype-linux-deb">
<!ENTITY scanmodem-gz "scanModem.gz">
<!ENTITY scanmodem-url "http://linmodems.technion.ac.il/packages/scanModem.gz">
<!ENTITY ext2fs-url "http://www.fs-driver.org/index.html">
<!ENTITY mvb-tar "mvb_1.6.tgz">
<!ENTITY mvb-url "http://www.xscd.com/pub/mvb/&mvb-tar;">
<!-- TLDP --><!ENTITY ldp-pre-install-check "http://tldp.org/HOWTO/Pre-Installation-Checklist/">
<!-- LANGUAGES (sorted by two letter code)--><!ENTITY Afar "aa">
<!ENTITY Abkhazian "ab">
<!ENTITY Afrikaans "af">
<!ENTITY Amharic "af">
<!ENTITY Arabic "ar">
<!ENTITY Assamese "as">
<!ENTITY Aymara "ay">
<!ENTITY Azerbaijani "az">
<!ENTITY Bashkir "ba">
<!ENTITY Byelorussian "be">
<!ENTITY Bulgarian "bg">
<!ENTITY Bihari "bh">
<!ENTITY Bislama "bi">
<!ENTITY Bangla "bn">
<!ENTITY Bengali "bn">
<!ENTITY Tibetan "bo">
<!ENTITY Breton "br">
<!ENTITY Catalan "ca">
<!ENTITY Corsican "co">
<!ENTITY Czech "cs">
<!ENTITY Welsh "cy">
<!ENTITY Danish "da">
<!ENTITY German "de">
<!ENTITY Bhutani "dz">
<!ENTITY Greek "el">
<!-- <!ENTITY EnglishAmerican 'en'> --><!ENTITY EnglishAmerican "C">
<!ENTITY Esperanto "eo">
<!ENTITY Spanish "es">
<!ENTITY Estonian "et">
<!ENTITY Basque "eu">
<!ENTITY Persian "fa">
<!ENTITY Finnish "fi">
<!ENTITY Fiji "fj">
<!ENTITY Faeroese "fo">
<!ENTITY French "fr">
<!ENTITY Frisian "fy">
<!ENTITY Irish "ga">
<!ENTITY Gaelic "gd">
<!ENTITY ScotsGaelic "gd">
<!ENTITY Galician "gl">
<!ENTITY Guarani "gn">
<!ENTITY Gujarati "gu">
<!ENTITY Hausa "ha">
<!ENTITY Hindi "hi">
<!ENTITY Croatian "hr">
<!ENTITY Hungarian "hu">
<!ENTITY Armenian "hy">
<!ENTITY Interlingua "ia">
<!ENTITY Interlingue "ie">
<!ENTITY Inupiak "ik">
<!ENTITY Indonesian "in">
<!ENTITY Icelandic "is">
<!ENTITY Italian "it">
<!ENTITY Hebrew "iw">
<!ENTITY Japanese "ja">
<!ENTITY Yiddish "ji">
<!ENTITY Javanese "jw">
<!ENTITY Georgian "ka">
<!ENTITY Kazakh "kk">
<!ENTITY Greenlandic "kl">
<!ENTITY Cambodian "km">
<!ENTITY Kannada "kn">
<!ENTITY Korean "ko">
<!ENTITY Kashmiri "ks">
<!ENTITY Kurdish "ku">
<!ENTITY Kirghiz "ky">
<!ENTITY Latin "la">
<!ENTITY Lingala "ln">
<!ENTITY Laothian "lo">
<!ENTITY Lithuanian "lt">
<!ENTITY Latvian "lv">
<!ENTITY Lettish "lv">
<!ENTITY Malagasy "mg">
<!ENTITY Maori "mi">
<!ENTITY Macedonian "mk">
<!ENTITY Malayalam "ml">
<!ENTITY Mongolian "mn">
<!ENTITY Moldavian "mo">
<!ENTITY Marathi "mr">
<!ENTITY Malay "ms">
<!ENTITY Maltese "mt">
<!ENTITY Burmese "my">
<!ENTITY Nauru "na">
<!ENTITY Nepali "ne">
<!ENTITY Dutch "nl">
<!ENTITY Norwegian "no">
<!ENTITY Occitan "oc">
<!ENTITY Afan "om">
<!ENTITY Oromo "om">
<!ENTITY Oriya "or">
<!ENTITY Punjabi "pa">
<!ENTITY Polish "pl">
<!ENTITY Pushto "ps">
<!ENTITY Pashto "ps">
<!ENTITY Portuguese "pt">
<!ENTITY Quechua "qu">
<!ENTITY Rhaeto-Romance "rm">
<!ENTITY Kirundi "rn">
<!ENTITY Romanian "ro">
<!ENTITY Russian "ru">
<!ENTITY Kinyarwanda "rw">
<!ENTITY Sanskrit "sa">
<!ENTITY Sindhi "sd">
<!ENTITY Sangro "sg">
<!ENTITY Serbo-Croatian "sh">
<!ENTITY Singhalese "si">
<!ENTITY Slovak "sk">
<!ENTITY Slovenian "sl">
<!ENTITY Samoan "sm">
<!ENTITY Shona "sn">
<!ENTITY Somali "so">
<!ENTITY Albanian "sq">
<!ENTITY Serbian "sr">
<!ENTITY Siswati "ss">
<!ENTITY Sesotho "st">
<!ENTITY Sudanese "su">
<!ENTITY Swedish "sv">
<!ENTITY Swahili "sw">
<!ENTITY Tamil "ta">
<!ENTITY Tegulu "te">
<!ENTITY Tajik "tg">
<!ENTITY Thai "th">
<!ENTITY Tigrinya "ti">
<!ENTITY Turkmen "tk">
<!ENTITY Tagalog "tl">
<!ENTITY Setswana "tn">
<!ENTITY Tonga "to">
<!ENTITY Turkish "tr">
<!ENTITY Tsonga "ts">
<!ENTITY Tatar "tt">
<!ENTITY Twi "tw">
<!ENTITY Ukrainian "uk">
<!ENTITY Urdu "ur">
<!ENTITY Uzbek "uz">
<!ENTITY Vietnamese "vi">
<!ENTITY Volapuk "vo">
<!ENTITY Wolof "wo">
<!ENTITY Xhosa "xh">
<!ENTITY Yoruba "yo">
<!ENTITY Chinese "zh">
<!ENTITY Zulu "zu">
<!ENTITY % gnome-menus-C SYSTEM "../../libs/gnome-menus-C.ent">
<!-- MENUS --><!-- Please keep entries alphabetical, it makes them much easier to find & use --><!ENTITY about-me "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>About-me</guimenuitem></menuchoice>">
<!ENTITY accessories "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem></menuchoice>">
<!ENTITY acro-read "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Acrobat Reader</guimenuitem></menuchoice>">
<!ENTITY administration "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem></menuchoice>">
<!ENTITY aisleriot "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>AisleRiot Solitaire</guimenuitem></menuchoice>">
<!ENTITY amule "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY anjuta-ide "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Anjuta IDE</guimenuitem></menuchoice>">
<!ENTITY archive-man "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Archive Manager</guimenuitem></menuchoice>">
<!ENTITY assistive-technology-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Assistive Technology Support</guimenuitem></menuchoice>">
<!ENTITY audacity "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Audacity</guimenuitem></menuchoice>">
<!ENTITY azureus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Azureus</guimenuitem></menuchoice>">
<!ENTITY baobab "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Disk Usage Analyzer</guimenuitem></menuchoice>">
<!ENTITY bittorrent "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Bittorrent</guimenuitem></menuchoice>">
<!ENTITY blender3d "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Blender 3d modeller</guimenuitem></menuchoice>">
<!ENTITY bluefish "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Bluefish Editor</guimenuitem></menuchoice>">
<!ENTITY boot "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Boot</guimenuitem></menuchoice>">
<!ENTITY brasero "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Brasero Disc Burning</guimenuitem></menuchoice>">
<!ENTITY bum "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Boot-up Manager</guimenuitem></menuchoice>">
<!ENTITY bzrgtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Olive bazaar Branch Manager</guimenuitem></menuchoice>">
<!ENTITY calculator "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Calculator</guimenuitem></menuchoice>">
<!ENTITY character-map "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Character Map</guimenuitem></menuchoice>">
<!ENTITY compizconfig "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>CompizConfig Settings Manager</guimenuitem></menuchoice>">
<!ENTITY computer "<menuchoice><guimenu>Places</guimenu><guimenuitem>Computer</guimenuitem></menuchoice>">
<!ENTITY connecttoserver "<menuchoice><guimenu>Places</guimenu><guimenuitem>Connect to Server...</guimenuitem></menuchoice>">
<!ENTITY cowbell "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Cowbell Music Organizer</guimenuitem>	</menuchoice>">
<!ENTITY chromium "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Chromium</guisubmenu></menuchoice>">
<!ENTITY computer-janitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guisubmenu>System Janitor</guisubmenu></menuchoice>">
<!ENTITY desktop-background "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Desktop Background</guimenuitem></menuchoice>">
<!ENTITY desktop-effects "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Appearance</guimenuitem><guimenuitem>Visual Effects</guimenuitem></menuchoice>">
<!ENTITY desktop-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem></menuchoice>">
<!ENTITY devhelp "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Devhelp</guimenuitem></menuchoice>">
<!ENTITY device-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Hardware Information</guimenuitem></menuchoice>">
<!ENTITY dictionary "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Dictionary</guimenuitem></menuchoice>">
<!ENTITY disks "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Disks</guimenuitem></menuchoice>">
<!ENTITY downloader-x "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Downloader for X</guimenuitem></menuchoice>">
<!ENTITY eclipse-ide "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Eclipse IDE</guimenuitem></menuchoice>">
<!ENTITY ekiga "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Internet</guimenuitem><guimenuitem>Ekiga Softphone</guimenuitem></menuchoice>">
<!ENTITY efax-gtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Office</guisubmenu><guimenuitem>Efax-gtk</guimenuitem></menuchoice>">
<!ENTITY etherape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Etherape</guimenuitem></menuchoice>">
<!ENTITY evolution-mail "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Evolution Mail</guimenuitem></menuchoice>">
<!ENTITY file-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>File Management</guimenuitem></menuchoice>">
<!ENTITY firefox "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Internet</guisubmenu><guimenuitem>Firefox Web Browser</guimenuitem></menuchoice>">
<!ENTITY firestarter-firewall-tool "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Firestarter</guimenuitem></menuchoice>">
<!ENTITY five-or-more "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Five or More</guimenuitem></menuchoice>">
<!ENTITY font "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Font</guimenuitem></menuchoice>">
<!ENTITY f-spot "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>F-Spot Photo Manager</guimenuitem></menuchoice>">
<!ENTITY frozen-bubble "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Frozen Bubble</guisubmenu></menuchoice> to play <application>Frozen Bubble</application>">
<!ENTITY gambas "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Gambas</guimenuitem></menuchoice>">
<!ENTITY games "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Games</guimenuitem></menuchoice>">
<!ENTITY gdesklets "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>gDesklets</guimenuitem></menuchoice>">
<!ENTITY gftp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>gFTP</guimenuitem></menuchoice>">
<!ENTITY gimp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>GIMP Image Editor</guimenuitem></menuchoice>">
<!ENTITY gnome-app-install "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Add/Remove...</guimenuitem></menuchoice>">
<!ENTITY gnome-config-editor "<screen><command>gconf-editor</command></screen>">
<!ENTITY gnome-sound-recorder "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Sound Recorder</guimenuitem></menuchoice>">
<!ENTITY gparted "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration </guisubmenu><guimenuitem>Gnome Partition Editor</guimenuitem></menuchoice>">
<!ENTITY graphics "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem></menuchoice>">
<!ENTITY gthumb "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>gThumb Image Viewer</guimenuitem></menuchoice>">
<!ENTITY gtkpod "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>gtkpod</guimenuitem></menuchoice>">
<!ENTITY gnucash "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>GnuCash Finance Management</guimenuitem></menuchoice>">
<!ENTITY gxine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>gxine</guimenuitem></menuchoice>">
<!ENTITY home-folder "<menuchoice><guimenu>Places</guimenu><guimenuitem>Home Folder</guimenuitem></menuchoice>">
<!ENTITY homebank "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>HomeBank</guimenuitem></menuchoice>">
<!ENTITY hubackup "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Backup</guimenuitem></menuchoice>">
<!ENTITY hurestore "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Restore</guimenuitem></menuchoice>">
<!ENTITY inkscape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Inkscape SVG Vector Illustrator</guimenuitem></menuchoice>">
<!ENTITY internet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem></menuchoice>">
<!ENTITY kdevelop "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>KDevelop</guimenuitem></menuchoice>">
<!ENTITY keyboard "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard</guimenuitem></menuchoice>">
<!ENTITY keyboard-shortcuts "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard Shortcuts</guimenuitem></menuchoice>">
<!ENTITY language-support "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Language Support</guimenuitem></menuchoice>">
<!ENTITY liferea "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Liferea Feed Reader</guimenuitem></menuchoice>">
<!ENTITY limewire "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>LimeWire</guimenuitem></menuchoice>">
<!ENTITY lockscreen "<menuchoice><guimenu>System</guimenu><guimenuitem>Lock Screen</guimenuitem></menuchoice>">
<!ENTITY login-screen-setup "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Login Window</guimenuitem></menuchoice>">
<!ENTITY mahjongg "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Mahjongg</guimenuitem></menuchoice>">
<!ENTITY menu-editor "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>Applications Menu Editor</guimenuitem></menuchoice>">
<!ENTITY menus-and-toolbars "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Menus &amp; Toolbars</guimenuitem></menuchoice>">
<!ENTITY monodevelop "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDevelop</guimenuitem></menuchoice>">
<!ENTITY monodoc "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDoc</guimenuitem></menuchoice>">
<!ENTITY mouse "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Mouse</guimenuitem></menuchoice>">
<!ENTITY mtink "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>mtink</guimenuitem></menuchoice>">
<!ENTITY music "<menuchoice><guimenu>Places</guimenu><guimenuitem>Music</guimenuitem></menuchoice>">
<!ENTITY multimedia-systems-selector "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Multimedia Systems Selector</guimenuitem></menuchoice>">
<!ENTITY ndisgtk "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Windows Wireless Drivers</guimenuitem></menuchoice>">
<!ENTITY network-proxy "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Network Proxy</guimenuitem></menuchoice>">
<!ENTITY network-tools "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network Tools</guimenuitem></menuchoice>">
<!ENTITY networking "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY network-servers "<menuchoice><guimenu>Places</guimenu><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY neverball "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverball</guisubmenu></menuchoice>">
<!ENTITY neverputt "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverputt</guisubmenu></menuchoice>">
<!ENTITY nexuiz "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Nexuiz</guisubmenu></menuchoice>">
<!ENTITY open-office "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem></menuchoice>">
<!ENTITY openoffice-base "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Database</guimenuitem></menuchoice>">
<!ENTITY openoffice-draw "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>OpenOffice.org Draw</guimenuitem></menuchoice>">
<!ENTITY openoffice-presentation "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Presentation</guimenuitem></menuchoice>">
<!ENTITY openoffice-spreadsheet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Spreadsheet</guimenuitem></menuchoice>">
<!ENTITY openoffice-writer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Word Processor</guimenuitem></menuchoice>">
<!ENTITY palmos-devices "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>PalmOS Devices</guimenuitem></menuchoice>">
<!ENTITY pan "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pan Newsreader</guimenuitem></menuchoice>">
<!ENTITY photoprint "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>PhotoPrint</guimenuitem></menuchoice>">
<!ENTITY pidgin "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pidgin Internet Messenger</guimenuitem></menuchoice>">
<!ENTITY power-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Power Management</guimenuitem></menuchoice>">
<!ENTITY ppracer "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Planet Penguin Racer</guisubmenu></menuchoice>">
<!ENTITY preferences "<menuchoice><guimenu>System</guimenu><guisubmenu>Preferences</guisubmenu></menuchoice>">
<!ENTITY preferred-applications "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Preferred Applications</guimenuitem></menuchoice>">
<!ENTITY print "<menuchoice><guimenu>File</guimenu><guimenuitem>Print</guimenuitem></menuchoice>">
<!ENTITY printing "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Printing</guimenuitem></menuchoice>">
<!ENTITY qtparted "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem><guimenuitem>QTParted</guimenuitem></menuchoice>">
<!ENTITY remote-desktop "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Remote Desktop</guimenuitem></menuchoice>">
<!ENTITY removable-drives-and-media "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Removable Drives and Media</guimenuitem></menuchoice>">
<!ENTITY realplayer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>RealPlayer 11</guimenuitem></menuchoice>">
<!ENTITY restricted-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Hardware Drivers</guimenuitem></menuchoice>">
<!ENTITY rhythmbox "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Rhythmbox Music Player</guimenuitem></menuchoice>">
<!ENTITY route-planner "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY scorched3d "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guimenuitem>Scorched 3D</guimenuitem></menuchoice>">
<!ENTITY screen-resolution "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screen Resolution</guimenuitem></menuchoice>">
<!ENTITY screensaver "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screensaver</guimenuitem></menuchoice>">
<!ENTITY scribus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>Scribus</guimenuitem></menuchoice>">
<!ENTITY serpentine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Serpentine Audio CD Creator</guimenuitem></menuchoice>">
<!ENTITY services "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Services</guimenuitem></menuchoice>">
<!ENTITY sessions "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sessions</guimenuitem></menuchoice>">
<!ENTITY shared-folders "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Shared Folders</guimenuitem></menuchoice>">
<!ENTITY skype "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Skype</guimenuitem></menuchoice>">
<!ENTITY software-properties "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY software-sources "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY sound "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sound</guimenuitem></menuchoice>">
<!ENTITY soundandvideo "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem></menuchoice>">
<!ENTITY soundjuicer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Audio CD Extractor</guimenuitem></menuchoice>">
<!ENTITY supertux "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>SuperTux</guisubmenu></menuchoice>">
<!ENTITY shutdown "<menuchoice><guimenu>System</guimenu><guimenuitem>Shut Down...</guimenuitem></menuchoice>">
<!ENTITY synaptic "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Synaptic Package Manager</guimenuitem></menuchoice>">
<!ENTITY system-monitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>System Monitor</guimenuitem></menuchoice>">
<!ENTITY systemtools "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem></menuchoice>">
<!ENTITY terminal "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Terminal</guimenuitem></menuchoice>">
<!ENTITY text-editor "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Text Editor</guimenuitem></menuchoice>">
<!ENTITY theme "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Theme</guimenuitem></menuchoice>">
<!ENTITY thunderbird "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Mozilla Thunderbird Mail/News</guimenuitem></menuchoice>">
<!ENTITY time-date "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Time and Date</guimenuitem></menuchoice>">
<!ENTITY totem "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Movie Player</guimenuitem></menuchoice>">
<!ENTITY touchpad "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Touchpad</guimenuitem></menuchoice>">
<!ENTITY tremulous "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Tremulous</guisubmenu></menuchoice>">
<!ENTITY ubuntu-update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Ubuntu Update Manager</guimenuitem></menuchoice>">
<!ENTITY update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Update Manager</guimenuitem></menuchoice>">
<!ENTITY users "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY users-groups "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY windows "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Windows</guimenuitem></menuchoice>">
<!ENTITY wireshark "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Wireshark</guimenuitem></menuchoice>">
<!ENTITY xchat-gnome "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Xchat-GNOME IRC Chat</guimenuitem></menuchoice>">
<!ENTITY xine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>xine</guimenuitem></menuchoice>">
<!ENTITY xmms "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>XMMS</guimenuitem></menuchoice>">
<!ENTITY xsane "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>XSane Image Scanner</guimenuitem></menuchoice>">
<!ENTITY % xinclude SYSTEM "../../libs/xinclude.mod">
<!ELEMENT xi:include (xi:fallback)?>
<!ATTLIST xi:include xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ATTLIST xi:include href CDATA #REQUIRED>
<!ATTLIST xi:include parse (xml | text) "xml">
<!ATTLIST xi:include xpointer CDATA #IMPLIED>
<!ATTLIST xi:include encoding CDATA #IMPLIED>
<!ATTLIST xi:include accept CDATA #IMPLIED>
<!ATTLIST xi:include accept-charset CDATA #IMPLIED>
<!ATTLIST xi:include accept-language CDATA #IMPLIED>
<!ELEMENT xi:fallback ANY>
<!ATTLIST xi:fallback xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ENTITY % local.preface.class "| xi:include">
<!ENTITY % local.part.class "| xi:include">
<!ENTITY % local.chapter.class "| xi:include">
<!ENTITY % local.divcomponent.mix "| xi:include">
<!ENTITY % local.para.char.mix "| xi:include">
<!ENTITY % local.info.class "| xi:include">
<!ENTITY % local.common.attrib "xmlns:xi            CDATA       #FIXED       'http://www.w3.org/2001/XInclude'">
<!ENTITY language "&EnglishAmerican;">
]>
<chapter id="security" status="review">
	<title>Seguridad</title>
	<para>La seguridad debería ser considerada siempre al instalar, poner en marcha y usar cualquier tipo de sistema de computación. Aunque una instalación nueva de Ubuntu es relativamente segura para su uso inmediato en la Internet, es importante tener un entendimiento equilibrado de la postura de seguridad de su sistema basándose en cómo será utilizado este después de la puesta en marcha.</para>
	<para>Este capítulo proporciona una mirada general a los temas relacionados con la seguridad de la edición de servidor de Ubuntu 9.04, y esboza medidas sencillas que puede usar para proteger su servidor y su red de cualquier número de amenazas de seguridad potenciales.</para>
  <sect1 id="user-management" status="review">
	<title>Gestión de usuario</title>
	<para>La gestión de usuarios es una parte crítica en el mantenimiento de la seguridad de un sistema. La gestión ineficaz de usuarios y privilegios casi siempre termina comprometiendo a muchos sistemas. Por esta razón, es importante que usted entienda cómo puede proteger su servidor por medio de técnicas sencillas y efectivas para la gestión de cuentas de usuario.</para>
  <sect2 id="where-is-root" status="review">
	<title>¿Dónde está root?</title>
	<para>Los desarrolladores de Ubuntu tomaron una decisión concienzuda para deshabilitar por defecto la cuenta administrativa root en todas las instalaciones de Ubuntu. Esto no significa que la cuenta root haya sido eliminada o que no se pueda acceder a ella. Simplemente se le ha dado una contraseña que no concuerda con ningún valor cifrado posible, por esta razón no puede identificarse por sí misma directamente.</para>
	<para>En su lugar, se anima a los usuarios a hacer uso de una herramienta llamada  <application>sudo</application> para realizar tareas administrativas en el sistema. <application>Sudo</application> le permite a un usuario autorizado elevar sus privilegios temporalmente usando su propia contraseña en lugar de tener que saber la contraseña perteneciente a la cuenta root. Esta metodología sencilla pero efectiva le proporciona responsabilidad a todas las acciones del usuario, y le da al administrador un control granular sobre las acciones que puede realizar un usuario con dichos privilegios.</para>
		<itemizedlist>
		<listitem>
		<para>Si por alguna razón usted desea habilitar la cuenta root, simplemente dele una contraseña:</para>
<screen>
<command>sudo passwd</command>
</screen>
		<para>Sudo le pedirá su contraseña y luego le pedirá que proporcione una contraseña nueva para root, como se muestra a continuación:</para>
<screen>
<computeroutput>[sudo] contraseña para usuario: <userinput>(introduzca su contraseña)</userinput>
Ingrese la nueva contraseña UNIX: <userinput>(introduzca una nueva contraseña para el superusuario)</userinput>
Reescriba la nueva contraseña UNIX: <userinput>(repita una nueva contraseña para el superusuario)</userinput>
passwd: contraseña actualizada exitosamente</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Para deshabilitar la cuenta root, use la siguiente sintaxis de passwd:</para>
<screen>
<command>sudo passwd -l root</command>
</screen>
		</listitem>
		<listitem>
		<para>Puede leer más sobre <application>Sudo</application> comprobando las páginas de este manual:</para>
<screen>
<command>man sudo</command>
</screen>
		</listitem>
		</itemizedlist>
		<para>Por defecto, el usuario inicial creado por el instalador de Ubuntu es un miembro del grupo "admin" que se añade al archivo <filename>/etc/sudoers</filename> como un usuario autorizado de sudo. Si desea darle a otra cuenta acceso total a root a través de <application>sudo</application>, simplemente añadala al grupo admin.</para>
  </sect2>

  <sect2 id="adding-deleting-users" status="review">
	<title>Añadir y eliminar usuarios</title>
	<para>El proceso para gestionar usuarios y grupos locales es directo y difiere poco de la mayoría de los sistemas operativos GNU/Linux. Ubuntu y otras distribuciones basadas en Debian, recomiendan usar el paquete "adduser" para la gestión de cuentas.</para>
		<itemizedlist>
		<listitem>
		<para>Para añadri una cuenta de usuario, use la siguiente sintaxis y siga las instrucciones para darle a la cuenta una contraseña y características identificables tales como un nombre completo, número telefónico, etc.</para>
<screen>
<command>sudo adduser nombre de usuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para eliminar una cuenta de usuario y su grupo primario, use la siguiente sintaxis:</para>
<screen>
<command>sudo deluser nombre de usuario</command>
</screen>
		<para>Borrar una cuenta no eliminar su respectiva carpeta home. Será su opción la de borrar manualmente la carpeta o la de mantenerla, de acuerdo a las políticas de retención deseadas.</para>
		<para>Recuerde, cualquier usuario añadido después o con el mismo UID/GID del el anterior propietario tendrá acceso a esta carpeta si no ha tomado las necesarias precauciones</para>
		<para>Puede que desee cambiar sus valores UID/GID a otros más apropiados, como los de la cuenta root, y quizás hasta reubicar la carpeta para evitar futuros conflictos:</para>
<screen>
<command>sudo chown -R root:root /home/username/</command>
<command>sudo mkdir /home/usuarios_archivados/</command>
<command>sudo mv /home/username /home/usuarios_archivados/</command>
</screen>
		</listitem>
		<listitem>
		<para>Para bloquear o desbloquear una cuenta de usuario, use la siguiente sintaxis, respectivamente:</para>
<screen>
<command>sudo passwd -l nombredeusuario</command>
<command>sudo passwd -u nombredeusuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para añadir o borrar un grupo personalizado, use la siguiente sintaxis, respectivamente.</para>
<screen>
<command>sudo addgroup nombredegrupo</command>
<command>sudo delgroup nombredegrupo</command>
</screen>
		</listitem>
		<listitem>
		<para>Para añadir un usuario al grupo, use la siguiente sintaxis:</para>
<screen>
<command>sudo adduser nombre de usuario nombre de grupo</command>
</screen>
		</listitem>
		</itemizedlist>
  </sect2>

  <sect2 id="user-profile-security" status="review">
	<title>Perfil de seguridad de usuario</title>
	<para>Cuando se crea un usuario, la utilidad adduser crea un nuevo directorio personal llamado <filename class="directory">/home/nombredelusuario</filename>. El perfil predeterminado se define en función del contenido situado en el directorio <filename class="directory">/etc/skel</filename>, el cual incluye todos los elementos básicos del perfil.</para>
	<para>Si su servidor va a tener varios usuarios, debería poner especial atención en los permisos de sus directorios personales para garantizar la confidencialidad. De forma predeterminada, los directorios personales de cada usuario de Ubuntu se crean con permisos de lectura y ejecución para todo el mundo. Esto significa que todos los usuarios pueden entrar y acceder al contenido del directorio personal de otros usuarios. Esto puede que no sea apropiado para su entorno.</para>
		<itemizedlist>
		<listitem>
		<para>Para verificar los permisos del directorio personal de los usuarios, use la siguiente sintaxis:</para>
<screen>
<command>ls -ld /home/username</command>
</screen>
		<para>La siguiente salida muestra que el directorio <filename class="directory">/home/nombredelusuario</filename> tiene permiso de lectura para todo el mundo:</para>
<screen>
<computeroutput>drwxr-xr-x  2 nombredelusuario nombredelusuario    4096 2007-10-02 20:03 nombredelusuario</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Puede eliminar los permisos de lectura usando la siguiente sintaxis:</para>
<screen>
<command>sudo chmod 0750 /home/nombre de usuario</command>
</screen>
		<note>
		<para>Algunas personas tienden a usar la opción recursiva (-R) indiscriminadamente, lo cual modifica todas las carpetas y los archivos hijos, pero esto no es necesario, y puede dar lugar a resultados no deseados. El directorio padre, por sí solo, es suficiente para impedir el acceso no autorizado a cualquier cosa que haya dentro del padre.</para>
		</note>
		<para>Una aproximación mucho más eficiente al asunto podría ser modificar los permisos globales predeterminados de <application>adduser</application> cuando se crean las carpetas personales de los usuarios. Simplemente, edite el archivo <filename>/etc/adduser.conf</filename> y modifique la variable <varname>DIR_MODE</varname> a algo más apropiado, de forma que todos los nuevos directorios personales recibirán los permisos correctos.</para>
<programlisting>
DIR_MODE=0750
</programlisting>
		</listitem>
		<listitem>
		<para>Después de corregir los permisos del directorio usando cualquiera de las técnicas mencionadas anteriormente, verifique los resultados usando la siguiente sintaxis:</para>
<screen>
<command>ls -ld /home/username</command>
</screen>
		<para>El resultado siguiente muestra que los permisos de lectura para todo el mundo han sido quitados:</para>
<screen>
<computeroutput>drwxr-x---   2 nombredelusuario nombredelusuario    4096 2007-10-02 20:03 nombredelusuario</computeroutput>
</screen>
		</listitem>
		</itemizedlist>
  </sect2>

  <sect2 id="password-policy" status="review">
	<title>Política de contraseñas</title>
	<para>Una política de contraseñas rigurosa es uno de los aspectos más importantes de su postura en cuanto a la seguridad. Muchas violaciones exitosas de seguridad han sido posibles simplemente mediante ataques de fuerza bruta y diccionarios frente a contraseñas débiles. Si su intención es ofrecer alguna forma de acceso remoto en base a su sistema local de contraseñas, compruebe que tiene en cuenta de manera adecuada los requisitos mínimos de complejidad de las contraseñas y los tiempos de vida máximo de las contraseñas, y que lleva a cabo auditorías frecuentes de sus sistemas de autenticación.</para>
  <sect3 id="minimum-password-length" status="review">
	<title>Longitud mínima de contraseña</title>
	<para>Por defecto, Ubuntu requiere una contraseña de longitud mínima de 4 caracteres, así como algunos controles básicos de la entropía. Estos valores están controlados en el archivo <filename>/etc/pam.d/common-password</filename>, que se describen a continuación.</para>
<programlisting>
password required pam_unix.so nullok obscure min=4 max=8 md5
</programlisting>
	<para>Si desea ajustar la longitud mínima a 6 caracteres, cambie la variable apropiada a min=6. La modificación está subrayada debajo.</para>
<programlisting>
password required pam_unix.so nullok obscure min=6 max=8 md5
</programlisting>
	<note>
	<para>La variable <varname>max=8</varname> no indica la longitud máxima de una contraseña. Sólo significa que no se comprobarán los requisitos de complejidad en contraseñas de más de ocho caracteres. Puede que le interese echar un vistazo al paquete <application>libpam-cracklib</application> para una asistencia adicional sobre la entropía de las contraseñas.</para>
	</note>
  </sect3>
  <sect3 id="password-expiration" status="review">
	<title>Finalización de contraseña</title>
	<para>Cuando se crean cuentas de usuario, debería seguir una política de tiempo de vida mínimo y máximo para las contraseñas, que fuerce a los usuarios a cambiar sus contraseñas cuando estas expiren.</para>
		<itemizedlist>
		<listitem>
		<para>Para ver de manera sencilla el estatus actual de una cuenta de usuario use la siguiente sintaxis:</para>
<screen>
<command>sudo chage -l nombre de usuario</command>
</screen>
		<para>La salida siguiente muestra algunos hechos interesantes sobre la cuenta del usuario, con la premisa de que no se ha aplicado ninguna política:</para>
<screen>
<computeroutput>Last password change                                    : Jan 20, 2008
Password expires                                        : never
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 0
Maximum number of days between password change          : 99999
Number of days of warning before password expires       : 7</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Para establecer alguno de esos valores, simplemente use la sintaxis siguiente, y responda a las preguntas interactivas:</para>
<screen>
<command>sudo chage nombre de usuario</command>
</screen>
		<para>El siguiente también es un ejemplo de cómo puede cambiar manualmente la fecha explícita de expiración (-E) al 31/01/2008, la duración mínima de la contraseña (-m) a 5 días, la duración máxima de la contraseña (-M) a 90 días, el periodo de inactividad (-l) a 5 días tras la expiración de la contraseña, y el periodo de tiempo de advertencia (-W) a 14 días antes de la expiración de la contraseña.</para>
<screen>
<command>sudo chage -E 01/31/2008 -m 5 -M 90 -I 30 -W 14 nombre de usuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para verificar los cambios, use la misma sintaxis mencionada anteriormente.</para>
<screen>
<command>sudo chage -l nombre de usuario</command>
</screen>
		<para>La salida de abajo muestra las nuevas políticas que se han establecido para la cuenta:</para>
<screen>
<computeroutput>Last password change                                    : Jan 20, 2008
Password expires                                        : Apr 19, 2008
Password inactive                                       : May 19, 2008
Account expires                                         : Jan 31, 2008
Minimum number of days between password change          : 5
Maximum number of days between password change          : 90
Number of days of warning before password expires       : 14</computeroutput>
</screen>
		</listitem>
		</itemizedlist>
  </sect3>

  </sect2>


  <sect2 id="other-security-considerations" status="review">
	<title>Otras consideraaciones de seguridad</title>
	<para>Varias aplicaciones usan mecanismos de autenticación alternos que pueden ser pasados por alto fácilmente aun por administradores de sistemas experimentados. Entonces, es importante entender y controlar como se autentican los usuarios y obtienen acceso a servicios y aplicaciones en su servidor.</para>

  <sect3 id="ssh-access-by-disabled-users" status="review">
	<title>Acceso SSH por Usuarios Deshabilitados</title>
	<para>Deshabilitar/bloquear una cuenta de usuario no prevendrá al usuario de ingresar remotamente a su servidor si aquel ya ha configurado la autenticación de claves públicas RSA. El usuario todavía tendrá acceso al servidor por medio del shell, sin necesidad de contraseña alguna. Recuerde revisar el directorio home de los usuarios para buscar archivos que puedan permitir esta clase de acceso SSH autenticado. Por ej.: <filename>/home/username/.ssh/authorized_keys</filename>.</para>
	<para>Elimine o renombre el directorio <filename class="directory">.ssh/</filename> en la carpeta home del usuario para prevenir más capacidades de autenticaciones SSH .</para>
	<para>Asegúrese de verificar alguna conexión SSH establecida por el usuario deshabilitado, ya que es posible que existan conexiones entrantes o salientes. Matar a cualquier que se encuentre.</para>
	<para>Restringir el acceso SSH solo para las cuentas de usuarios que deben tenerlo. Por ejemplo, usted puede crear un grupo llamado "sshlogin" y añadir el nombre de grupo como el valor asociado con la variable <varname>AllowGroups</varname> localizada en el archivo <filename>/etc/ssh/sshd_config</filename>.</para>
<programlisting>
AllowGroups sshlogin
</programlisting>
	<para>Luego agregue sus usuarios SSH permitidos al grupo "sshlogin", y reinicie el servicio SSH.</para>
<screen>
<command>sudo adduser nombredeusuario sshlogin</command>
<command>sudo /etc/init.d/ssh restart</command>
</screen>
  </sect3>
  <sect3 id="external-db-auth" status="review">
	<title>Base de datos de Autenticación de Usuario Externo</title>
	<para>La mayoría de redes empresariales requieren autenticación centralizada y control de acceso para todos los recursos del sistema. Si usted ha configurado su servidor para autenticar usuarios contra base de datos externas, debe estar seguro de deshabilitar las cuentas de usuarios tanto externa como localmente, de esta forma usted asegura que una autenticación local no sea posible.</para>
  </sect3>
  </sect2>
  </sect1>


   <sect1 id="console-security" status="review">
	<title>Seguridad de consola</title>
	<para>Como con cualquier otra barrera de seguridad que usted ponga para proteger su servidor, es muy difícil defenderse de los daños impredecibles causados por alguien con acceso físico a su entorno, por ejemplo, robo de discos rígidos, interrupción del servicio o energía y así. Por esta razón, la seguridad de la consola debe tenerse en cuenta simplemente como un componente más de su estrategia general de seguridad física. Una "pantalla de entrada" bloqueada puede desanimar a un criminal casual, o por lo menos ralentizar a uno decidido, así que es recomendable tener precauciones básicas respecto a la seguridad de la consola.</para>
	<para>Las siguientes instrucciones le ayudarán a defender su servidor contra cuestiones que de otro modo podrían producir consecuencias muy graves.</para>

   <sect2 id="disable-ctrl-alt-delete" status="review">
	<title>Deshabiltar Ctrl+Alt+Supr</title>
	<para>En primer lugar, cualquiera que tenga acceso físico al teclado puede simplemente usar la combinación de teclas <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Supr</keycap></keycombo> para reiniciar el servidor sin tener que iniciar una sesión. Es cierto que cualquiera podría simplemente desenchufar el servidor de la red eléctrica, pero aun así debería prevenir el uso de esta combinación de teclas en un servidor en producción. Esto forzaría a un atacante a tomar medidas más drásticas para reiniciar el servidor y al mismo tiempo previene los reinicios accidentales.</para>
		<itemizedlist>
	  	<listitem>
		<para>Para deshabilitar la acción de reinicio tomada por oprimir la combinación de teclas <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Supr</keycap></keycombo>, comente la siguiente línea en el archivo <filename>/etc/event.d/control-alt-delete</filename>.</para>
<programlisting>
#exec /sbin/shutdown -r now "Control-Alt-Delete pressed"
</programlisting>
		</listitem>
		</itemizedlist>
   </sect2>
   <sect2 id="grub-password-security" status="review">
	<title>Contraseña de seguridad GRUB</title>
	<para>Ubuntu instala GNU GRUB como su cargador de inicio por defecto, el cual permite una gran flexibilidad y opciones de recuperación. Por ejemplo, cuando instala imágenes de adicionales de kernel, estas se añaden automáticamente como opciones de inicio disponibles en el menú <application>grub</application>. También, por defecto, las opciones alternativas de inicio están disponibles para cada entrada de kernel que puede ser utilizado para la recuperación del sistema, acertadamente etiquetados (recovery mode). El Recovery mode simplemente inicia la imagen del kernel correspondiente en modo de usuario único (init 1), lo que permite entrar como administrador en una terminal de root sin la necesidad de alguna contraseña.</para>
	<para>Por lo tanto, es importante controlar cómo se pueden editar los elementos del menú <application>grub</application> los cuales, podrían permitir a alguien ejecutar las siguiente acciones peligrosas:</para> 
		<itemizedlist>
	  	<listitem>
	  	<para>Pasar opciones de kernel en la inicialización</para>
	  	</listitem>
		<listitem>
		<para>Arrancar el servidor en modo usuario simple</para>
		</listitem>
		</itemizedlist>
	<para>Puede prevenir estas acciones añadiendo una contraseña al archivo de configuración de GRUB <filename>/boot/grub/menu.lst</filename>, que será necesaria para desbloquear el acceso a opciones más avanzadas de GRUB antes de usarlas.</para>
		<itemizedlist>
	  	<listitem>
	  	<para>Para añadir una contraseña para usarla con <application>grub</application>, primero debe generar una contraseña aleatoria md5 usando la utilidad <application>grub-md5-crypt</application>:</para>
<screen>
<command>grub-md5-crypt</command>
</screen>
		<para>El comando le pedirá ingresar una contraseña y ofrecer un valor hash resultando como se muestra a continuación:</para>
<screen>
<computeroutput>Contraseña: <userinput>(intriduzca nueva contraseña)</userinput>Reescriba contraseña: <userinput>(repita contraseña)</userinput>$1$s3YiK$M3lxAbqA6JLm2FbDWnClQ0</computeroutput>
</screen>
	  	</listitem>
	  	<listitem>
		<para>Añada el resultado del cálculo al archivo <filename>/boot/grub/menu.lst</filename> en el siguiente formato:</para>
<programlisting>contraseña --md5 $1$s3YiK$M3lxAbqA6JLm2FbDWnClQ0</programlisting>
	  	</listitem>
	  	<listitem>
	  	<para>Para requerir el uso de la contraseña para entrar al modo de usuario único, cambia el valor de la variable <varname>lockalternative</varname> en el archivo <filename>/boot/grub/menu.lst</filename> a <varname>true</varname>, como se muestra en el siguiente ejemplo.</para>
<programlisting># lockalternative=true</programlisting>
		</listitem>
		</itemizedlist>
	<note>
	<para>Esto no evita que alguien inicie el servidor desde algún medio alternativo. Un atacante decidido simplemente iniciaría un entorno alternativo, sobrescribiría su sector de arranque principal, montaría o copiaría sus volúmenes físicos, destruiría sus datos o haría cualquier otra cosa que se pudiera imaginar. Por favor explore otras medidas de seguridad que puedan ayudarle respecto a este tipo de ataques.</para>
	</note>
   </sect2>
   </sect1>

	<sect1 id="firewall" status="review">
	  <title>Cortafuegos</title>
        <sect2 id="firewall-introduction" status="review">
          <title>Introducción</title>
          <para>El kernel Linux incluye el subsistema <emphasis>Netfilter</emphasis>, que es usado para manipular o decidir el destino del tráfico de red entre o a través de su red. Todas las soluciones firewall Linux modernas utilizan este sistema para el filtrado de paquetes.</para>
            <para>El sistema de filtrado de paquetes del núcleo resulta de poca ayuda a los administradores si no se tiene una interfaz de usuario para gestionarlo. Éste es el proposito de iptables. Cuando un paquete llega a su servidor, éste es gestionado por el subsistema Netfilter para aceptarlo, manipularlo o rechazarlo basándose en las reglas suministradas a éste via iptables. Así, iptables es todo lo que necesita para manejar su cortafuegos si está familiarizado con él, pero existen muchos interfaces de usuario disponibles para simplificar esta tarea.</para>
        </sect2>
          <sect2 id="firewall-ufw" status="review">
	    <title>ufw - Cortafuegos sencillo</title>  
	    <para>La herramienta de configuración de firewall por defecto para Ubuntu es <application>ufw</application>. Desarrollada para facilitar la configuración de firewall con iptables, <application>ufw</application> provee una manera amigable para crear un firewall IPv4 o IPv6 basada en host.</para>
	    <para><application>ufw</application> está deshabilitada por defecto. De la página man de<application>ufw</application>:</para>
	    <para>
<quote>ufw no tiene la intención de proporcionar funcionalidad de corta fuegos total vía su interfaz de comando, pero en cambio provee una manera fácil de añadir y remover reglas simples. Actualmente es utilizado básicamente para corta fuegos basados en host.</quote>
	    </para>
	    <para>Lo siguiente son unos ejemplos de como usar <application>ufw</application>:</para> 
	    <itemizedlist>
              <listitem>
                <para>Lo primero <application>ufw</application> necesita estar habilitada. Desde un terminal introduzca:</para>
<screen>
<command>sudo ufw enable</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para abrir un puerto (ssh en este ejemplo):</para>
<screen>
<command>sudo ufw allow 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>Se pueden añadir reglas usando el formato <emphasis>numbered</emphasis>:</para>
<screen>
<command>sudo ufw insert 1 allow 80</command>
</screen>
	      </listitem>
              <listitem>
                <para>Similar para cerrar un puerto abierto:</para>
<screen>
<command>sudo ufw deny 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para eliminar una regla, use delete seguido de la regla:</para>
<screen>
<command>sudo ufw delete deny 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>Es posible permitir el acceso desde un anfitrión específico o red de trabajo a un puerto. El siguiente ejemplo permite el acceso ssh desde el anfitrión 192.168.0.2 a cualquier dirección ip en este anfitrión:</para>
<screen>
<command>sudo ufw allow proto tcp from 192.168.0.2 to any port 22</command>
</screen>
	        <para>Reemplace 192.168.0.2 con 192.168.0.0/24 para permitir el acceso ssh a toda la subnet.</para>
	      </listitem>
              <listitem>

                <para>Añadiendo la opción <emphasis>--dry-run</emphasis>a la orden <emphasis>ufw</emphasis> tendremos la salida de las reglas resultantes, pero no las aplicaremos. Por ejemplo lo siguiente es lo que se podría aplicar si se abriera el puerto HTTP:</para>

<screen>
<command>sudo ufw --dry-run allow http</command>
</screen>

<screen>
<computeroutput>*filter
:ufw-user-input - [0:0]
:ufw-user-output - [0:0]
:ufw-user-forward - [0:0]
:ufw-user-limit - [0:0]
:ufw-user-limit-accept - [0:0]
### RULES ###

### tuple ### allow tcp 80 0.0.0.0/0 any 0.0.0.0/0
-A ufw-user-input -p tcp --dport 80 -j ACCEPT

### END RULES ###
-A ufw-user-input -j RETURN
-A ufw-user-output -j RETURN
-A ufw-user-forward -j RETURN
-A ufw-user-limit -m limit --limit 3/minute -j LOG --log-prefix "[UFW LIMIT]: "
-A ufw-user-limit -j REJECT
-A ufw-user-limit-accept -j ACCEPT
COMMIT
Rules updated</computeroutput>
</screen>

              </listitem>
              <listitem>
                <para><application>ufw</application> puede deshabilitarse por:</para>
<screen>
<command>sudo ufw disable</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para ver la situación del cortafuegos, introduzca:</para>
<screen>
<command>sudo ufw status</command>
</screen>
	      </listitem>
              <listitem>
                <para>Y para una información de estado más detallada, use:</para>
<screen>
<command>sudo ufw status verbose</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para ver el formato <emphasis>numbered</emphasis>:</para>
<screen>
<command>sudo ufw status numbered</command>
</screen>
	      </listitem>
	    </itemizedlist>
	    <note>
	      <para>Si el puerto que desea abrir o cerrar está definido en<filename>/etc/services</filename>, puede usar el nombre del puerto o su número. En los ejemplos anteriores reemplace <emphasis>22</emphasis> con <emphasis>ssh</emphasis>.</para>
	    </note>

  	    <para>Esto es una introducción rápida a <application>ufw</application>. Para más información vaya a las páginas de manual <application>ufw</application>.</para>

            <sect3 id="ufw-application-integration" status="review">
              <title>Integración de la aplicación ufw</title>

              <para>Las aplicaciones abran puertos pueden incluir un perfil <application>ufw</application>, el cual detalla los puertos que la aplicación necesita para funcionar correctamente. Los perfiles se guardan en <filename role="directory">/etc/ufw/applications.d</filename> y puede editarse si los puertos por defecto han cambiado.</para>

              <itemizedlist>
                <listitem>

                  <para>Para ver que aplicaciones tienen instalado un perfil, introduzca lo siguiente en un terminal:</para>

<screen>
<command>sudo ufw app list</command>
</screen>

                </listitem>
                <listitem>

                  <para>Para permitir tráfico a un determinado puerto utilizando los perfiles, introduzca:</para>

<screen>
<command>sudo ufw allow Samba</command>
</screen>

                </listitem>
                <listitem>

                  <para>También está disponible una sintaxis del tipo:</para>

<screen>
<command>ufw allow from 192.168.0.0/24 to any app Samba</command>
</screen>

                  <para>Replace <emphasis>Samba</emphasis> y <emphasis>192.168.0.0/24</emphasis> con el perfil de la aplicación que usa y el rango IP de su red.</para>

                  <note>
                    <para>No es necesario especificarle a la aplicación el <emphasis>protocol</emphasis> porque esa información ya está detallada en el perfil. Advierta que el nombre <emphasis>app</emphasis> reemplaza el número de puerto <emphasis>port</emphasis>.</para>
                  </note>

                </listitem>
                <listitem>

                  <para>Para ver detalles sobre puertos, protocoles, ect definidos para una aplicación, introduzca:</para>

<screen>
<command>sudo ufw app info Samba</command>
</screen>

                </listitem>
              </itemizedlist>

              <para>No todas las aplicaciones que requieren un puerto de red abierto vienen con perfiles <application>ufw</application>, pero si ha creado un perfil para una aplicación  y quiere el archivo incluido en el paquete, por favor, rellene un informe de error en <ulink url="https://launchpad.net/">Launchpad</ulink>.</para>

            </sect3>
	  </sect2>
        <sect2 id="ip-masquerading" status="review">
          <title>Enmascaramiento IP</title>
            <para>El propósito del Enmascaramiento IP (IP Masquerading) es permitir que máquinas con direcciones IP privadas no enrutables de una red accedan a Internet a través de la máquina que realiza el enmascaramiento. Se debe manipular el tráfico que va de su red privada con destino a Internet, para que las respuestas puedan encaminarse adecuadamente a la máquina que hizo la petición. Para ello, el núcleo debe modificar la dirección IP <emphasis>fuente</emphasis> de cada paquete de forma que las respuestas se encaminen hacia ella, en lugar de encaminarla hacia la dirección IP privada que hizo la petición, lo que resulta imposible en Internet. Linux usa Seguimiento de Conexión (<emphasis>Connection Tracking, conntrack)</emphasis> para llevar la cuenta de qué conexiones pertenencen a qué máquinas, y reencaminar adecuadamente cada paquete de retorno. El tráfico que sale de su red privada es, por consiguiente, «enmascarada» dando la sensación de que se ha originado en la máquina Ubuntu que hace de pasarela. Este proceso se denomina Compartición de Conexiones de Internet (Internet Connection Sharing) en la documentación de Microsoft.</para>
	    <sect3 id="ip-masquerade-ufw" status="review">
	      <title>Enmascaramiento ufw</title>
	      <para>El enmascaramiento de IP puede lograrse usando reglas de <application>ufw</application> personalizadas. Esto es posible porque el back-end actual para <application>ufw</application> es <application>iptables-restore</application> con los archivos de reglas ubicados en <filename>/etc/ufw/*.rules</filename>. Estos archivos son un lugar excelente para agregar reglas de iptables legadas usadas sin <application>ufw</application> y reglas que están más relacionadas con puertas de enlace o puentes de red.</para>
	      <para>Las reglas están divididas en dos archivos diferentes, reglas que deben ser ejecutadas antes de las reglas de línea de comandos de ufw, y reglas que deben ser ejecutadas después de las reglas de línea de comandos de ufw.</para>
	      <itemizedlist>
	        <listitem>
		  <para>Primero, el reenvío de paquetes debe ser habilitado en <application>ufw</application>. Dos archivos de configuración necesitarán ser ajustados, en <filename>/etc/default/ufw</filename> cambie <emphasis>DEFAULT_FORWARD_POLICY</emphasis> a <quote>ACCEPT</quote>:</para>
<programlisting>
DEFAULT_FORWARD_POLICY="ACCEPT"
</programlisting>
		  <para>Entonces edite <filename>/etc/ufw/sysctl.conf</filename> y elimine los comentarios:</para>
<programlisting>
net.ipv4.ip_forward=1
</programlisting>
		  <para>Similarmente, para redireccionamiento IPv6 descomente:</para>
<programlisting>
net.ipv6.conf.default.forwarding=1
</programlisting>
		</listitem>
	        <listitem>
		  <para>Ahora agregaremos reglas al archivo <filename>/etc/ufw/before.rules</filename>. Las reglas por defecto solo configuran la tabla <emphasis>filter</emphasis>, y para habilitar el enmascaramiento la tabla <emphasis>nat</emphasis> necesitará ser configurada. Agregue lo siguiente al inicio del archivo justo antes de los comentarios de cabecera.</para>
<programlisting>
# nat Table rules
*nat
:POSTROUTING ACCEPT [0:0]

# Forward traffic from eth1 through eth0.
-A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE

# don't delete the 'COMMIT' line or these nat table rules won't be processed
COMMIT
</programlisting>
	          <para>Los comentarios no son estrictamente necesarios, pero es considerada una buena práctica el comentar su configuración. También, cuando se este modificando alguno de los archivos de <emphasis>reglas</emphasis> en <filename class="directory">/etc/ufw</filename>, verifique que estas líneas son las últimas líneas para cada tabla modificada:</para>

<programlisting>
# don't delete the 'COMMIT' line or these rules won't be processed
COMMIT
</programlisting>

                  <para>Cada <emphasis>Tabla</emphasis> requiere su correspondiente sentencia <emphasis>COMMIT</emphasis>. En estos ejemplos sólo se muestran las tablas <emphasis>nat</emphasis> y <emphasis>filter</emphasis>, pero puede añadir reglas para las tablas <emphasis>raw</emphasis> y <emphasis>mangle</emphasis>.</para>

                  <note>
                   <para>En el ejemplo superior, reemplace <emphasis>eth0</emphasis>, <emphasis>eth1</emphasis>, y <emphasis>192.168.0.0/24</emphasis> con las interfaces apropiadas y el rango IP para su red.</para>
                  </note>

		</listitem>
	        <listitem>
		  <para>Finalmente deshabilite y rehabilite <application>ufw</application> para aplicar los cambios:</para>
<programlisting>
<command>sudo ufw disable &amp;&amp; sudo ufw enable</command>
</programlisting>
		</listitem>
	      </itemizedlist>
	      <para>El enmascaramiento de IP debería estar habilitado ahora. También puede agregar cualquier regla de  FORWARD adicional a <filename>/etc/ufw/before.rules</filename>. Es recomendable que agregue estas reglas adicionales a la cadena <emphasis>ufw-before-forward</emphasis>.</para>
	  </sect3>
	    <sect3 id="ip-masquerading-iptables" status="review">
	    <title>Enmascaramiento iptables</title>
	    <para><application>iptables</application> también puede usarse para habilitar enmascaramiento.</para>
	    <itemizedlist>
	      <listitem>
  	        <para>De forma similar a <application>ufw</application>, el primer paso para habilitar el redireccionamiento de paquetes IPv4 es editar <filename>/etc/sysctl.conf</filename> y descomentar la siguiente línea</para>
<programlisting>
net.ipv4.ip_forward=1
</programlisting>
	        <para>Si quiere habilitar el reenvío IPv6, descomentar también:</para>
<programlisting>
net.ipv6.conf.default.forwarding=1
</programlisting>
 	      </listitem>
	        <listitem>
		  <para>Luego, ejecute el comendo <application>sysctl</application> para habilitar las nuevas configuraciones en el archivo de configuración:</para>
<screen>
<command>sudo sysctl -p</command>
</screen>
		</listitem>
	      <listitem>
	        <para>Se puede lograr el enmascaramiento IP con una simple regla de iptables, que puede variar ligeramente basados en su configuración de red:</para>
<screen>
sudo iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</screen>
	        <para>El comando anterior asume que su espacio de dirección privada es 192.168.0.0/16 y que su interfaz a Internet es ppp0. La sintaxis se descompone como sigue:</para>
		<itemizedlist>
		  <listitem><para>-t nat -- la regla es para ir a la tabla nat</para></listitem>
		  <listitem><para>-A POSTROUTING -- la regla es para añadir (-A) a la cadena POSTROUTING</para></listitem>
  		  <listitem><para>-s 192.168.0.0/16 -- la regla se aplica al tráfico originado desde la dirección específica</para></listitem>
  		  <listitem><para>-o ppp0 -- la regla se aplica al tráfico programado para ser enrutado a través del dispositivo de red especificado</para></listitem>
  		  <listitem>
                    <para>-j MASQUERADE -- el tráfico que se ajuste a esta regla «saltará» («jump», -j) al destino MASQUERADE para ser manipulado como se describió anteriormente</para>
                  </listitem>
	        </itemizedlist>
	      </listitem>
	      <listitem>
		<para>Además, cada cadena en la tabla de filtrado (la tabla predeterminada, y donde la mayoría o todo el filtrado de paquetes ocurre) tiene una <emphasis>política</emphasis> de ACEPTAR, pero si está creando un cortafuegos en adición a un dispositivo de puerta de entrada, puede haber puesto las políticas a DROP o RECHAZAR, en cuyo caso su tráfico enmascarado necesita ser permitido a través de la cadena FORWARD para que la regla funcione.</para>
<screen>
sudo iptables -A FORWARD -s 192.168.0.0/16 -o ppp0 -j ACCEPT
sudo iptables -A FORWARD -d 192.168.0.0/16 -m state --state ESTABLISHED,RELATED -i ppp0 -j ACCEPT
</screen>
		<para>El comando anterior permitirá todas las conexiones de su red local a Internet y que todo el tráfico relacionado a esas conexiones retornen a la máquina que las inició.</para>
	      </listitem>
	      <listitem>
		<para>Si usted desea que el enmascaramiento este habilitado cuando reinicie, y usted probablemente lo desee, edite <filename>/etc/rc.local</filename> y agregue cualquiera de los comandos utilizados anteriormente. Por ejemplo agregue el primero comando sin filtro:</para>
<screen>
iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</screen>
	      </listitem>
	    </itemizedlist>
	    </sect3>
        </sect2>
        <sect2 id="firewall-logs" status="review">
          <title>Logs</title>
            <para>Los registros del cortafuegos son esenciales para reconocer ataques, resolver problemas con las reglas de su cortafuegos, y comprobar actividades inusuales en su red. Debe incluir reglas de registro en su cortafuegos para que se generen esos registros, y dichas reglas deben ir antes de cualquier regla final (es decir, cualquier regla cuyo objetivo decida el destino del paquete, como ACCEPT, DROP o REJECT).</para>
	     <para>Si usted esta utilizando <application>ufw</application>, usted puede activar el logging ingresando lo siguiente en una terminal:</para>
<screen>
<command>sudo ufw logging on</command>
</screen>
	     <para>Para desactivar los registros en <application>ufw</application>, simplemente sustituya <emphasis role="italic">on</emphasis> por <emphasis role="italic">off</emphasis> en el comando anterior.</para>
	     <para>Si se usa <application>iptables</application> en vez de <application>ufw</application>, introduzca:</para>
<screen>
sudo iptables -A INPUT -m state --state NEW -p tcp --dport 80 -j LOG --log-prefix "NEW_HTTP_CONN: "
</screen>
	     <para>Una petición en el puerto 80 de la maquina local, entonces, se generará un registro en dmesg que tiene este aspecto:</para>
			<para>
			  <programlisting>[4304885.870000] NEW_HTTP_CONN: IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=58288 DF PROTO=TCP SPT=53981 DPT=80 WINDOW=32767 RES=0x00 SYN URGP=0</programlisting>
			</para>
			<para>El registro anterior también aparecerá en <filename>/var/log/messages</filename>, <filename>/var/log/syslog</filename> y <filename>/var/log/kern.log</filename>. Este comportamiento se puede cambiar editando apropiadamente el archivo <filename>/etc/syslog.conf</filename>, o instalando y configurando <application>ulogd</application> y utilizando el objetivo ULOG en lugar del LOG. El demonio <application>ulogd</application> es un servidor en espacio de usuario, que escucha las instrucciones de registro que provienen del núcleo y que sean específicamente para firewalls, y puede registrar cualquier archivo que desee, o incluso a una base de datos <application>PostgreSQL</application> o <application>MySQL</application>. Se puede simplificar la interpretación del significado de los registros del firewall usando una herramienta de análisis de registros como <application>fwanalog</application>, <application> fwlogwatch</application> o <application>lire</application>.</para>
        </sect2>	
        <sect2 id="other-firewall-tools" status="review">
          <title>Otras herramientas</title>
            <para>Hay varias herramientas disponible para ayudarlo a construir un cortafuegos completo sin tener conocimiento intimo de iptables. Para los inclinados en GUI:</para>
	    <itemizedlist>
	      <listitem>
		<para><ulink url="http://www.fs-security.com/">Firestarter</ulink> es muy popular y fácil de usar.</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://www.fwbuilder.org/">fwbuilder</ulink> es muy potente y será familiar para un administrador que ha usado utilidades de cortafuegos comerciales como <application>Checkpoint FireWall-1</application>.</para>
	      </listitem>
	    </itemizedlist>
	    <para>Si usted prefiere una herramienta de línea de comandos con archivos de configuración en texto plano:</para>
	    <itemizedlist>
	      <listitem>
		<para><ulink url="http://www.shorewall.net/">Shorewall</ulink> es una solución muy potente para ayudarle a configurar un cortafuegos avanzado para cualquier red.</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://www.linuxkungfu.org/">ipkungfu</ulink> le ofrece un cortafuegos que funciona «de fábrica» sin necesidad de configuración, y le permitirá configurar fácilmente un cortafuegos más avanzado editando archivos de configuración sencillos y bien documentados.</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://fireflier.sourceforge.net/">fireflier</ulink> está diseñado para ser un cortafuegos de escritorio. Está compuesto de un servidor (fireflier-server) y de un de cliente GUI (GTK o QT) a su elección, y se comporta como una de las tantas de las aplicaciones populares cortafuegos interactivas para Windows.</para>
	      </listitem>
	    </itemizedlist>
        </sect2>
	<sect2 id="firewall-references" status="review">
	  <title>Referencias</title>
	  <itemizedlist>
	    <listitem>
	      <para>la página del wiki <ulink url="https://wiki.ubuntu.com/UbuntuFirewall">Ubuntu Firewall</ulink> contiene información sobre el desarrollo de <application>ufw</application>.</para>
	    </listitem> 
	    <listitem>
	      <para>También la página de manual de <application>ufw</application> contiene información útil: <command>man ufw</command>.</para>
	    </listitem> 
	    <listitem>
	      <para>Vea <ulink url="http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html">packet-filtering-HOWTO</ulink> para más información sobre como usar <application>iptables</application>.</para>
	    </listitem> 
	    <listitem>
	      <para><ulink url="http://www.netfilter.org/documentation/HOWTO/NAT-HOWTO.html">nat-HOWTO</ulink> Contiene más detalles sobre enmascaramiento.</para>
	    </listitem> 
	  </itemizedlist>
	</sect2>
	</sect1>
	<sect1 id="apparmor" status="review">
	  <title>AppArmor</title>
	  <para><application>AppArmor</application> es una implementación de Linux Security Module para control de acceso obligatorio basado en nombres. AppArmor limita programas individuales a un conjunto de archivos listados y de capacidades POSIX 1003.1e (borrador).</para>
	  <para><application>AppArmor</application> se instala y se carga de forma predeterminada. Usa <emphasis>perfiles</emphasis> de una aplicación para determinar qué archivos y permisos necesita la aplicación. Algunos paquetes instalarán sus propios perfiles, y se pueden encontrar perfiles adicionales en el paquete <application>apparmor-profiles</application>.</para>
	  <para>Para instalar el paquete <application>apparmor-profiles</application> desde un terminal:</para>
<screen>
<command>sudo apt-get install apparmor-profiles</command>
</screen>
	  <para>Los perfiles AppArmor tienen dos modos de ejecución:</para>
	  <itemizedlist>
	    <listitem>
	      <para>Reclamando/Aprendiendo: violaciones de perfil están permitidas y registradas. Útil para la realización de pruebas y el desarrollo de nuevos perfiles.</para>
	    </listitem>
	    <listitem>
	      <para>Forzada/Confinada: fuerza la política de perfile así como también el registro de la violación.</para>
	    </listitem>
	  </itemizedlist>
	  <sect2 id="apparmor-usage" status="review">
	    <title>Usando AppArmor</title>
	    <para>El paquete <application>apparmor-utils</application> contiene utilidades de línea de comandos que usted puede utilizar para cambiar el modo de ejecución de <application>AppArmor</application>, encontrar el estado de un perfil, crear nuevos perfiles, etc.</para>
	    <itemizedlist>
	      <listitem>
	    	<para><application>apparmor_status</application> se usa para ver el estatus actual de los perfiles AppArmor.</para>
<screen>
<command>sudo apparmor_status</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>aa-complain</application> posiciona un perfil en modo <emphasis>reclamo</emphasis>.</para>
<screen>
<command>sudo aa-complain /path/to/bin</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>aa-enforce</application> coloca un perfil en modo <emphasis>forzar</emphasis>.</para>
<screen>
<command>sudo aa-enforce /path/to/bin</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para>El directorio <filename>/etc/apparmor.d</filename> es donde los perfiles AppArmor se localizan. Puede ser utilizado para manipular el <emphasis>modo</emphasis> de todos los perfiles.</para>
	    	<para>Ingrese lo siguiente para poner todos los perfiles en modo reclamo:</para>
<screen>
<command>sudo aa-complain /etc/apparmor.d/*</command>
</screen>
	    <para>Para colocar todos los perfiles en modo forzar.</para>
<screen>
<command>sudo aa-enforce /etc/apparmor.d/*</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>apparmor_parser</application> es utilizado para cargar el perfil dentro del kernel. También puede ser utilizado para recargar un perfil ya cargado usando la opción <emphasis>-r</emphasis>. Para cargar un perfil:</para>
<screen>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -a</command>
</screen>
		<para>Para recargar un perfil:</para>
<screen>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -r</command>
</screen>
	      </listitem>
	      <listitem>
	   	<para><filename>/etc/init.d/apparmor</filename> puede ser utilizado para <emphasis>recargar</emphasis> todos los perfiles:</para>
<screen>
<command>sudo /etc/init.d/apparmor reload</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para>El directorio <filename>/etc/apparmor.d/disable</filename> puede ser utilizado junto con la opción <application>apparmor_parser -R</application> para <emphasis>deshabilitar</emphasis> un perfil.</para>
<screen>
<command>sudo ln -s /etc/apparmor.d/profile.name /etc/apparmor.d/disable/</command>
<command>sudo apparmor_parser -R /etc/apparmor.d/profile.name</command>
</screen>
	        <para>Para <emphasis>rehabilitar</emphasis> un perfil deshabilitado, elimine el vínculo simbólico del perfil en <filename>/etc/apparmor.d/disable/</filename>. Luego, cargue el perfil usando la opción <emphasis>-a</emphasis>.</para>
<screen>
<command>sudo rm /etc/apparmor.d/disable/profile.name</command>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -a</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para><application>AppArmor</application> puede ser deshabilitado, y el modulo del kernel descargado ingresando lo siguiente:</para>
<screen>
<command>sudo /etc/init.d/apparmor stop</command>
<command>sudo update-rc.d -f apparmor remove</command>
</screen>
	      </listitem>
	      <listitem>
	        <para>Para rehabilitar <application>AppArmor</application> introduzca:</para>
<screen>
<command>sudo /etc/init.d/apparmor start</command>
<command>sudo update-rc.d apparmor defaults</command>
</screen>
	      </listitem>
	    </itemizedlist>
	    <note>
	      <para>Reemplace <emphasis>profile.name</emphasis> con el nombre del perfil que quiere manipular. Además, reemplace <filename>/path/to/bin/</filename> con la ruta del archivo ejecutable. Por ejemplo para la orden <application>ping</application> use <filename>/bin/ping</filename>.</para>
	    </note>
	  </sect2>
	  <sect2 id="apparmor-profiles" status="review">
	    <title>Perfiles</title>
	    <para>Los perfiles <application>AppArmor</application> son archivos de texto plano alojados en <filename>/etc/apparmor.d/</filename>. Los archivos son nombrados después de la ruta completa al ejecutable de su perfil cambiando "/" por ".". Por ejemplo <filename>/etc/apparmor.d/bin.ping</filename> es el perfil de AppArmor para la orden <filename>/bin/ping</filename>.</para>
	    <para>Hay dos tipos principales de reglas usadas en perfiles:</para>
	    <itemizedlist>
	      <listitem>
	        <para><emphasis>Entradas de ruta:</emphasis> que detallan a qué archivos puede acceder una aplicación en el sistema de archivos.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>Entradas de capacidad::</emphasis> determinan qué privilegios puede utilizar un proceso confinado.</para>
	      </listitem>
	    </itemizedlist>
	    <para>Como un ejemplo de una mirada a <filename>/etc/apparmor.d/bin.ping</filename>:</para>
<programlisting>
#include &lt;tunables/global&gt;
/bin/ping flags=(complain) {
  #include &lt;abstractions/base&gt;
  #include &lt;abstractions/consoles&gt;
  #include &lt;abstractions/nameservice&gt;

  capability net_raw,
  capability setuid,
  network inet raw,
  
  /bin/ping mixr,
  /etc/modules.conf r,
}
</programlisting>
	    <itemizedlist>
	      <listitem>
	        <para><emphasis>#include &lt;tunables/global&gt;:</emphasis> incluye declaraciones de los otros archivos. Esto permite que las declaraciones pertenecientes a múltiples aplicaciones puedan ser colocadas en un archivo común.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>/bin/ping flags=(complain):</emphasis> ruta del programa perfilado, también establece el modo a <emphasis>complain</emphasis>.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>capacidad net_raw,:</emphasis> permite a la aplicación acceder a la capacidad CAP_NET_RAW Posix.1e.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>/bin/ping mixr,:</emphasis> permite a la aplicación leer y ejecutar el acceso al archivo.</para>
	      </listitem>
            </itemizedlist>
	    <note>
	      <para>Después de editar el archivo de perfil, el perfil debe ser recargado. Ver <xref linkend="apparmor-usage"/> para detalles.</para>
	    </note>
	    <sect3 id="apparmor-profiles-new" status="review">
	      <title>Crear un perfil</title>
	      <itemizedlist>
		<listitem>
	          <para><emphasis>Diseñe un plan de pruebas:</emphasis> Trate de pensar sobre cómo la aplicación debe ser ejercida. El plan de pruebas debe ser dividido en casos de prueba pequeños. Cada caso de prueba debe tener una descripción pequeña y debe listar los pasos a seguir.</para>
		  <para>Algunos casos estándar de prueba son:</para>
	          <itemizedlist>
		    <listitem>		
		      <para>Iniciando el programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Parando el programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Recargando el programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Comprobar todas las órdenes soportadas por el script de inicio.</para>
		    </listitem>
		  </itemizedlist>
		</listitem>
	        <listitem>
	          <para><emphasis>Generar el nuevo perfil:</emphasis> Utilice <application>aa-genprof</application> para generar un nuevo perfil. Desde una terminal:</para>
<screen>
<command>sudo aa-genprof executable</command>
</screen>
		    <para>Por ejemplo:</para>
<screen>
<command>sudo aa-genprof slapd</command>
</screen>
		</listitem>
		<listitem>
		  <para>Para tener su nuevo perfil incluido en el paquete <application>apparmor-profiles</application>, registre un error en <emphasis>Launchpad</emphasis> en contra del paquete <ulink url="https://bugs.launchpad.net/ubuntu/+source/apparmor/+filebug">AppArmor</ulink>:</para>
		  <itemizedlist>
		    <listitem>
		      <para>Incluye su plan de prueba y casos de prueba.</para>
		    </listitem>
		    <listitem>
		      <para>Adjunte el nuevo perfil al error.</para>
		    </listitem>
		  </itemizedlist>
		</listitem>
	      </itemizedlist>
	    </sect3>
	    <sect3 id="apparmor-profiles-update" status="review">
	      <title>Actualizando perfiles</title>
	      <para>Cuando el programa da error, se envía a los archivos de registro un mensaje de intervención. El programa <application>aa-logprof</application> se puede utilizar para explorar archivos de registro para mensajes de intervención de <application>AppArmor</application>, revisarlos y actualizar los perfiles. Desde un terminal:</para>
<screen>
<command>sudo aa-logprof</command>
</screen>
	    </sect3>
	  </sect2>	   
	  <sect2 id="apparmor-references" status="review">
	    <title>Referencias</title>
	    <itemizedlist>
	      <listitem>
	        <para>Vea <ulink url="http://www.novell.com/documentation/apparmor/apparmor201_sp10_admin/index.html?page=/documentation/apparmor/apparmor201_sp10_admin/data/book_apparmor_admin.html">AppArmor Administration Guide</ulink> para las opciones de configuración avanzadas.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	        <para>Para detalles de cómo usar AppArmor con otras versiones de Ubuntu, vea la página <ulink url="https://help.ubuntu.com/community/AppArmor"> AppArmor Community Wiki</ulink>.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	        <para>La página <ulink url="http://en.opensuse.org/AppArmor">OpenSUSE AppArmor</ulink> es otra introducción a AppArmor.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	  	<para>Un gran lugar para pedir asistencia de AppArmor, e involucrarse con la Comunidad de Ubuntu Server, es el canal IRC <emphasis>#ubuntu-server</emphasis> en <ulink url="http://freenode.net">freenode</ulink>.</para>
	      </listitem>
	    </itemizedlist>
	  </sect2>
	</sect1>

        <sect1 id="certificates-and-security" status="review">
          <title>Certificados</title>
            <para>Una de las formas de cifrado más comunes hoy en día es el cifrado de <emphasis>clave pública</emphasis>. El cifrado de clave pública utiliza una <emphasis>clave pública</emphasis> y una <emphasis>clave privada</emphasis>. El funcionamiento del sistema consiste en <emphasis>cifrar</emphasis> información usando la clave pública. Esta información cifrada sólo puede ser <emphasis>descifrada</emphasis> usando la clave privada.</para>
            <para>Un uso habitual del cifrado de clave pública es el cifrado del tráfico de una aplicación usando una conexión «Secure Socket Layer» (SSL) o «Transport Layer Security» (TLS), por ejemplo, configurar Apache para que utilice <emphasis>HTTPS</emphasis>, el protocolo HTTP sobre SSL. Esto proporciona una manera de cifrar el tráfico de datos cuando se utiliza un protocolo que no ofrece cifrado por sí mismo.</para>
            <para>Un <emphasis>certificado</emphasis> es un método utilizado para distribuir una <emphasis>clave pública</emphasis> y otra información sobre un servidor, y la organización responsable de él. Los certificados pueden estar firmados digitalmente por una <emphasis>Autoridad de certificación</emphasis> o AC. Un AC es un tercero en quien se confía que ha confirmado la veracidad de la información contenida en el certificado.</para>
        <sect2 id="types-of-certificates" status="review">
          <title>Tipos de Certificados</title>
            <para>Para configurar un servidor seguro usando criptografía de clave pública, en la mayoría de los casos, tiene que enviar su solicitud de certificado (incluyendo su clave pública), demostrar la identidad de su empresa, y pagar a una AC. La AC verifica la solicitud de certificado y su identidad, y luego le envía un certificado para su servidor seguro. Como alternativa, puede crearse su propio certificado <emphasis>autofirmado</emphasis>.</para>
            <note>
              <para>Tenga en cuenta que los certificados autofirmados no deberían usarse en la mayoría de los entornos de producción.</para>
            </note>
            <para>Continuando con el ejemplo de HTTPS, un certificado firmado por una AC proporciona dos características importantes que un certificado autofirmado no posee:</para>

            <itemizedlist>
            <listitem>
            <para>Los navegadores (habitualmente) reconocen automáticamente el certificado y permiten establecer una conexión segura sin preguntar al usuario.</para>
            </listitem>
            <listitem>
            <para>Cuando una CA envía un certificado firmado, está garantizando la identidad de la organización que está suministrando las páginas web al navegador.</para>
            </listitem>
            </itemizedlist>
	
            <para>La mayoría de los navegadores web y los equipos que soportan SSL tienen una lista de CAs cuyos certificados aceptan automáticamente. Si un navegador encuentra un certificado autorizado por una CA que no está en la lista, preguntará al usuario si desea aceptar o rechazar la conexión. Otras aplicaciones pueden generar también un mensaje de error al usar un certificado autofirmado.</para>
            <para>El proceso para obtener un certificado de una AC es realmente sencillo. Lo siguiente es un vistazo rápido:</para>

            <orderedlist>
            <listitem>
               <para>Crear dos llaves encriptadas pública y privada.</para>
            </listitem>
            <listitem>
                 <para>Crear una solicitud de certificado basado en la clave pública. La solicitud de certificado contiene información sobre su servidor y la compañía que lo aloja.</para>
            </listitem>
            <listitem>
                 <para>Enviar la solicitud de certificado, junto con los documentos que prueban su identidad, a una CA. No podemos decirle qué autoridad de certificación elegir. Su decisión debe basarse en sus experiencias pasadas, o en las experiencias de sus amigos o colegas, o simplemente en factores económicos.</para>

                    <para>Una vez se haya decidido por una CA, necesita seguir las instrucciones que ésta le proporcione para obtener un certificado proveniente de ella.</para>
            </listitem>
            <listitem>
               <para>Cuando la CA esté segura de que tiene todo lo que necesita de usted, le enviará un certificado digital.</para>
            </listitem>
            <listitem>
              <para>Instale este certificado en su servidor seguro, y configure las aplicaciones apropiadas para usar el certificado.</para>
            </listitem>
            </orderedlist>

        </sect2>
        <sect2 id="generating-a-csr" status="review">
          <title>Generar una Petición de Firma de Certificado (Certificate Signing Request, CSR)</title>

          <para>Cuando obtenga un certificado de una CA, o genere su propio certificado auto-firmado, el primer paso es generar una clave.</para>

          <para>Si el certificado se va a usar por los demonios de servicio tales como Apache, Postfix, Dovecot, etc., frecuentemente es apropiado usar una clave sin contraseña. No tener contraseña permite a los servicios arrancar sin intervención manual, normalmente la forma preferida de arrancar un demonio.</para>

          <para>Esta sección cubre la generación de una clave con contraseña y una sin ella. La clave sin contraseña puede luego ser usada para generar un certificado que puede usarse con varios demonios de servicio.</para>

          <warning>
            <para>Correr su servicio seguro sin una contraseña es útil por que no necesitara introducir su contraseña cada vez que inicie su servicio seguro. Pero esto es inseguro y comprometer la clave es comprometer al servidor también.</para>
          </warning>

          <para>Para generar las <emphasis>llaves</emphasis> para la Solicitud de Firma de Certificado (CSR, Certificate Signing Request) ejecute el siguiente comando desde una terminal:</para>

<screen>
<command>openssl genrsa -des3 -out server.key 1024</command>
</screen>

<programlisting>
Generating RSA private key, 1024 bit long modulus

.....................++++++

.................++++++

unable to write 'random state'

e is 65537 (0x10001)

Enter pass phrase for server.key:
</programlisting>

        <para>Ahora puede introducir su frase de paso. Para mayor seguridad, ésta debería contener, al menos, ocho caracteres. La longitud mínima al especificar -des3 es de cuatro caracteres. Debe incluir números y/o signos de puntuación, y no debería ser una palabra que se pudiera encontrar en un diccionario. Además, recuerde que su frase de paso distingue mayúsculas de minúsculas.</para>

        <para>Reteclear la contraseña para verificar. Una vez que la haya retecleado correctamente, se genera la llave servidor y se guarda en el archivo <filename>server.key</filename>.</para>
      
        <para>Ahora crea la clave insegura, la una sin contraseña, y baraja los nombres de clave:</para>

<screen>
<command>openssl rsa -in server.key -out server.key.insecure</command>
<command>mv server.key server.key.secure</command>
<command>mv server.key.insecure server.key</command>
</screen>

        <para>La clave insegura ahora se llama <filename>server.key</filename>, y puede usar este archivo para generar el CSR sin contraseña.</para>

        <para>Para crear el CSR, ejecute el siguiente comando en un terminal:</para>

<screen>
<command>openssl req -new -key server.key -out server.csr</command>
</screen>

        <para>Le pedirá que introduzca una contraseña. Si introduce la contraseña correcta, le pedirá que introduzca el nombre de compañía. Una vez que introduzca todos estos detalles, su CSR será creado y guardado en el archivo <filename>server.csr</filename>. Nombre del sitio, id del correo-e, etc.</para>
	<para>Puede enviar este archivo CSR a un CA para su procesamiento. El CA usará este archivo CSR y emitirá el certificado. Por otro lado, puede crear certificados auto-firmados usando este CSR.</para>
        
	</sect2>
        <sect2 id="creating-a-self-signed-certificate" status="review">
          <title>Creación de un certificado auto-firmado</title>
            <para>Para crear un certificado auto-firmado, ejecute la siguiente orden en una terminal:</para>
<screen>
<command>openssl·x509·-req·-days·365·-in·server.csr·-signkey·server.key·-out·server.crt</command>
</screen>

            <para>La orden anterior le solicitará que introduzca la frase de paso. Cuando la haya introducido, se creará su certificado y se almacenará en el archivo <filename>server.crt</filename>.</para>
        <warning>
        <para>Si su servidor seguro se va a usar en un entorno de producción, probablemente necesitará un certificado firmado por una CA. No se recomienda el uso de certificados auto-firmados.</para>
        </warning>
        </sect2>
        <sect2 id="installing-the-certificate" status="review">
          <title>Instalar el Certificado</title>

            <para>Puede instalar el archivo llave <filename>server.key</filename> y el archivo certificado <filename>server.crt</filename>, o el archivo certificado emitido por su CA, usando las siguientes órdenes en un terminal:</para>
<screen>
<command>sudo cp server.crt /etc/ssl/certs</command>
<command>sudo cp server.key /etc/ssl/private</command>
</screen>
        <para>Ahora simplemente configure cualquier aplicación, con la habilidad de usar criptografía de clave pública, para usar los archivos <emphasis>certificado</emphasis> y <emphasis>clave</emphasis>. Por ejemplo, <application>Apache</application> puede proveer HTTPS, <application>Dovecot</application> puede proveer IMAPS y POP3S, etc.</para>
        </sect2>
        <sect2 id="certificate-authority" status="review">
          <title>Autoridad de certificación</title>

          <para>Si los servicios de su red necesitan más que unos pocos certificados autofirmados, puede que merezca la pena el esfuerzo añadido de configurar su propia <emphasis>Autoridad de Certificación (CA)</emphasis> interna. Al usar los certificados firmados por su propia CA, conseguirá que los diferentes servicios que usen esos certificados confíen fácilmente en otros servicios que usen certificados emitidos por la misma AC.</para>

          <procedure>
            <step>
  
              <para>Primero, cree los directorios donde mantener los certificados de la AC y los archivos relacionados:</para>    

<screen>
<command>sudo mkdir /etc/ssl/CA</command>
<command>sudo mkdir /etc/ssl/newcerts</command>
</screen>

            </step>
            <step>
  
              <para>La CA necesita unos cuantos archivos más para funcionar: uno para llevar la cuenta del último número de serie usado por la CA (cada certificado tiene un número de serie único), y otro archivo para registrar los certificados que ya han sido emitidos:</para>    

<screen>
<command>sudo sh -c "echo '01' &gt; /etc/ssl/CA/serial"</command>
<command>sudo touch /etc/ssl/CA/index.txt</command>
</screen>

            </step>
            <step>
  
              <para>El tercer archivo es un archivo de configuración de AC. Aunque no es estrictamente necesario, es muy conveniente cuando se emiten varios certificados. Edite <filename>/etc/ssl/openssl.cnf</filename> y cambie lo siguiente en <emphasis>[ CA_default ]</emphasis>:</para>    

<programlisting>
dir             = /etc/ssl/             # Donde se mantendrá todo
database        = $dir/CA/index.txt     # archivo índice de base de datos.
certificate     = $dir/certs/cacert.pem # El certificado de AC
serial          = $dir/CA/serial        # El número de serie actual
private_key     = $dir/private/cakey.pem# La clave privada
</programlisting>    

            </step>
            <step>
  
              <para>A continuación, cree el certificado raíz auto firmado.</para>    

<screen>
<command>openssl req -new -x509 -extensions v3_ca -keyout cakey.pem -out cacert.pem -days 3650</command>
</screen>

              <para>Entonces se le pedirá que introduzca los detalles del certificado.</para>

            </step>
            <step>
  
              <para>Ahora instale el certificado raíz y la clave:</para>    

<screen>
<command>sudo mv cakey.pem /etc/ssl/private/</command>
<command>sudo mv cacert.pem /etc/ssl/certs/</command>
</screen>

            </step>
            <step>
  
              <para>Ahora todo está preparado para empezar a firmar certificados. Lo primero que necesita es una solicitud de firma de certificado (Certificate Signing Request, CSR). Consulte <xref linkend="generating-a-csr"/> para más información. Una vez que disponga de un CSR, introduzca lo siguiente para generar un certificado firmado por la CA:</para>    

<screen>
<command>sudo openssl ca -in server.csr -config /etc/ssl/openssl.cnf</command>
</screen>

              <para>Tras introducir la contraseña para la clave de la AC, se le pedirá firmar el certificado, y una vez más para finalizar su creación. A continuación debería ver una salida de gran tamaño relacionada con la creación del certificado.</para>

            </step>
            <step>
  
              <para>Ahora debería haberse creado un archivo nuevo, <filename>/etc/ssl/newcerts/01.pem</filename>, que contiene la misma salida. Copie y pegue todo lo que haya entre las líneas <emphasis>-----BEGIN CERTIFICATE-----</emphasis> y <emphasis>----END CERTIFICATE-----</emphasis> a un archivo que tenga el mismo nombre que el «hostname» del servidor donde se va a instalar el certificado. Por ejemplo, <filename>correo.ejemplo.com.crt</filename> es un nombre adecuado y descriptivo.</para>    

              <para>Los certificados subsiguientes serán nombrados <filename>02.pem</filename>, <filename>03.pem</filename>, etc.</para>

              <note>
                <para>Reemplace <emphasis>mail.example.com.crt</emphasis> con su propio nombre descriptivo.</para>
              </note>

            </step>
            <step>
  
              <para>Finalmente, copie el certificado nuevo a la máquina que lo necesite, y configure las aplicaciones que lo utilicen. La localización por defecto para instalar el certificado es <filename role="directory">/etc/ssl/certs</filename>. Esto permite que varios servicios utilicen el mismo certificado sin complicar los permisos del archivo.</para>    

              <para>Para aplicaciones que puedan configurarse para utilizar el certificado CA, debería copiar además el archivo <filename>/etc/ssl/certs/cacert.pem</filename> al directorio <filename role="directory">/etc/ssl/certs/</filename> de cada servidor.</para>

            </step>
          </procedure>

        </sect2>
        <sect2 id="certificate-references" status="review">
          <title>Referencias</title>
          <itemizedlist>
            <listitem>
              <para>Para instrucciones mas detalladas en la utilización de criptografía observe el <ulink url="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html">HOWTO de Certificados SSL</ulink> de tlpd.org</para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.pki-page.org/">La página PKI</ulink> contiene una lista de autoridades de certificación.</para>
            </listitem>
            <listitem>
              <para>La página Wikipedia de <ulink url="http://en.wikipedia.org/wiki/Https">HTTPS</ulink> tiene mayor información relacionada a HTTPS.</para>
            </listitem>
            <listitem>
              <para>Para más información sobre <emphasis>OpenSSL</emphasis> vea la <ulink url="http://www.openssl.org/">página de inicio de OpenSSL</ulink>.</para>
            </listitem>
            <listitem>
              <para>El libro de O'Reilly <ulink url="http://oreilly.com/catalog/9780596002701/">Network Security with OpenSSL</ulink> es una buena referencia para obtener detalles en profundidad.</para>
            </listitem>
          </itemizedlist>
        </sect2>
        </sect1>
        <sect1 id="ecryptfs" status="review">
          <title>eCryptfs</title>
          
          <para><emphasis>eCryptfs</emphasis> es un sólido sistema de archivos  criptográfico compatible POSIX de nivel empresarial para Linux.  Construido sobre la capa del sistema de archivos <emphasis>eCryptfs</emphasis>, protege los archivos sin importar el sistema de archivos o tipo de partición subyacentes.</para>

          <para>Durante la instalación hay una opción para cifrar la partición <filename role="directory">/home</filename>. Esto automáticamente configurará todo lo necesario para cifrar y montar la partición.</para>

          <para>Como un ejemplo, esta sección cubre la configuración de <filename role="directory">/srv</filename> para ser cifrado usando eCryptfs.</para>

          <sect2 id="ecryptfs-usage" status="review">
            <title>Usar eCryptfs</title>

            <para>Primero instale los paquetes necesarios. En una consola introduzca:</para>

<screen>
<command>sudo apt-get install ecryptfs-utils</command>
</screen>

            <para>Ahora monte la partición a cifrar:</para>

<screen>
<command>sudo mount -t ecryptfs /srv /srv</command>
</screen>

            <para>Se le preguntará por algunos detalles acerca de como <application>ecryptfs</application> debe cifrar los datos.</para>
         
            <para>Para comprobar que los archivos que están en <filename>/srv</filename> están en efecto cifrados, copie la carpeta <filename>/etc/default</filename> a <filename>/srv</filename>:</para>

<screen>
<command>sudo cp -r /etc/default /srv</command>
</screen>

            <para>Ahora desmonte <filename>/srv</filename>e intente ver un archivo:</para>

<screen>
<command>sudo umount /srv</command>
<command>cat /srv/default/cron</command>
</screen>

            <para>Montar de nuevo <filename>/srv</filename> usando <application>ecryptfs</application> volverá a hacer visibles los datos.</para>
     
          </sect2>
          <sect2 id="ecryptfs-automount" status="review">
            <title>Montar automáticamente particiones cifradas</title>
            
            <para>Hay varias maneras de montar automáticamente un sistema de archivos cifrado <application>ecryptfs</application> durante el arranque. Este ejemplo usará un archivo <filename>/root/.ecryptfsrc</filename> que contiene opciones de montaje, así como un archivo de contraseñas almacenado en una llave USB.</para>

            <para>Primer cree <filename>/root/.ecryptfsrc</filename> conteniendo:</para>

<programlisting>
key=passphrase:passphrase_passwd_file=/mnt/usb/passwd_file.txt
ecryptfs_sig=5826dd62cf81c615
ecryptfs_cipher=aes
ecryptfs_key_bytes=16
ecryptfs_passthrough=n
ecryptfs_enable_filename_crypto=n
</programlisting>

            <note>
              <para>Ajuste <emphasis>ecryptfs_sig</emphasis> a la firma en <filename>/root/.ecryptfs/sig-cache.txt</filename>.</para>
            </note>

            <para>Después cree el archivo de contraseña <filename>/mnt/usb/passwd_file.txt</filename>:</para>

<programlisting>
passphrase_passwd=[secrets]
</programlisting>

            <para>Ahora añada las líneas necesarias a<filename>/etc/fstab</filename>:</para>

<programlisting>
/dev/sdb1       /mnt/usb        ext3    ro      0 0
/srv /srv ecryptfs defaults 0 0
</programlisting>

            <para>Asegúrese de que la unidad USB está montada antes de la partición cifrada.</para>

            <para>Finalmente reinicie y <filename>/srv</filename> deberá estar montado usando ecryptfs.</para>
            
          </sect2>
          <sect2 id="ecryptfs-other-utils" status="review">
            <title>Otras utilidades</title>

            <para>El paquete <application>ecryptfs-utils</application> incluye algunas otras utilidades:</para>

            <itemizedlist>
              <listitem>
                <para><emphasis>ecryptfs-setup-private:</emphasis> crea un directorio <filename>~/Private</filename> para contener información cifrada. Esta utilidad puede ejecutarse por usuarios sin privilegios para mantener datos privados de otros usuarios en el sistema.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-mount-private y ecryptfs-umount-private:</emphasis> monta y desmonta respectivamente un directorio <filename>~/Private</filename> de usuario.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-add-passphrase:</emphasis> añade una nueva contraseña al anillo de contraseñas del núcleo.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-manager:</emphasis> gestiona objetos <application>eCryptfs</application> tales como claves.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-stat:</emphasis> le permite ves la metainformación <application>ecryptfs</application> de un archivo.</para>
              </listitem>
            </itemizedlist>

          </sect2>
          <sect2 id="ecryptfs-references" status="review">
            <title>Referencias</title>
            
            <itemizedlist>
              <listitem>
                <para>Para más información de eCryptfs vea la <ulink url="https://launchpad.net/ecryptfs">Página del proyecto Launch Pad</ulink></para>
              </listitem>
              <listitem>
                <para>También hay un artículo en <ulink url="http://www.linuxjournal.com/article/9400">Linux Journal</ulink> que cubre eCryptfs.</para>
              </listitem>
              <listitem>
                <para>Para más información sobre las opciones de <application>ecryptfs</application> vea la página de manual de <ulink url="http://manpages.ubuntu.com/manpages/jaunty/en/man7/ecryptfs.7.html">ecryptfs</ulink>.</para>
              </listitem>
            </itemizedlist>

          </sect2>
        </sect1>
    </chapter>
