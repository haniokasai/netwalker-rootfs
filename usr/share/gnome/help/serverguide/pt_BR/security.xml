<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../libs/global.ent">
<!-- NAMES --><!ENTITY canonical-name "Canonical Ltd.">
<!ENTITY project-name "Ubuntu Documentation Project">
<!ENTITY ubuntu "<phrase>Ubuntu</phrase>">
<!ENTITY sg-title "Server Guide">
<!-- VERSIONS --><!ENTITY distro-version "Jaunty Jackalope">
<!ENTITY distro-rev "9.04">
<!ENTITY distro-release-date "April 2009">
<!ENTITY distro-short-codename "jaunty">
<!ENTITY distro-apt-cd-name "Ubuntu 9.04_Jaunty_Jackalope">
<!ENTITY linux-kernel-version "2.6.27">
<!ENTITY gcc-version "4.3.1">
<!ENTITY glibc-version "2.8">
<!ENTITY python-version "2.5">
<!ENTITY glossary SYSTEM "../common/C/glossary.xml">
<!-- LEGAL URLs --><!ENTITY legalnotice SYSTEM "../libs/C/legalnotice.xml">
<!ENTITY gpl-url '<ulink url="http://www.gnu.org/licenses/gpl.html">GNU General Public License</ulink>'>
<!ENTITY cc "http://creativecommons.org/">
<!ENTITY cc-attrib '<ulink url="http://creativecommons.org/licenses/by-sa/2.5/">Attribution-ShareAlike 2.5</ulink>'>
<!ENTITY cc-fulldeed-url "http://creativecommons.org/licenses/by-sa/2.5/legalcode/">
<!ENTITY fdl-url '<ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink>'>
<!ENTITY cc-disclaimer-url "http://creativecommons.org/licenses/disclaimer-popup?lang=en">
<!-- CANONICAL URL RESOURCES --><!ENTITY canonical-url "http://www.canonical.com">
<!-- OTHER UBUNTU RELATED RESOURCES --><!ENTITY upstart-url "http://upstart.ubuntu.com">
<!-- UBUNTU IRC INFORMATION --><!ENTITY irc-network "Freenode">
<!ENTITY irc-server "irc.ubuntu.com">
<!ENTITY ubuntu-irc "irc.ubuntu.com channel #ubuntu">
<!ENTITY kubuntu-irc "irc.ubuntu.com channel #kubuntu">
<!ENTITY xubuntu-irc "irc.ubuntu.com channel #xubuntu">
<!ENTITY edubuntu-irc "irc.ubuntu.com channel #edubuntu">
<!-- UBUNTU URL RESOURCES --><!ENTITY ubuntu-packages "http://packages.ubuntu.com">
<!ENTITY ubuntu-web "http://www.ubuntu.com">
<!ENTITY ubuntu-main "http://www.ubuntu.com">
<!ENTITY ubuntu-download "http://www.ubuntu.com/download">
<!ENTITY ubuntu-forums "http://www.ubuntu.com/community/forums">
<!ENTITY ubuntu-components "http://www.ubuntu.com/ubuntu/components">
<!ENTITY ubuntu-lists "http://lists.ubuntu.com">
<!ENTITY ubuntu-wiki "http://wiki.ubuntu.com">
<!ENTITY ubuntu-bugzilla "https://launchpad.net/distros/ubuntu/+bugs">
<!ENTITY ubuntu-doc-bugs "https://launchpad.net/products/ubuntu-doc/+bugs">
<!ENTITY ubuntu-support "http://www.ubuntu.com/support">
<!ENTITY ubuntu-paidsupport "http://www.ubuntu.com/support/paid">
<!ENTITY ubuntu-freesupport "http://www.ubuntu.com/support/free">
<!ENTITY ubuntu-comments "http://www.ubuntuforums.org/showthread.php?p=21787">
<!ENTITY ubuntu-documentation "http://help.ubuntu.com">
<!ENTITY ubuntu-documentation-repos "https://docteam.ubuntu.com/repos/trunk">
<!ENTITY ubuntu-doc-team "https://wiki.ubuntu.com/DocumentationTeam">
<!ENTITY ubuntu-doc-list "http://lists.ubuntu.com/mailman/listinfo/ubuntu-doc">
<!ENTITY ubuntu-shipit "http://shipit.ubuntu.com">
<!ENTITY ubuntu-launchpad "https://launchpad.ubuntu.com">
<!ENTITY ubuntu-rosetta "https://launchpad.ubuntu.com/rosetta">
<!ENTITY ubuntu-planet "http://planet.ubuntu.com">
<!ENTITY ubuntu-philosophy "http://www.ubuntu.com/ubuntu/philosophy">
<!ENTITY ubuntu-participate "http://www.ubuntu.com/community/participate/">
<!ENTITY ubuntu-marketplace "http://www.ubuntu.com/support/marketplace">
<!ENTITY ubuntu-hwdb "http://hwdb.ubuntu.com">
<!-- UBUNTU WIKI RESOURCES --><!ENTITY wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY restricted-formats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-RestrictedFormats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-XChatHowto "https://help.ubuntu.com/community/XChatHowto">
<!ENTITY wiki-RootSudo "https://help.ubuntu.com/community/RootSudo">
<!ENTITY wiki-HowToGetHelp "https://help.ubuntu.com/community/HowToGetHelp">
<!ENTITY transcode "https://help.ubuntu.com/community/DVDRippingandEncoding">
<!ENTITY wiki-Wine "https://help.ubuntu.com/community/Wine">
<!ENTITY wiki-Cedega "https://help.ubuntu.com/community/Cedega">
<!ENTITY wiki-Nano "https://help.ubuntu.com/community/NanoHowto">
<!ENTITY wiki-locoteams "https://wiki.ubuntu.com/LoCoTeamList">
<!ENTITY wiki-BasicCommands "https://help.ubuntu.com/community/BasicCommands">
<!ENTITY wiki-filepermissions "https://help.ubuntu.com/community/FilePermissions">
<!-- KUBUNTU URL RESOURCES --><!ENTITY kubuntu-web "http://www.kubuntu.org">
<!ENTITY kubuntu-main "http://www.kubuntu.org">
<!ENTITY kubuntu-download "http://releases.ubuntu.com/kubuntu/">
<!ENTITY kubuntu-packages "http://packages.ubuntu.com/edgy/">
<!ENTITY kubuntu-cdpackages-nodefault "http://people.ubuntu.com/~cjwatson/seeds/kubuntu-edgy/ship">
<!ENTITY kubuntu-lists "http://lists.ubuntu.com/archives/kubuntu-users/">
<!ENTITY kubuntu-lists-users "http://lists.ubuntu.com/mailman/listinfo/kubuntu-users/">
<!ENTITY kubuntu-lists-devel "http://lists.ubuntu.com/mailman/listinfo/kubuntu-devel/">
<!ENTITY kubuntu-mirrors "http://distrowatch.com/kubuntu">
<!ENTITY kubuntu-forums "http://kubuntuforums.net">
<!ENTITY kubuntu-wiki "https://wiki.kubuntu.org">
<!ENTITY kubuntu-documentation-site "http://www.kubuntu.org/documentation.php">
<!ENTITY kubuntu-wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY kubuntu-support "http://www.kubuntu.org/support.php">
<!-- XUBUNTU URL RESOURCES --><!ENTITY xubuntu-web "http://www.xubuntu.org">
<!ENTITY xubuntu-main "http://www.xubuntu.org">
<!ENTITY xubuntu-web-help "http://www.xubuntu.org/help">
<!-- DEBIAN RESOURCES --><!ENTITY debian-apt "http://www.debian.org/doc/user-manuals#apt-howto">
<!-- EXTERNAL URL RESOURCES --><!ENTITY linmodem "http://www.linmodems.org/">
<!ENTITY gnome "http://www.gnome.org/">
<!ENTITY linuxorg "http://www.linux.org/">
<!ENTITY ooo "http://www.openoffice.org/">
<!ENTITY kde "http://www.kde.org/">
<!ENTITY lugww "http://lugww.counter.li.org/">
<!ENTITY ubuntu-watch "http://distrowatch.com/ubuntu/">
<!ENTITY realplayer-download "http://www.real.com/linux/">
<!ENTITY nvu-download "http://www.nvu.com/download.html">
<!ENTITY sunjava-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY xorg "http://www.x.org">
<!ENTITY dyndns "http://www.dyndns.org">
<!ENTITY shoutcast "http://www.shoutcast.com/">
<!ENTITY freedomtoaster "http://www.freedomtoaster.org/">
<!ENTITY xfce "http://www.xfce.org/">
<!-- ubuntu-screenshots TODO --><!ENTITY kubuntu-screenshots "http://shots.osdir.com/">
<!ENTITY mozilla "http://www.mozilla.org/">
<!ENTITY mozilla-firefox "http://www.mozilla.org/products/firefox/">
<!ENTITY gnu "http://www.gnu.org/">
<!ENTITY gnu-philosophy "http://www.gnu.org/philosophy/">
<!ENTITY win4lin "http://www.win4lin.com">
<!ENTITY codeweavers "http://www.codeweavers.com">
<!ENTITY kernel "http://www.kernel.org">
<!ENTITY google "http://www.google.com">
<!ENTITY kdelook " http://www.kde-look.org">
<!ENTITY lulu-store "http://www.lulu.com/ubuntu-doc">
<!-- this entity controls the url for addons--><!ENTITY java-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY skype-deb "skype_1.2.0.17-1_i386.deb">
<!ENTITY skype-download "http://www.skype.com/go/getskype-linux-deb">
<!ENTITY scanmodem-gz "scanModem.gz">
<!ENTITY scanmodem-url "http://linmodems.technion.ac.il/packages/scanModem.gz">
<!ENTITY ext2fs-url "http://www.fs-driver.org/index.html">
<!ENTITY mvb-tar "mvb_1.6.tgz">
<!ENTITY mvb-url "http://www.xscd.com/pub/mvb/&mvb-tar;">
<!-- TLDP --><!ENTITY ldp-pre-install-check "http://tldp.org/HOWTO/Pre-Installation-Checklist/">
<!-- LANGUAGES (sorted by two letter code)--><!ENTITY Afar "aa">
<!ENTITY Abkhazian "ab">
<!ENTITY Afrikaans "af">
<!ENTITY Amharic "af">
<!ENTITY Arabic "ar">
<!ENTITY Assamese "as">
<!ENTITY Aymara "ay">
<!ENTITY Azerbaijani "az">
<!ENTITY Bashkir "ba">
<!ENTITY Byelorussian "be">
<!ENTITY Bulgarian "bg">
<!ENTITY Bihari "bh">
<!ENTITY Bislama "bi">
<!ENTITY Bangla "bn">
<!ENTITY Bengali "bn">
<!ENTITY Tibetan "bo">
<!ENTITY Breton "br">
<!ENTITY Catalan "ca">
<!ENTITY Corsican "co">
<!ENTITY Czech "cs">
<!ENTITY Welsh "cy">
<!ENTITY Danish "da">
<!ENTITY German "de">
<!ENTITY Bhutani "dz">
<!ENTITY Greek "el">
<!-- <!ENTITY EnglishAmerican 'en'> --><!ENTITY EnglishAmerican "C">
<!ENTITY Esperanto "eo">
<!ENTITY Spanish "es">
<!ENTITY Estonian "et">
<!ENTITY Basque "eu">
<!ENTITY Persian "fa">
<!ENTITY Finnish "fi">
<!ENTITY Fiji "fj">
<!ENTITY Faeroese "fo">
<!ENTITY French "fr">
<!ENTITY Frisian "fy">
<!ENTITY Irish "ga">
<!ENTITY Gaelic "gd">
<!ENTITY ScotsGaelic "gd">
<!ENTITY Galician "gl">
<!ENTITY Guarani "gn">
<!ENTITY Gujarati "gu">
<!ENTITY Hausa "ha">
<!ENTITY Hindi "hi">
<!ENTITY Croatian "hr">
<!ENTITY Hungarian "hu">
<!ENTITY Armenian "hy">
<!ENTITY Interlingua "ia">
<!ENTITY Interlingue "ie">
<!ENTITY Inupiak "ik">
<!ENTITY Indonesian "in">
<!ENTITY Icelandic "is">
<!ENTITY Italian "it">
<!ENTITY Hebrew "iw">
<!ENTITY Japanese "ja">
<!ENTITY Yiddish "ji">
<!ENTITY Javanese "jw">
<!ENTITY Georgian "ka">
<!ENTITY Kazakh "kk">
<!ENTITY Greenlandic "kl">
<!ENTITY Cambodian "km">
<!ENTITY Kannada "kn">
<!ENTITY Korean "ko">
<!ENTITY Kashmiri "ks">
<!ENTITY Kurdish "ku">
<!ENTITY Kirghiz "ky">
<!ENTITY Latin "la">
<!ENTITY Lingala "ln">
<!ENTITY Laothian "lo">
<!ENTITY Lithuanian "lt">
<!ENTITY Latvian "lv">
<!ENTITY Lettish "lv">
<!ENTITY Malagasy "mg">
<!ENTITY Maori "mi">
<!ENTITY Macedonian "mk">
<!ENTITY Malayalam "ml">
<!ENTITY Mongolian "mn">
<!ENTITY Moldavian "mo">
<!ENTITY Marathi "mr">
<!ENTITY Malay "ms">
<!ENTITY Maltese "mt">
<!ENTITY Burmese "my">
<!ENTITY Nauru "na">
<!ENTITY Nepali "ne">
<!ENTITY Dutch "nl">
<!ENTITY Norwegian "no">
<!ENTITY Occitan "oc">
<!ENTITY Afan "om">
<!ENTITY Oromo "om">
<!ENTITY Oriya "or">
<!ENTITY Punjabi "pa">
<!ENTITY Polish "pl">
<!ENTITY Pushto "ps">
<!ENTITY Pashto "ps">
<!ENTITY Portuguese "pt">
<!ENTITY Quechua "qu">
<!ENTITY Rhaeto-Romance "rm">
<!ENTITY Kirundi "rn">
<!ENTITY Romanian "ro">
<!ENTITY Russian "ru">
<!ENTITY Kinyarwanda "rw">
<!ENTITY Sanskrit "sa">
<!ENTITY Sindhi "sd">
<!ENTITY Sangro "sg">
<!ENTITY Serbo-Croatian "sh">
<!ENTITY Singhalese "si">
<!ENTITY Slovak "sk">
<!ENTITY Slovenian "sl">
<!ENTITY Samoan "sm">
<!ENTITY Shona "sn">
<!ENTITY Somali "so">
<!ENTITY Albanian "sq">
<!ENTITY Serbian "sr">
<!ENTITY Siswati "ss">
<!ENTITY Sesotho "st">
<!ENTITY Sudanese "su">
<!ENTITY Swedish "sv">
<!ENTITY Swahili "sw">
<!ENTITY Tamil "ta">
<!ENTITY Tegulu "te">
<!ENTITY Tajik "tg">
<!ENTITY Thai "th">
<!ENTITY Tigrinya "ti">
<!ENTITY Turkmen "tk">
<!ENTITY Tagalog "tl">
<!ENTITY Setswana "tn">
<!ENTITY Tonga "to">
<!ENTITY Turkish "tr">
<!ENTITY Tsonga "ts">
<!ENTITY Tatar "tt">
<!ENTITY Twi "tw">
<!ENTITY Ukrainian "uk">
<!ENTITY Urdu "ur">
<!ENTITY Uzbek "uz">
<!ENTITY Vietnamese "vi">
<!ENTITY Volapuk "vo">
<!ENTITY Wolof "wo">
<!ENTITY Xhosa "xh">
<!ENTITY Yoruba "yo">
<!ENTITY Chinese "zh">
<!ENTITY Zulu "zu">
<!ENTITY % gnome-menus-C SYSTEM "../../libs/gnome-menus-C.ent">
<!-- MENUS --><!-- Please keep entries alphabetical, it makes them much easier to find & use --><!ENTITY about-me "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>About-me</guimenuitem></menuchoice>">
<!ENTITY accessories "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem></menuchoice>">
<!ENTITY acro-read "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Acrobat Reader</guimenuitem></menuchoice>">
<!ENTITY administration "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem></menuchoice>">
<!ENTITY aisleriot "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>AisleRiot Solitaire</guimenuitem></menuchoice>">
<!ENTITY amule "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY anjuta-ide "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Anjuta IDE</guimenuitem></menuchoice>">
<!ENTITY archive-man "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Archive Manager</guimenuitem></menuchoice>">
<!ENTITY assistive-technology-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Assistive Technology Support</guimenuitem></menuchoice>">
<!ENTITY audacity "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Audacity</guimenuitem></menuchoice>">
<!ENTITY azureus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Azureus</guimenuitem></menuchoice>">
<!ENTITY baobab "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Disk Usage Analyzer</guimenuitem></menuchoice>">
<!ENTITY bittorrent "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Bittorrent</guimenuitem></menuchoice>">
<!ENTITY blender3d "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Blender 3d modeller</guimenuitem></menuchoice>">
<!ENTITY bluefish "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Bluefish Editor</guimenuitem></menuchoice>">
<!ENTITY boot "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Boot</guimenuitem></menuchoice>">
<!ENTITY brasero "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Brasero Disc Burning</guimenuitem></menuchoice>">
<!ENTITY bum "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Boot-up Manager</guimenuitem></menuchoice>">
<!ENTITY bzrgtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Olive bazaar Branch Manager</guimenuitem></menuchoice>">
<!ENTITY calculator "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Calculator</guimenuitem></menuchoice>">
<!ENTITY character-map "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Character Map</guimenuitem></menuchoice>">
<!ENTITY compizconfig "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>CompizConfig Settings Manager</guimenuitem></menuchoice>">
<!ENTITY computer "<menuchoice><guimenu>Places</guimenu><guimenuitem>Computer</guimenuitem></menuchoice>">
<!ENTITY connecttoserver "<menuchoice><guimenu>Places</guimenu><guimenuitem>Connect to Server...</guimenuitem></menuchoice>">
<!ENTITY cowbell "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Cowbell Music Organizer</guimenuitem>	</menuchoice>">
<!ENTITY chromium "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Chromium</guisubmenu></menuchoice>">
<!ENTITY computer-janitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guisubmenu>System Janitor</guisubmenu></menuchoice>">
<!ENTITY desktop-background "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Desktop Background</guimenuitem></menuchoice>">
<!ENTITY desktop-effects "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Appearance</guimenuitem><guimenuitem>Visual Effects</guimenuitem></menuchoice>">
<!ENTITY desktop-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem></menuchoice>">
<!ENTITY devhelp "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Devhelp</guimenuitem></menuchoice>">
<!ENTITY device-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Hardware Information</guimenuitem></menuchoice>">
<!ENTITY dictionary "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Dictionary</guimenuitem></menuchoice>">
<!ENTITY disks "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Disks</guimenuitem></menuchoice>">
<!ENTITY downloader-x "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Downloader for X</guimenuitem></menuchoice>">
<!ENTITY eclipse-ide "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Eclipse IDE</guimenuitem></menuchoice>">
<!ENTITY ekiga "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Internet</guimenuitem><guimenuitem>Ekiga Softphone</guimenuitem></menuchoice>">
<!ENTITY efax-gtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Office</guisubmenu><guimenuitem>Efax-gtk</guimenuitem></menuchoice>">
<!ENTITY etherape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Etherape</guimenuitem></menuchoice>">
<!ENTITY evolution-mail "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Evolution Mail</guimenuitem></menuchoice>">
<!ENTITY file-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>File Management</guimenuitem></menuchoice>">
<!ENTITY firefox "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Internet</guisubmenu><guimenuitem>Firefox Web Browser</guimenuitem></menuchoice>">
<!ENTITY firestarter-firewall-tool "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Firestarter</guimenuitem></menuchoice>">
<!ENTITY five-or-more "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Five or More</guimenuitem></menuchoice>">
<!ENTITY font "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Font</guimenuitem></menuchoice>">
<!ENTITY f-spot "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>F-Spot Photo Manager</guimenuitem></menuchoice>">
<!ENTITY frozen-bubble "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Frozen Bubble</guisubmenu></menuchoice> to play <application>Frozen Bubble</application>">
<!ENTITY gambas "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Gambas</guimenuitem></menuchoice>">
<!ENTITY games "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Games</guimenuitem></menuchoice>">
<!ENTITY gdesklets "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>gDesklets</guimenuitem></menuchoice>">
<!ENTITY gftp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>gFTP</guimenuitem></menuchoice>">
<!ENTITY gimp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>GIMP Image Editor</guimenuitem></menuchoice>">
<!ENTITY gnome-app-install "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Add/Remove...</guimenuitem></menuchoice>">
<!ENTITY gnome-config-editor "<screen><command>gconf-editor</command></screen>">
<!ENTITY gnome-sound-recorder "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Sound Recorder</guimenuitem></menuchoice>">
<!ENTITY gparted "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration </guisubmenu><guimenuitem>Gnome Partition Editor</guimenuitem></menuchoice>">
<!ENTITY graphics "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem></menuchoice>">
<!ENTITY gthumb "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>gThumb Image Viewer</guimenuitem></menuchoice>">
<!ENTITY gtkpod "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>gtkpod</guimenuitem></menuchoice>">
<!ENTITY gnucash "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>GnuCash Finance Management</guimenuitem></menuchoice>">
<!ENTITY gxine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>gxine</guimenuitem></menuchoice>">
<!ENTITY home-folder "<menuchoice><guimenu>Places</guimenu><guimenuitem>Home Folder</guimenuitem></menuchoice>">
<!ENTITY homebank "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>HomeBank</guimenuitem></menuchoice>">
<!ENTITY hubackup "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Backup</guimenuitem></menuchoice>">
<!ENTITY hurestore "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Restore</guimenuitem></menuchoice>">
<!ENTITY inkscape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Inkscape SVG Vector Illustrator</guimenuitem></menuchoice>">
<!ENTITY internet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem></menuchoice>">
<!ENTITY kdevelop "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>KDevelop</guimenuitem></menuchoice>">
<!ENTITY keyboard "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard</guimenuitem></menuchoice>">
<!ENTITY keyboard-shortcuts "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard Shortcuts</guimenuitem></menuchoice>">
<!ENTITY language-support "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Language Support</guimenuitem></menuchoice>">
<!ENTITY liferea "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Liferea Feed Reader</guimenuitem></menuchoice>">
<!ENTITY limewire "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>LimeWire</guimenuitem></menuchoice>">
<!ENTITY lockscreen "<menuchoice><guimenu>System</guimenu><guimenuitem>Lock Screen</guimenuitem></menuchoice>">
<!ENTITY login-screen-setup "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Login Window</guimenuitem></menuchoice>">
<!ENTITY mahjongg "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Mahjongg</guimenuitem></menuchoice>">
<!ENTITY menu-editor "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>Applications Menu Editor</guimenuitem></menuchoice>">
<!ENTITY menus-and-toolbars "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Menus &amp; Toolbars</guimenuitem></menuchoice>">
<!ENTITY monodevelop "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDevelop</guimenuitem></menuchoice>">
<!ENTITY monodoc "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDoc</guimenuitem></menuchoice>">
<!ENTITY mouse "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Mouse</guimenuitem></menuchoice>">
<!ENTITY mtink "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>mtink</guimenuitem></menuchoice>">
<!ENTITY music "<menuchoice><guimenu>Places</guimenu><guimenuitem>Music</guimenuitem></menuchoice>">
<!ENTITY multimedia-systems-selector "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Multimedia Systems Selector</guimenuitem></menuchoice>">
<!ENTITY ndisgtk "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Windows Wireless Drivers</guimenuitem></menuchoice>">
<!ENTITY network-proxy "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Network Proxy</guimenuitem></menuchoice>">
<!ENTITY network-tools "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network Tools</guimenuitem></menuchoice>">
<!ENTITY networking "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY network-servers "<menuchoice><guimenu>Places</guimenu><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY neverball "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverball</guisubmenu></menuchoice>">
<!ENTITY neverputt "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverputt</guisubmenu></menuchoice>">
<!ENTITY nexuiz "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Nexuiz</guisubmenu></menuchoice>">
<!ENTITY open-office "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem></menuchoice>">
<!ENTITY openoffice-base "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Database</guimenuitem></menuchoice>">
<!ENTITY openoffice-draw "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>OpenOffice.org Draw</guimenuitem></menuchoice>">
<!ENTITY openoffice-presentation "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Presentation</guimenuitem></menuchoice>">
<!ENTITY openoffice-spreadsheet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Spreadsheet</guimenuitem></menuchoice>">
<!ENTITY openoffice-writer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Word Processor</guimenuitem></menuchoice>">
<!ENTITY palmos-devices "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>PalmOS Devices</guimenuitem></menuchoice>">
<!ENTITY pan "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pan Newsreader</guimenuitem></menuchoice>">
<!ENTITY photoprint "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>PhotoPrint</guimenuitem></menuchoice>">
<!ENTITY pidgin "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pidgin Internet Messenger</guimenuitem></menuchoice>">
<!ENTITY power-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Power Management</guimenuitem></menuchoice>">
<!ENTITY ppracer "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Planet Penguin Racer</guisubmenu></menuchoice>">
<!ENTITY preferences "<menuchoice><guimenu>System</guimenu><guisubmenu>Preferences</guisubmenu></menuchoice>">
<!ENTITY preferred-applications "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Preferred Applications</guimenuitem></menuchoice>">
<!ENTITY print "<menuchoice><guimenu>File</guimenu><guimenuitem>Print</guimenuitem></menuchoice>">
<!ENTITY printing "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Printing</guimenuitem></menuchoice>">
<!ENTITY qtparted "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem><guimenuitem>QTParted</guimenuitem></menuchoice>">
<!ENTITY remote-desktop "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Remote Desktop</guimenuitem></menuchoice>">
<!ENTITY removable-drives-and-media "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Removable Drives and Media</guimenuitem></menuchoice>">
<!ENTITY realplayer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>RealPlayer 11</guimenuitem></menuchoice>">
<!ENTITY restricted-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Hardware Drivers</guimenuitem></menuchoice>">
<!ENTITY rhythmbox "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Rhythmbox Music Player</guimenuitem></menuchoice>">
<!ENTITY route-planner "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY scorched3d "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guimenuitem>Scorched 3D</guimenuitem></menuchoice>">
<!ENTITY screen-resolution "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screen Resolution</guimenuitem></menuchoice>">
<!ENTITY screensaver "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screensaver</guimenuitem></menuchoice>">
<!ENTITY scribus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>Scribus</guimenuitem></menuchoice>">
<!ENTITY serpentine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Serpentine Audio CD Creator</guimenuitem></menuchoice>">
<!ENTITY services "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Services</guimenuitem></menuchoice>">
<!ENTITY sessions "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sessions</guimenuitem></menuchoice>">
<!ENTITY shared-folders "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Shared Folders</guimenuitem></menuchoice>">
<!ENTITY skype "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Skype</guimenuitem></menuchoice>">
<!ENTITY software-properties "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY software-sources "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY sound "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sound</guimenuitem></menuchoice>">
<!ENTITY soundandvideo "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem></menuchoice>">
<!ENTITY soundjuicer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Audio CD Extractor</guimenuitem></menuchoice>">
<!ENTITY supertux "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>SuperTux</guisubmenu></menuchoice>">
<!ENTITY shutdown "<menuchoice><guimenu>System</guimenu><guimenuitem>Shut Down...</guimenuitem></menuchoice>">
<!ENTITY synaptic "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Synaptic Package Manager</guimenuitem></menuchoice>">
<!ENTITY system-monitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>System Monitor</guimenuitem></menuchoice>">
<!ENTITY systemtools "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem></menuchoice>">
<!ENTITY terminal "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Terminal</guimenuitem></menuchoice>">
<!ENTITY text-editor "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Text Editor</guimenuitem></menuchoice>">
<!ENTITY theme "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Theme</guimenuitem></menuchoice>">
<!ENTITY thunderbird "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Mozilla Thunderbird Mail/News</guimenuitem></menuchoice>">
<!ENTITY time-date "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Time and Date</guimenuitem></menuchoice>">
<!ENTITY totem "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Movie Player</guimenuitem></menuchoice>">
<!ENTITY touchpad "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Touchpad</guimenuitem></menuchoice>">
<!ENTITY tremulous "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Tremulous</guisubmenu></menuchoice>">
<!ENTITY ubuntu-update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Ubuntu Update Manager</guimenuitem></menuchoice>">
<!ENTITY update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Update Manager</guimenuitem></menuchoice>">
<!ENTITY users "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY users-groups "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY windows "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Windows</guimenuitem></menuchoice>">
<!ENTITY wireshark "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Wireshark</guimenuitem></menuchoice>">
<!ENTITY xchat-gnome "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Xchat-GNOME IRC Chat</guimenuitem></menuchoice>">
<!ENTITY xine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>xine</guimenuitem></menuchoice>">
<!ENTITY xmms "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>XMMS</guimenuitem></menuchoice>">
<!ENTITY xsane "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>XSane Image Scanner</guimenuitem></menuchoice>">
<!ENTITY % xinclude SYSTEM "../../libs/xinclude.mod">
<!ELEMENT xi:include (xi:fallback)?>
<!ATTLIST xi:include xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ATTLIST xi:include href CDATA #REQUIRED>
<!ATTLIST xi:include parse (xml | text) "xml">
<!ATTLIST xi:include xpointer CDATA #IMPLIED>
<!ATTLIST xi:include encoding CDATA #IMPLIED>
<!ATTLIST xi:include accept CDATA #IMPLIED>
<!ATTLIST xi:include accept-charset CDATA #IMPLIED>
<!ATTLIST xi:include accept-language CDATA #IMPLIED>
<!ELEMENT xi:fallback ANY>
<!ATTLIST xi:fallback xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ENTITY % local.preface.class "| xi:include">
<!ENTITY % local.part.class "| xi:include">
<!ENTITY % local.chapter.class "| xi:include">
<!ENTITY % local.divcomponent.mix "| xi:include">
<!ENTITY % local.para.char.mix "| xi:include">
<!ENTITY % local.info.class "| xi:include">
<!ENTITY % local.common.attrib "xmlns:xi            CDATA       #FIXED       'http://www.w3.org/2001/XInclude'">
<!ENTITY language "&EnglishAmerican;">
]>
<chapter id="security" status="review">
	<title>Segurança</title>
	<para>Segurança deve ser sempre considerada durante a instalação, distribuição, e uso de qualquer tipos de sistema computacional. Embora uma nova instalação do Ubuntu seja relativamente segura para uso imediato na Internet, é muito importante que exista um equilíbrio entre a postura de segurança do sistema e como ela será utilizada após a implantação.</para>
	<para>Este capítulo fornece uma visão geral dos temas relacionados com segurança no que diz respeito ao Ubuntu 9.04 Server Edition, e indica medidas simples que você pode utilizar para proteger o seu servidor da rede e de qualquer número de potenciais ameaças à segurança.</para>
  <sect1 id="user-management" status="review">
	<title>Gerenciamento de Usuários</title>
	<para>Gerenciamento de usuários é uma parte crítica da manutenção de um servidor seguro. Gerenciamento ineficiente de usuários e privilégios geralmente é a causa de muitos sistemas comprometidos. Por isso é importante entender como você pode proteger seu servidor através de técnicas simples e efetivas para gerenciameento de usuários.</para>
  <sect2 id="where-is-root" status="review">
	<title>Onde está o root?</title>
	<para>Os desenvolvedores do Ubuntu fizeram uma decisão consciente ao desabilitar a conta administrativa de root por padrão em todas as instalações do Ubuntu. Isso não significa que a conta de root foi removida ou que não pode ser acessada. Ela foi meramente associada a uma senha que não corresponde a nenhum valor criptografado possível, portanto não pode ser acessada diretamente por si mesma.</para>
	<para>Em vez disso, os usuários são encorajados a fazerem uso de uma ferramenta de nome <application>sudo</application> para realizarem tarefas administrativas no sistema. <application>Sudo</application> permite a um usuário autorizado elevar temporariamente seus privilégios usando sua própria senha ao invés de terem que saber a senha pertencente à conta root. Essa simples mas efetiva metodologia fornece responsabilidade a todas as ações do usuário, e dá controle administrativo granular sobre quais ações um usuário pode realizar com dados privilégios.</para>
		<itemizedlist>
		<listitem>
		<para>Se por alguma razão você desejar habilitar a conta do root, simplesmente de uma senha a ele:</para>
<screen>
<command>sudo passwd</command>
</screen>
		<para>O Sudo irá pedir sua senha, e após isso você deve fornecer uma nova senha para o root como mostrado abaixo:</para>
<screen>
<computeroutput>[sudo] senha para usuário: <userinput>(entre com sua senha)</userinput>
Digite a nova senha UNIX: <userinput>(entre com a nova senha do root)</userinput>
Redigite a nova senha UNIX: <userinput>(repita da nova senha do root)</userinput>
passwd: senha atualizada com sucesso</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Para desabilitar a conta do root, use o seguinte comando:</para>
<screen>
<command>sudo passwd -l root</command>
</screen>
		</listitem>
		<listitem>
		<para>Você deve ler mais nas man pages do <application>Sudo</application>:</para>
<screen>
<command>man sudo</command>
</screen>
		</listitem>
		</itemizedlist>
		<para>Por padrão, o usuário inicial criado pelo instalador do Ubuntu é um membro do grupo "admin" e é adicionado no arquivo <filename>/etc/sudoers</filename> como um usuário sudo autorizado. Se você desejar dar acesso ao root para outras contas através do <application>sudo</application>, simplesmente adicione a mesma ao grupo admin.</para>
  </sect2>

  <sect2 id="adding-deleting-users" status="review">
	<title>Adicionando e Removendo Usuários</title>
	<para>O processo para gerenciar usuários locais e grupos é direto e difere muito pouco da maioria dos sistemas operacionais GNU/Linux. O Ubuntu e outras distribuições baseadas no Debian, recomendam o uso do pacote "adduser" para gerência de contas.</para>
		<itemizedlist>
		<listitem>
		<para>Para adicionar uma conta de usuário, use o seguinte comando e siga as perguntas para dar à conta uma senha e características identificáveis tais como um nome completo, número de telefone, etc.</para>
<screen>
<command>sudo adduser nomedousuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para remover uma conta de usuário e seu grupo primário, use o seguinte comando:</para>
<screen>
<command>sudo deluser nomedousuario</command>
</screen>
		<para>Apagar uma conta não remove seu respectivo diretório home. Será sua opção a de apagar manualmente ou mantê-lo de acordo com as políticas de retenção desejadas.</para>
		<para>Lembre-se, qualquer usuário adicionado depois com o mesmo UID/GID do proprietário anterior terá acesso a este diretório se você não tomou as precauções necessárias.</para>
		<para>Você pode querer mudar estes UID/GID para algum valor mais apropriado, tal como a conta root, e talvez também queira mover a pasta para evitar futuros conflitos:</para>
<screen>
<command>sudo chown -R root:root /home/username/</command>
<command>sudo mkdir /home/archived_users/</command>
<command>sudo mv /home/username /home/archived_users/</command>
</screen>
		</listitem>
		<listitem>
		<para>Para habilitar ou desabilitar uma conta de usuário, use o seguinte comando, respectivamente:</para>
<screen>
<command>sudo passwd -l nome_do_usuario</command>
<command>sudo passwd -u nome_do_usuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para adicionar ou remover um grupo personalizado, use os seguintes comandos, respectivamente:</para>
<screen>
<command>sudo addgroup nome_do_grupo</command>
<command>sudo delgroup nome_do_grupo</command>
</screen>
		</listitem>
		<listitem>
		<para>Para adicionar um usuário a um grupe, use o seguinte comando:</para>
<screen>
<command>sudo adduser nomedousuario nomedogrupo</command>
</screen>
		</listitem>
		</itemizedlist>
  </sect2>

  <sect2 id="user-profile-security" status="review">
	<title>Segurança do Perfil de Usuário</title>
	<para>Quando um novo usuário é criado, o utilitário adduser cria um novo diretório home chamado de <filename class="directory">/home/username</filename>, respectivamente. O perfil padrão é modelado de acordo com o conteúdo do diretório <filename class="directory">/etc/skel</filename>, que inclui todos os perfis básicos.</para>
	<para>Se seu servidor for destinado a vários usuários, prestar bastante atenção as permissões do diretório home para assegurar a confiabilidade. Por padrão, os diretórios pessoais dos usuários no Ubuntu são criados com permissões globais de leitura/execução. Isto significa que todos os usuários podem navegar e acessar os conteúdos do diretório de outro usuário. Isto pode não ser adequado para seu ambiente.</para>
		<itemizedlist>
		<listitem>
		<para>Para verificar as permissões do diretório home dos usuários, use a seguinte sintaxe:</para>
<screen>
<command>ls -ld /home/nomedousuario</command>
</screen>
		<para>A seguinte saída mostra que o diretório <filename class="directory">/home/nomedousuario</filename> tem permissões globais de leitura:</para>
<screen>
<computeroutput>drwxr-xr-x  2 nomedousuario nomedousuario  4096 2007-10-02 20:03 nomedousuario</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Você pode remover a permissão de leitura mundial usando a seguinte sintaxe:</para>
<screen>
<command>sudo chmod 0750 /home/nomedousuario</command>
</screen>
		<note>
		<para>Algumas pessoas tendem a usar a opção recursiva (-R), que modifica indiscriminadamente todas as sub pastas e arquivos, mas isso não é necessário, e pode produzir outros resultados indesejáveis. A pasta principal sozinha é suficiente para impedir o acesso não autorizado a qualquer coisa abaixo dela.</para>
		</note>
		<para>Uma abordagem mais eficiente para a questão seria a de modificar a <application>adduser</application> permissão global quando criar a pasta pessoal. Basta editar o arquivo <filename>/etc/adduser.conf</filename> e modificar o <varname>DIR_MODE</varname> variável para algo apropriado, assim todas as pastas pessoais vão receber o permissões corretas.</para>
<programlisting>
DIR_MODE=0750
</programlisting>
		</listitem>
		<listitem>
		<para>Depois de corrigir as permissões do diretório usando qualquer das técnicas mencionadas anteriormente, verifique os resultados usando a seguinte sintaxe:</para>
<screen>
<command>ls -ld /home/nomedousuario</command>
</screen>
		<para>Os resultados abaixo mostram que as permissões globais de leitura foram removidas:</para>
<screen>
<computeroutput>drwxr-x---   2 nomedousuario nomedousuario 4096 2007-10-02 20:03 nomedousuario</computeroutput>
</screen>
		</listitem>
		</itemizedlist>
  </sect2>

  <sect2 id="password-policy" status="review">
	<title>Política de Senhas</title>
	<para>Uma Política de senha forte é um dos aspectos mais importantes para sua segurança. Muitas violações de seguranças de sucesso envolve simples força bruta e ataques de dicionário contra senhas fracas. Se você tem intenção de oferecer qualquer forma de acesso remoto envolvendo sua senha do sistema local, certifique-se dos requisitos mínimos da complexidade da senha, vida útil máxima da senha, e freqüência de do seu sistema de autenticação.</para>
  <sect3 id="minimum-password-length" status="review">
	<title>Tamanho Mínimo de Senha</title>
	<para>Por padrão, o Ubuntu exige um tamanho mínimo de senha de 4 caracteres, assim como algumas checagens básicas de entropia. Estes valores estão controlados no arquivo <filename>/etc/pam.d/common-password</filename>, que são esboçadas abaixo.</para>
<programlisting>
senha requerida   pam_unix.so nullok obscure min=4 max=8 md5
</programlisting>
	<para>Se você deseja ajustar o tamanho mínimo para 6 caracteres, mude a variável apropriada para min=6. A modificação está esboçada abaixo.</para>
<programlisting>
senha requerida   pam_unix.so nullok obscure min=6 max=8 md5
</programlisting>
	<note>
	<para>A variável <varname>max=8</varname> não representa o tamanho máximo de uma senha. Ela apenas significa que não serão checados os requisitos de complexidade em senha com mais de 8 caracteres. Você deve olhar no pacote <application>libpam-cracklib</application> para uma assistência adicional sobre entropia de senhas.</para>
	</note>
  </sect3>
  <sect3 id="password-expiration" status="review">
	<title>Expiração de Senha</title>
	<para>Quando criar contas de usuário, você deve fazer uma política de tempo mínimo e máximo de senha para força-los a trocar quando elas expirarem.</para>
		<itemizedlist>
		<listitem>
		<para>Para ver o status de uma conta de usuário facilmente, use o seguinte comando:</para>
<screen>
<command>sudo chage -l nomedousuario</command>
</screen>
		<para>A saída abaixo mostra alguns fatos interessantes sobre a conta de usuário, com a premissa de que não há políticas aplicadas:</para>
<screen>
<computeroutput>Ultima mudança de senha : Jan 20, 2008
Senha Expira : nunca
Senha Inativa : nunca
Conta Expira : nunca
Mínimo de dias para mudar a senha : 0
Máximo de dias para muda a senha : 99999
Número de dias de aviso antes da senha expirar : 7</computeroutput>
</screen>
		</listitem>
		<listitem>
		<para>Para setar alguns desses valores, simplesmente use a sintaxe seguinte e responda às perguntas interativas:</para>
<screen>
<command>sudo chage nomedousuario</command>
</screen>
		<para>O exemplo a seguir mostra como você pode mudar a data de expiração explicitamente (-E) para 01/31/2008, idade mínima da senha (-m) para 5 dias, idade máxima da senha (-M) para 90 dias, período de inatividade (-I) de 5 dias após a expiração da senha, e um período de aviso (-W) de 14 dias antes da expiração da senha.</para>
<screen>
<command>sudo chage -E 01/31/2008 -m 5 -M 90 -I 30 -W 14 nomedousuario</command>
</screen>
		</listitem>
		<listitem>
		<para>Para verficar as mudanças, use o mesmo comando, como mencionado anteriormente.</para>
<screen>
<command>sudo chage -l nomedousuario</command>
</screen>
		<para>A saída abaixo mostra as novas políticas que foram estabelecidas para a conta:</para>
<screen>
<computeroutput>Última alteração de senha : Jan 20, 2008
Senha expira em : Abr 19, 2008
Senha inativa : Mai 19, 2008
Account expires : Jan 31, 2008
Número mínimo de dias entre mudanças de senha : 5
Número máximo de dias entre mudanças de senha : 90
Número de dias para aviso antes da expiração da senha : 14</computeroutput>
</screen>
		</listitem>
		</itemizedlist>
  </sect3>

  </sect2>


  <sect2 id="other-security-considerations" status="review">
	<title>Outras Considerações de Segurança</title>
	<para>Várias aplicações utilizam mecanismos alternativos de autenticação que podem facilmente ser encontrados por administradores de sistemas experientes. Sendo assim, é importante entender e controlar como os usuários se autenticam e  tem acesso a serviços e aplicações no seu servidor.</para>

  <sect3 id="ssh-access-by-disabled-users" status="review">
	<title>Acesso SSH por usuários desabilitados</title>
	<para>Apenas desabilitar/bloquear uma conta de usuário não irá prevenir que um usuário se conecte ao seu servidor remotamente se ele tiver configurado previamente um chave de autenticação pública RSA. Eles continuarão podendo ter acesso ao servidor, sem a necessidade de nenhuma senha. Lembre de checar o diretório pessoal do usuário por arquivos que permitirá este tipo de acesso com autenticação SSH. ex. <filename>/home/nome_do_usuário/.ssh/authorized_keys<filename>.</filename></filename></para>
	<para>Remova ou renomeie o diretório <filename class="directory">.ssh/</filename> localizado na pasta home do usuário para previnir futuras autenticações SSH.</para>
	<para>Certifique-se de checar qualquer conexão baseado no SSH por usuários incapacitados, como isto é possível eles podem ter conexões de entrada ou saída existentes. Feche qualquer uma encontrada.</para>
	<para>Acesso SSH restrito apenas para contas de usuários que devem ter isso. Por exemplo, você pode cirar um grupo chamado "sshlogin" e adicionar ao nome</para>
<programlisting>
AllowGroups sshlogin
</programlisting>
	<para>Então adicione seus usuários SSH permitidos ao grupo "sshlogin", e reinicie o serviço SSH.</para>
<screen>
<command>sudo adduser nome_de_usuário sshlogin</command>
<command>sudo /etc/init.d/ssh restart</command>
</screen>
  </sect3>
  <sect3 id="external-db-auth" status="review">
	<title>Base de dados de Autenticação de Usuário Externo</title>
	<para>A maioria de redes de empresas requerem autenticação centralizada e controle de acesso para todos os recursos do sistema. Se você configurou seu servidor para autenticar usuários com bases de dados externas, certifique-se de desabilitar a conta do usuário localmente e externamente, desta forma você assegura-se de que a autenticação local não será possível.</para>
  </sect3>
  </sect2>
  </sect1>


   <sect1 id="console-security" status="review">
	<title>Console de Segurança</title>
	<para>Como qualquer outra barreira de segurança que você coloque no seu servidor, é considerável defender-se de danos não previstos causados por alguém com acesso físico ao seu ambiente, por exemplo, roubo de discos rígidos, força ou serviços de interrupção e assim por diante. Então, a segurança do console deve ser atribuída a um componente da sua estratégia de segurança física. Uma "porta de tela" trancada pode deter um criminoso casual, ou no mínimo atrasar um determinado criminoso, então é aconselhável tomar precauções básicas considerando a segurança do console.</para>
	<para>As seguintes instruções ajudarão a defender seu servidor de problemas que poderiam de alguma maneira resultar em conseqüências muito sérias.</para>

   <sect2 id="disable-ctrl-alt-delete" status="review">
	<title>Desativar Ctrl+Alt+Delete</title>
	<para>Primeiro e principalmente, qualquer um que possua acesso físico ao teclado pode simplesmente utilizar a combinação de teclas <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Delete</keycap></keycombo> para reiniciar o sistema sem a necessidade de se logar. Certamente, alguem pode simplesmente remover o cabo de força, mas você ainda poderá se prevenir deste tipo de combinação de telcas em um servidor de produção. Isto forçará um intruso a tomar medidas mais drásticas para reiniciar o servidor, e ao mesmo tempo irá prevenir reinicializações acidentais.</para>
		<itemizedlist>
	  	<listitem>
		<para>Para desabilitar a ação de reinicialialização ao pressionar a combinação de telcas <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Delete</keycap></keycombo>, remova o comentário da seguinte linha no arquivo <filename>/etc/event.d/control-alt-delete</filename>.</para>
<programlisting>
#exec /sbin/shutdown -r now "Control-Alt-Delete pressionado"
</programlisting>
		</listitem>
		</itemizedlist>
   </sect2>
   <sect2 id="grub-password-security" status="review">
	<title>Senha de Segurança do GRUB</title>
	<para>O Ubuntu instala por padrão o boot loader GNU GRUB, o qual permite uma grande flexibilidade e opções de recuperação. Por exemplo, quando você instala imagens do kernel adicionais, estes são adicionados automaticamente como disponíveis no menu de opções de boot do <application>grub</application>. Também, por padrão, opções de boot alternativas estarão disponíveis para cada entrada de kernel que poderá ser usado para a recuperação do sistema, competentemente nomeada (modo de recuperação). O modo de recuperação simplesmente inicia a imagem do kernel correspondente em modo de usuário único (init 1), que posiciona o administrador no prompt como root sem a necessidade de nenhuma senha.</para>
	<para>Sendo assim, é importante controlar quem poderá editar os itens de menu do <application>grub</application>, que poderá, no entanto, permitir que alguem execute as seguintes ações perigosas:</para> 
		<itemizedlist>
	  	<listitem>
	  	<para>Passar opções de kernel na inicialização</para>
	  	</listitem>
		<listitem>
		<para>Iniciar o servidor no modo mono usuário.</para>
		</listitem>
		</itemizedlist>
	<para>Você pode prevenir estas ameaças adicionando uma senha à configuração do GRUB, em <filename>/boot/grub/menu.lst</filename>, que será necessária para desbloquear as mais avançadas funções do GRUB antes do seu uso.</para>
		<itemizedlist>
	  	<listitem>
	  	<para>Para adicionar uma senha a ser usada pelo <application>grub</application>, primeiro você deve gerar uma senha md5 hash utilizando o utilitário <application>grub-md5-crypt</application>.</para>
<screen>
<command>grub-md5-crypt</command>
</screen>
		<para>O comando irá pedir a você para entrar com a senha e oferecer um valor de resultado rebrado como como pode-se ver abaixo:</para>
<screen>
<computeroutput>Senha: <userinput>(digite a nova senha)</userinput>
Reescreva a senha: <userinput>(repetir a senha)</userinput>
$1$s3YiK$M3lxAbqA6JLm2FbDWnClQ0</computeroutput>
</screen>
	  	</listitem>
	  	<listitem>
		<para>Adicione o valor do erro grave resultante para o arquivo <filename>/boot/grub/menu.lst</filename> no seguinte formato:</para>
<programlisting>senha --md5 $1$s3YiK$M3lxAbqA6JLm2FbDWnClQ0</programlisting>
	  	</listitem>
	  	<listitem>
	  	<para>Para requerer a utilização da senha para entrar no modo de usuário único, altere o valor da variável varname&gt;lockalternative</para>
<programlisting># lockalternative=true</programlisting>
		</listitem>
		</itemizedlist>
	<note>
	<para>Isto não previne que alguem inicie o servidor com uma mídia alternativa. Um atacante determinado poderia simplesmente iniciar a partir de um ambiente alternativo, sobrescrever seu registro principal de boot (MBR), montar ou copiar volumes físicos, destruir seus dados, ou qualquer outra coisa que ele imagine. Por favor, explore outros meios que possam ajuda-lo a prevenir estes tipos de ataque.</para>
	</note>
   </sect2>
   </sect1>

	<sect1 id="firewall" status="review">
	  <title>Firewall</title>
        <sect2 id="firewall-introduction" status="review">
          <title>Introdução</title>
          <para>O kernel Linux inclui o subsistema <emphasis>Netfilter</emphasis>, o qual é usado para manipular ou decidir o destino do tráfego de rede dirigido para ou através de seu servidor. Todas as soluções de firewall Linux modernas utilizam esse sistema para filtragem de pacotes.</para>
            <para>O sistema de filtragem de pacotes do kernel tem pouca utilidade para os administradores sem uma interface para gerenciá-la. Este é o propósito do iptables. Quando um pacote chega ao servidor, ele será encaminhado ao subsistema Netfilter para aceitação, manipulação ou rejeição, baseado numa das regras supridas pela interface via iptables. Então, o iptables é tudo que você precisa para gerenciar o seu firewall, caso você tenha familiaridade com ele, mas existem diversos front ends (interfaces de frente) para simplificar a tarefa.</para>
        </sect2>
          <sect2 id="firewall-ufw" status="review">
	    <title>ufw - Firewall Descomplicado</title>  
	    <para>A ferramenta de configuração de firewall no Ubuntu é o <application>ufw</application>. Desenvolvido para facilitar a configuração do firewall com iptables, <application>ufw</application> provê uma maneira amigável de criar um firewall em máquinas baseadas em IPv4 ou IPv6.</para>
	    <para>Por padrão o application&gt;ufw</para>
	    <para>
<quote>ufw não tem a intenção de provê uma funcionalidade completa de firewall através da sua interface de comando, mas no entanto fornece uma maneira fácil de adicionar e remover regras simples. Atualmente ele é utilizado para firewalls baseados em máquinas.</quote>
	    </para>
	    <para>Alguns exemplos de como usar o <application>ufw</application>:</para> 
	    <itemizedlist>
              <listitem>
                <para>Primeiramente, o <application>ufw</application> precisa ser habilitado. No terminal digite:</para>
<screen>
<command>sudo ufw enable</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para abrir uma porta (ssh neste exemplo):</para>
<screen>
<command>sudo ufw allow 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>Regras também podem ser acionadas usando um formato <emphasis>numerado</emphasis>:</para>
<screen>
<command>sudo ufw insert 1 allow 80</command>
</screen>
	      </listitem>
              <listitem>
                <para>Similarmente, para fechar uma porta aberta:</para>
<screen>
<command>sudo ufw deny 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para remover uma regra, use delete seguido pela regra:</para>
<screen>
<command>sudo ufw delete deny 22</command>
</screen>
	      </listitem>
              <listitem>
                <para>É também possível permitir acesso de hosts e redes específicas em uma porta. O seguinte exemplo permite acesso ssh do host 192.168.0.0 para qualquer endereço IP neste host.</para>
<screen>
<command>sudo ufw allow proto tcp from 192.168.0.2 to any port 22</command>
</screen>
	        <para>Substitua 192.168.0.2 para 192.168.0.0/24 para permitir acesso ssh para a subrede inteira.</para>
	      </listitem>
              <listitem>

                <para>Adicionando a opção <emphasis>--dry-run</emphasis> em um <emphasis>ufw</emphasis> commando , terá como saída o resultado das regras, mas não apliquem elas. O exemplo seguinte seria aplicado ao abrir uma porta HTTP :</para>

<screen>
<command>sudo ufw --dry-run allow http</command>
</screen>

<screen>
<computeroutput>*filter
:ufw-user-input - [0:0]
:ufw-user-output - [0:0]
:ufw-user-forward - [0:0]
:ufw-user-limit - [0:0]
:ufw-user-limit-accept - [0:0]
### RULES ###

### tuple ### allow tcp 80 0.0.0.0/0 any 0.0.0.0/0
-A ufw-user-input -p tcp --dport 80 -j ACCEPT

### END RULES ###
-A ufw-user-input -j RETURN
-A ufw-user-output -j RETURN
-A ufw-user-forward -j RETURN
-A ufw-user-limit -m limit --limit 3/minute -j LOG --log-prefix "[UFW LIMIT]: "
-A ufw-user-limit -j REJECT
-A ufw-user-limit-accept -j ACCEPT
COMMIT
Rules updated</computeroutput>
</screen>

              </listitem>
              <listitem>
                <para><application>ufw</application> pode ser desabilitado por:</para>
<screen>
<command>sudo ufw disable</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para ver o status do firewall, digite:</para>
<screen>
<command>sudo ufw status</command>
</screen>
	      </listitem>
              <listitem>
                <para>E para maiores informações de status use:</para>
<screen>
<command>sudo ufw status verbose</command>
</screen>
	      </listitem>
              <listitem>
                <para>Para visualizar o formato <emphasis>numerado</emphasis>:</para>
<screen>
<command>sudo ufw status numbered</command>
</screen>
	      </listitem>
	    </itemizedlist>
	    <note>
	      <para>Se a porta que você deseja abrir ou fechar estiver definida no <filename>/etc/services</filename>, você poderá utilizar o nome da porta ao invés do número. Nos exemplos acima, altere <emphasis>22</emphasis> por <emphasis>ssh</emphasis>.</para>
	    </note>

  	    <para>Este é um guia introdutório ao <application>ufw</application>. Por favor veja a man page do <application>ufw</application> para maiores informações.</para>

            <sect3 id="ufw-application-integration" status="review">
              <title>ufw Integração de Aplicativos</title>

              <para>Os aplicativos que podem abrir portas incluem um <application>ufw perfil, que detalha as portas necess/etc/ufw/ applications.d, e pode ser editado, se as portas padr</application></para>

              <itemizedlist>
                <listitem>

                  <para>Para ver quais as aplicações instaladas têm um perfil, digite o seguinte em um terminal:</para>

<screen>
<command>sudo ufw app list</command>
</screen>

                </listitem>
                <listitem>

                  <para>Similar ao que permite o tráfego de uma porta, utilizando uma aplicação o perfil é realizado através da entrada:</para>

<screen>
<command>sudo ufw allow Samba</command>
</screen>

                </listitem>
                <listitem>

                  <para>Uma sintaxe extendida está disponível também:</para>

<screen>
<command>ufw allow from 192.168.0.0/24 to any app Samba</command>
</screen>

                  <para>Substituir o <emphasis>Samba</emphasis> e <emphasis>192.168.0.0/24</emphasis> com a aplicação e o perfil que você está utilizando no intervalo de IP para sua rede.</para>

                  <note>
                    <para>Não é necessário espeficicar o <emphasis>protocolo</emphasis> para a aplicação, por que essa informação é detalhada no perfil. Além do que, note que o nome da <emphasis>aplicação</emphasis> é recolocado no número da <emphasis>porta</emphasis>.</para>
                  </note>

                </listitem>
                <listitem>

                  <para>Para visualizar os detalhes sobre quais portas, protocolos, etc estão definidos por um aplicativo, digite:</para>

<screen>
<command>sudo ufw app info Samba</command>
</screen>

                </listitem>
              </itemizedlist>

              <para>Nem todas as aplicações que requerem abertura de porta de rede vêm com perfis <application>ufw</application>, mas se você tiver um aplicativo perfilado e deseja que o arquivo seja incluído no pacote, por favor arquive um bug contra o pacote em <ulink url="https://launchpad.net/">Launchpad</ulink>.</para>

            </sect3>
	  </sect2>
        <sect2 id="ip-masquerading" status="review">
          <title>Mascaramento de IP</title>
            <para>O propósito da Máscara de IP é permitir máquinas com IP privado, endereço não-roteável em sua rede para acessar a Internet por meio da máquina "mascarada". O tráfico destinado de sua rede privada para a Internet deve ser manipulado para obter respostas da máquina que fez a petição, como em uma rota invertida. Para fazer isto, o kernel deve modificar o endereço IP da <emphasis>fonte</emphasis> de cada pacote e retornar respostas a ele, antes que o endereço privado IP faço o pedido de resposta, que é impossível através da Internet. O Linux usa <emphasis>Connection Tracking</emphasis> (conntrack) para acompanhar que conexões pertence a que máquinas e desviar cada pacote de retorno correspondente. O tráfico originado em sua rede privada é assim "mascarado" como tendo originado de seu gateway Ubuntu. Este processo possui referência na documentação da Microsoft como Conexão de Internet Compartilha.</para>
	    <sect3 id="ip-masquerade-ufw" status="review">
	      <title>ufw Masquerading</title>
	      <para>Mascaramento de IP pode ser obtido utilizando regras de <application>ufw</application> customizadas. Isto é possível devido ao back-end atual para o <application>ufw</application> ser <application>iptables-restore</application> com os arquivos de regras localizados em <filename>/etc/ufw/*.rules</filename>. Estes arquivos são um ótimo lugar para adicionar regras legadas do iptables utilizadas sem o <application>ufw</application>, e regras que são mais relacionadas com redes gateway ou bridge.</para>
	      <para>As regras são divididas em dois arquivos diferentes, regras que devem ser executadas antes das regras de linha de comando do <application>ufw</application> e regras que devem ser executadas após a linha de comando do <application>ufw</application>.</para>
	      <itemizedlist>
	        <listitem>
		  <para>Primeiramente, o repasse de pacotes (packet forwarding) precisa estar habilitado no <application>ufw</application>.  Dois arquivos de configuração precisão ser ajustados, em <filename>/etc/default/ufw</filename> altere o <emphasis>DEFAULT_FORWARD_POLICY</emphasis> para <quote>ACCEPT</quote>:</para>
<programlisting>
DEFAULT_FORWARD_POLICY="ACCEPT"
</programlisting>
		  <para>Então edite <filename>/etc/ufw/sysctl.conf</filename> e remova o comentário:</para>
<programlisting>
net.ipv4.ip_forward=1
</programlisting>
		  <para>Semelhantimente, para IPv6 adiantar não comentados</para>
<programlisting>
net.ipv6.conf.default.forwarding=1
</programlisting>
		</listitem>
	        <listitem>
		  <para>Agora iremos adicionar regras para o arquivo <filename>/etc/ufw/before.rules</filename>. A regra padrão apenas configura a tabela <emphasis>filter</emphasis>, e para habilitar mascaramento a tabela <emphasis>nat</emphasis> precisará ser configurada. Adicione o seguinte no topo do arquivo logo após os comentários do cabeçalho:</para>
<programlisting>
# nat Table rules
*nat
:POSTROUTING ACCEPT [0:0]

# Forward traffic from eth1 through eth0.
-A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE

# don't delete the 'COMMIT' line or these nat table rules won't be processed
COMMIT
</programlisting>
	          <para>Os comentários não são estritamente necessários, mas é considerada uma boa pratica documentar sua configuração. Além disso, quando modificar qualquer um dos arquivos de  <emphasis>regras</emphasis> em <filename class="directory">/etc/ufw</filename>, assegure-se que estas linhas seja a ultima linha para cada tabela modificada:</para>

<programlisting>
# Não apague a linha 'COMMIT' ou estas regras não serão processadas
COMMIT
</programlisting>

                  <para>Para cada <emphasis>Tabela</emphasis> um correspondente <emphasis>COMMIT</emphasis> inicial e requerido. Nestes examplos somente o <emphasis>nat</emphasis> e <emphasis>filter</emphasis> tabelas são mostradas, mas você pode além disso adicionar regras para as tabelas <emphasis>raw</emphasis> e <emphasis>mangle</emphasis> .</para>

                  <note>
                   <para>No exemplo acima substituir <emphasis>eth0</emphasis>, <emphasis>eth1</emphasis>, e <emphasis>192.168.0.0/24</emphasis> com as interfaces adequadas e intervalo IP para sua a rede.</para>
                  </note>

		</listitem>
	        <listitem>
		  <para>Finalmente, desative e reative o <application>ufw</application> para aplicar as mundanças:</para>
<programlisting>
<command>sudo ufw disable &amp;&amp; sudo ufw enable</command>
</programlisting>
		</listitem>
	      </itemizedlist>
	      <para>O mascaramento IP agora pode ser habilitado. Você pode também adicionar regras FORWARD adicionais para o <filename>/etc/ufw/before.rules</filename>. É recomendado que estas regras adicionais seja adicionada para a cadeia<emphasis>ufw-before-forward</emphasis>.</para>
	  </sect3>
	    <sect3 id="ip-masquerading-iptables" status="review">
	    <title>iptables Masquerading</title>
	    <para><application>iptables</application> Podem também serem usadas para habilitar masquerading.</para>
	    <itemizedlist>
	      <listitem>
  	        <para>Similar ao <application>ufw</application>, o primeiro passo é habilitar o repasse de pacotes IPv4 editando o arquivo <filename>/etc/sysctl.conf</filename> e removendo o comentário da seguinte linha</para>
<programlisting>
net.ipv4.ip_forward=1
</programlisting>
	        <para>Se você optar por habilitar IPv6 forwarding então descomente:</para>
<programlisting>
net.ipv6.conf.default.forwarding=1
</programlisting>
 	      </listitem>
	        <listitem>
		  <para>Seguinte, execute o comando<application>sysctl</application> para habilitar novas configurações no arquivo de configuração:</para>
<screen>
<command>sudo sysctl -p</command>
</screen>
		</listitem>
	      <listitem>
	        <para>IP Masquerading pode agora ser finalizado com uma única regra iptables, a qual pode diferenciar-se um pouco baseado na sua configração de network:</para>
<screen>
sudo iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</screen>
	        <para>O comando acima assume que o seu espaço de endereço privado é  192.168.0.0/16 e que o dispositivo de acesso a in ternet é ppp0.</para>
		<itemizedlist>
		  <listitem><para>-t nat -- a regra é para ir na tabela nat</para></listitem>
		  <listitem><para>-A POSTROUTING -- a regra é para ser adicionada (-A) à corrente POSTROUTING</para></listitem>
  		  <listitem><para>-s 192.168.0.0/16 -- a regra é aplicada a trafego originando do endereço especificado</para></listitem>
  		  <listitem><para>-o ppp0 -- a regra é aplicada a trafego agendado para ser roteado pelo dispositivo de rede especificado</para></listitem>
  		  <listitem>
                    <para>-j MASQUERADE -- trafego combinando com esta regra "pulará" (-j) para o alvo MASQUERADE para ser manipulado como descrito acima</para>
                  </listitem>
	        </itemizedlist>
	      </listitem>
	      <listitem>
		<para>Também, cada cadeia na tabela filter (a tabela padrão, e onde ocorre a maioria ou todos filtros os pacotes) possui uma <emphasis>política</emphasis> padrão de ACCEPT, mas se você está criando um firewall para complementar um dispositivo de gateway, você deve configurar as políticas DROP ou REJECT, em qual caso seu tráfico mascarado precisa ser permitido através da cadeia FORWARD para que a regra acima funcione:</para>
<screen>
sudo iptables -A FORWARD -s 192.168.0.0/16 -o ppp0 -j ACCEPT
sudo iptables -A FORWARD -d 192.168.0.0/16 -m state --state ESTABLISHED,RELATED -i ppp0 -j ACCEPT
</screen>
		<para>O comando acima irá permitir que todas as conexões de sua rede local para a internet e todo tráfego relacionado a estas conexões retornem para as máquinas que as iniciaram.</para>
	      </listitem>
	      <listitem>
		<para>Se você quuizer o mascaramento esteja habilitado ao reiniciar, o que você provavelmente quer, edite <filename>/etc/rc.local</filename> e adicione qualquer um dos comandos acima. Por exemplo adicione o primeiro comando sem nenhum filtro:</para>
<screen>
iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</screen>
	      </listitem>
	    </itemizedlist>
	    </sect3>
        </sect2>
        <sect2 id="firewall-logs" status="review">
          <title>Logs</title>
            <para>Logs do Firewall são essenciais para reconhecer ataques, identificar regras do seu firewall, e notar atividades incomuns nas sua rede. Você deve incluir regras de logs no seu firewall para que elas sejam geradas, considerar, as regras de log devem vir antes de qualquer regra de terminação aplicável ( uma regra com alvo que decide a sorte do pacote, como ACCEPT, DROP ou REJECT).</para>
	     <para>Se você estiver usando o <application>ufw</application>, você pode ligar o log digitando o seguinte no terminal:</para>
<screen>
<command>sudo ufw logging on</command>
</screen>
	     <para>Para desligar o log no <application>ufw</application>, simplesmente substitua <emphasis role="italic">on</emphasis> por <emphasis role="italic">off</emphasis> no comando acima.</para>
	     <para>Se estiver usando <application>iptables</application> ao invés do <application>ufw</application>, digite:</para>
<screen>
sudo iptables -A INPUT -m state --state NEW -p tcp --dport 80 -j LOG --log-prefix "NEW_HTTP_CONN: "
</screen>
	     <para>Um requisição na porta 80 da máquina local, então, poderá gerar um log no dmes parecido com isto:</para>
			<para>
			  <programlisting>[4304885.870000] NEW_HTTP_CONN: IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=58288 DF PROTO=TCP SPT=53981 DPT=80 WINDOW=32767 RES=0x00 SYN URGP=0</programlisting>
			</para>
			<para>O registro acima é publicado em <filename>/var/log/messages</filename>, <filename>/var/log/syslog</filename>, e <filename>/var/log/kern.log</filename>. Estes procedimentos podem ser alterado modificando o <filename>/etc/syslog.conf</filename> ou instalando e configurando o <application>ulogd</application> e, assim, usar o ULOG como alvo ao invés do LOG (registro). O daemon <application>ulogd</application> é um servidor userspace que observa o sistema para registrar instruções específicas do kernel para firewalls e registrar qualquer arquivo que você queira, igual aos bancos de dados <application>PostgreSQL</application> e <application>MySQL</application>. O registro das ações do firewall pode ser simplificada usando uma ferramenta para análise de registros, como o <application>fwanalog</application>, <application> fwlogwatch</application>, ou <application>lire</application>.</para>
        </sect2>	
        <sect2 id="other-firewall-tools" status="review">
          <title>Outras Ferramentas</title>
            <para>Existem várias ferramentas que podem ajuda-lo a construir um firewall completo sem um conhecimento íntimo de iptables. Para Interface Gráfica:</para>
	    <itemizedlist>
	      <listitem>
		<para><ulink url="http://www.fs-security.com/">Firestarter</ulink> é muito popular e fácil de usar.</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://www.fwbuilder.org/">fwbuilder</ulink> é muito poderoso e irá parecer familiar para o administrador que tenha utilizado um utilitário de firewall comercial como o <application>Checkpoint FireWall-1</application>.</para>
	      </listitem>
	    </itemizedlist>
	    <para>Se você preferir uma ferramenta linha de comando, com arquivos de configuração modo texto:</para>
	    <itemizedlist>
	      <listitem>
		<para><ulink url="http://www.shorewall.net/">Shorewall</ulink> é uma solução muito poderosa que ajuda a configurar um firewall avançado para qualquer rede.</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://www.linuxkungfu.org/">ipkungfu</ulink> pode fornecer um firewall funcional "out of the box" com configuração zero, e irá permitir facilmente uma configuração de firewall mais avançada simplesmente editando, arquivos de configuração bem documentoados</para>
	      </listitem>
	      <listitem>
		<para><ulink url="http://fireflier.sourceforge.net/">fireflier</ulink> é desenvolvido para ser uma aplicalção firewall para desktop. Ele  é composto de um servidor (fireflier-server) e sua escolha de clientes gráficos (GTK or QT), e se comporta como várias aplicações de firewall populares e interativas para Windows.</para>
	      </listitem>
	    </itemizedlist>
        </sect2>
	<sect2 id="firewall-references" status="review">
	  <title>Referências</title>
	  <itemizedlist>
	    <listitem>
	      <para>O wiki do <ulink url="https://wiki.ubuntu.com/UbuntuFirewall">Ubuntu Firewall</ulink> contém informações sobre o desenvolvimento do <application>ufw</application>.</para>
	    </listitem> 
	    <listitem>
	      <para>Além disso, a página de manual do <application>ufw</application> contém algumas informações muito úteis: <command>man ufw</command>.</para>
	    </listitem> 
	    <listitem>
	      <para>Veja <ulink url="http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html">packet-filtering-HOWTO</ulink> para mais informações sobre como usar o <application>iptables</application>.</para>
	    </listitem> 
	    <listitem>
	      <para>O <ulink url="http://www.netfilter.org/documentation/HOWTO/NAT-HOWTO.html">nat-HOWTO</ulink> contém mais detalhes sobre mascaramento.</para>
	    </listitem> 
	  </itemizedlist>
	</sect2>
	</sect1>
	<sect1 id="apparmor" status="review">
	  <title>AppArmor</title>
	  <para><application>AppArmor</application> é uma implementação do Módulo de Segurança do Linux do controle de acesso obrigatório baseado em nomes. AppArmor confina programas individuais para um grupo de arquivos e capacidade do posix 1003.1e.</para>
	  <para>O <application>AppArmor</application> é instalado e carregado por padrao. Ele usa <emphasis>perfis</emphasis> de uma aplicação para determinar quais arquivos e permissões a aplicaão necessita. Alguns pacotes irão instalar seus própris perfis, e perfis adicionais podem ser encontrados no pacote <application>apparmor-profiles</application>.</para>
	  <para>Para instalar o pacote <application>apparmor-profiles</application> a partir do terminal:</para>
<screen>
<command>sudo apt-get install apparmor-profiles</command>
</screen>
	  <para>Perfis do AppArmor possuem dois modos de execução:</para>
	  <itemizedlist>
	    <listitem>
	      <para>Reclamando/Aprendendo: violações do perfil são permitidas e anotadas. Útil para teste e desenvolvimento de novos perfis</para>
	    </listitem>
	    <listitem>
	      <para>Reforçado/Confinado: reforça a política do perfil como também a anotação das violação.</para>
	    </listitem>
	  </itemizedlist>
	  <sect2 id="apparmor-usage" status="review">
	    <title>Usando AppArmor</title>
	    <para>O pacote <application>apparmor-utils</application> contém utilitários da linha de comando que podem ser usado para mudar  o modo de execução do <application>AppArmor</application>, encontrar o estado de um perfil, criar novos perfis, etc.</para>
	    <itemizedlist>
	      <listitem>
	    	<para><application>apparmor_status</application> é usado para ver o estado atual dos perfis do AppArmor.</para>
<screen>
<command>sudo apparmor_status</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>aa-complain</application> coloca um perfil no modo <emphasis>complain</emphasis>.</para>
<screen>
<command>sudo aa-complain /path/to/bin</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>aa-enforce</application> coloca um perfil no modo <emphasis>enforce</emphasis>.</para>
<screen>
<command>sudo aa-enforce /path/to/bin</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para>O diretório <filename>/etc/apparmor.d</filename> é onde os perfis do AppArmor estão localizados. Ele pode ser utilizado para manipular o <emphasis>modo</emphasis> de todos os perfis.</para>
	    	<para>Digite o seguinte para colocar todos os perfis no modo complain:</para>
<screen>
<command>sudo aa-complain /etc/apparmor.d/*</command>
</screen>
	    <para>Para colocar todos os perfis no modo enforce:</para>
<screen>
<command>sudo aa-enforce /etc/apparmor.d/*</command>
</screen>
	      </listitem>
	      <listitem>
	        <para><application>apparmor_parser</application> para carregar um perfil no kernel. Pode também ser utilizado para recarregar um perfil utilizando a opção <emphasis>-r</emphasis>. Para carregar um perfil:</para>
<screen>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -a</command>
</screen>
		<para>Para recarregar um perfil:</para>
<screen>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -r</command>
</screen>
	      </listitem>
	      <listitem>
	   	<para><filename>/etc/init.d/apparmor</filename> pode ser utilizado para  <emphasis>recarregar</emphasis> todos os perfis:</para>
<screen>
<command>sudo /etc/init.d/apparmor reload</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para>O diretório <filename>/etc/apparmor.d/disable</filename> pode ser usado com a opção <application>apparmor_parser -R</application> para <emphasis>disabilitar</emphasis> um perfil.</para>
<screen>
<command>sudo ln -s /etc/apparmor.d/profile.name /etc/apparmor.d/disable/</command>
<command>sudo apparmor_parser -R /etc/apparmor.d/profile.name</command>
</screen>
	        <para>Para  <emphasis>habilitar novamente</emphasis> um perfil desabilidado, remova o link simbólico ao perfil em <filename>etc/apparmor.d/disable/</filename>. Depois carregue o perfil utilizando a opção <emphasis>-a</emphasis>.</para>
<screen>
<command>sudo rm /etc/apparmor.d/disable/profile.name</command>
<command>cat /etc/apparmor.d/profile.name | sudo apparmor_parser -a</command>
</screen>
	      </listitem>
	      <listitem>
	    	<para><application>AppArmor</application> pode ser desabilitada, e o módulo do kernel descarregado digitando-se o seguinte:</para>
<screen>
<command>sudo /etc/init.d/apparmor stop</command>
<command>sudo update-rc.d -f apparmor remove</command>
</screen>
	      </listitem>
	      <listitem>
	        <para>Para re-habilitar o <application>AppArmor</application> digite:</para>
<screen>
<command>sudo /etc/init.d/apparmor start</command>
<command>sudo update-rc.d apparmor defaults</command>
</screen>
	      </listitem>
	    </itemizedlist>
	    <note>
	      <para>Substitua <emphasis>profile.name</emphasis> com o nome do perfil que você quer manipular. Substitua também <filename>/path/to/bin/</filename> com o caminho atual do arquivo executável. Por exemplo, para o comando <application>ping</application> use <filename>/bin/ping</filename></para>
	    </note>
	  </sect2>
	  <sect2 id="apparmor-profiles" status="review">
	    <title>Perfis</title>
	    <para>Perfis do <application>AppArmor</application> são simples arquivos de texto localizados em <filename>/etc/apparmor.d/</filename>. Os arquivos são nomeados com o nome do caminho do executável que ele utiliza o perfil substituindo "/" por ".". Por exemplo <filename>/etc/apparmor.d/bin.ping</filename> é o perfl do AppArmor para o comando <filename>/bin/ping</filename>.</para>
	    <para>Existem dois tipos principais de regras usadas nos perfis:</para>
	    <itemizedlist>
	      <listitem>
	        <para><emphasis>Path entries:</emphasis> detalha quais arquivos uma aplicação pode acessar no sistema de arquivo.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>Entradas de capacidade:</emphasis> determina quais privilégios um processo restrito tem permissão para usar.</para>
	      </listitem>
	    </itemizedlist>
	    <para>Como exemplo, dê uma olhada em <filename>/etc/apparmor.d/bin.ping</filename>:</para>
<programlisting>
#include &lt;tunables/global&gt;
/bin/ping flags=(complain) {
  #include &lt;abstractions/base&gt;
  #include &lt;abstractions/consoles&gt;
  #include &lt;abstractions/nameservice&gt;

  capability net_raw,
  capability setuid,
  network inet raw,
  
  /bin/ping mixr,
  /etc/modules.conf r,
}
</programlisting>
	    <itemizedlist>
	      <listitem>
	        <para><emphasis>#include &lt;tunables/global&gt;:</emphasis> inclui declarações dos outros arquivos. Isto permite que as declarações pertencentes a múltiplas aplicações possam ser colocadas em um arquivo comum</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>/bin/ping flags=(complain):</emphasis> rotea para o programa do perfil, também configurando o modo para <emphasis>complain</emphasis>.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>capability net_raw,:</emphasis> permite à aplicação acessar a capacidade CAP_NET_RAW Posix.1e.</para>
	      </listitem>
	      <listitem>
	        <para><emphasis>/bin/ping mixr,:</emphasis> permite à aplicação ler e executar o acesso ao arquivo.</para>
	      </listitem>
            </itemizedlist>
	    <note>
	      <para>Depois de editar u arquivo de perfil, o perfil deve ser recarregado. Veja <xref linkend="apparmor-usage"/> para detalhes.</para>
	    </note>
	    <sect3 id="apparmor-profiles-new" status="review">
	      <title>Criando um Perfil</title>
	      <itemizedlist>
		<listitem>
	          <para><emphasis>Desenhe um plano de testes:</emphasis> Tente pensar sobre como a aplicação deve ser exercitada. O plano de testes deve ser dividido em casos de uso pequenos. Cada caso de teste deve ter uma pequena descrição e deve listar os passos a seguir.</para>
		  <para>Alguns casos padrões de testes são:</para>
	          <itemizedlist>
		    <listitem>		
		      <para>Iniciando o programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Parando o programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Recarregando o programa.</para>
		    </listitem>
		    <listitem>		
		      <para>Testando todos os comandos suportados pelo script de início (init).</para>
		    </listitem>
		  </itemizedlist>
		</listitem>
	        <listitem>
	          <para><emphasis>Gere um novo perfil:</emphasis> Use <application>aa-genprof</application> para gerar um novo perfil. De um terminal:</para>
<screen>
<command>sudo aa-genprof executable</command>
</screen>
		    <para>Por exemplo:</para>
<screen>
<command>sudo aa-genprof slapd</command>
</screen>
		</listitem>
		<listitem>
		  <para>Para ter seu novo perfil incluído no pacote <application>apparmor-profiles</application>, registre um erro em <emphasis>Launchpad</emphasis> contro a pacote <ulink url="https://bugs.launchpad.net/ubuntu/+source/apparmor/+filebug">AppArmor</ulink>:</para>
		  <itemizedlist>
		    <listitem>
		      <para>Inclua seu plano de teste e de casos de teste.</para>
		    </listitem>
		    <listitem>
		      <para>Atribua seu novo perfil ao erro.</para>
		    </listitem>
		  </itemizedlist>
		</listitem>
	      </itemizedlist>
	    </sect3>
	    <sect3 id="apparmor-profiles-update" status="review">
	      <title>Atualizando Perfis</title>
	      <para>Quando o programa não se comporta bem, mensagens de auditoria são enviadas aos arquivos de log. O programa <application>aa-logprof</application> pode ser usado para escanear arquivos de log para que o <application>AppArmor</application> examine as mensgens, revise-as e atualize os perfis. De um terminal:</para>
<screen>
<command>sudo aa-logprof</command>
</screen>
	    </sect3>
	  </sect2>	   
	  <sect2 id="apparmor-references" status="review">
	    <title>Referências</title>
	    <itemizedlist>
	      <listitem>
	        <para>Veja <ulink url="http://www.novell.com/documentation/apparmor/apparmor201_sp10_admin/index.html?page=/documentation/apparmor/apparmor201_sp10_admin/data/book_apparmor_admin.html">AppArmor Administration Guide</ulink> para opções de configuração avançadas.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	        <para>Para detalhes de como usar o AppArmor com outras versões do Ubuntu, veja a página da <ulink url="https://help.ubuntu.com/community/AppArmor"> Wiki da Comunidade AppArmor</ulink>.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	        <para>A página <ulink url="http://en.opensuse.org/AppArmor">OpenSUSE AppArmor</ulink> é outra introdução ao AppArmor.</para>
	      </listitem>
	    </itemizedlist>
	    <itemizedlist>
	      <listitem>
	  	<para>Um grande lugar para pedir assistência para <application>AppArmor</application> e involver-se com a comunidade do Ubuntu Server é o canal IRC <emphasis>#ubuntu-server</emphasis> em <ulink url="http://freenode.net">freenode</ulink>.</para>
	      </listitem>
	    </itemizedlist>
	  </sect2>
	</sect1>

        <sect1 id="certificates-and-security" status="review">
          <title>Certificados</title>
            <para>Uma das formais mais comuns de criptografia hoje é a criptografia de <emphasis>chave pública</emphasis>. A criptografia de chave pública utiliza uma <emphasis>chave pública</emphasis> e uma <emphasis>chave privada</emphasis>. O funcionamento do sistema consiste em <emphasis>cifrar</emphasis> informação usando a chave pública. A informação então só pode ser <emphasis>decifrada</emphasis> usando a chave privada.</para>
            <para>Um uso comum para a criptografia de chave pública é cifrar ou encriptar tráfico de aplicação usando uma conexão Secure Socket Layer (SSL) ou Transport Layer Security (TLS). Por exemplo, configurando o Apache para que utilize <emphasis>HTTPS</emphasis>, o protocolo HTTP sobre SSL. Isto proporciona uma maneira de encriptar o tráfico usando um protocolo que não oferece encriptação por si mesmo.</para>
            <para>Um <emphasis>Certificado</emphasis> é um método utilizado para distribuir uma <emphasis>chave pública</emphasis> e outras informações sobre um servidor e da organização que é responsável por isso. Os certificados podem ser assinados digitalmente por uma <emphasis>Autoridade Certificadora</emphasis> ou CA. A CA é uma terceira parte confiável que tem confirmado que a informação contida no certificado é verdadeira.</para>
        <sect2 id="types-of-certificates" status="review">
          <title>Tipos de Certificados</title>
            <para>Para configurar um servidor seguro usando a criptografia de chave pública, na maioria dos casos, você envia sua solicitação de certificado (incluindo sua chave pública), prova a identidade de sua empresa e paga uma CA. A CA verifica a solicitação de certificado e sua identidade e logo envia um certificado para seu servidor seguro. Como alternativa, você pode criar seu certificado <emphasis>auto-assinado</emphasis>.</para>
            <note>
              <para>Note que certificados auto-assinados não deveriam ser usados na maioria dos ambientes de produção.</para>
            </note>
            <para>Continuando o exmplo HTTPS, um certificado CA-assinado fornece duas capacidades importantes que o certificado auto-assinado não fornece:</para>

            <itemizedlist>
            <listitem>
            <para>Navegadores (em geral) automaticamente reconhecem o certificado e permitem uma conexão segura sem questionamentos ao usuário.</para>
            </listitem>
            <listitem>
            <para>Quando um CA emite um certificado assinado, está garantindo a identidade da organização que está provendo as páginas da web para o navegador.</para>
            </listitem>
            </itemizedlist>
	
            <para>A maioria dos navegadores Web, e computadores, que suportam SSL possuem uma lista de certificados CAs que eles aceitam automaticamente. Se um navegar encontrar um certificado que a autorização CA não está na lista, o navegador pergunta ao usuário se deve aceitar ou recusar a conexão. Também, outras aplicações podem gerar uma mensagem de erro quando utilizarem sua própria certificação.</para>
            <para>O processo de obtenção de um certificado por um CA é bastante fácil. A seguir uma visão geral:</para>

            <orderedlist>
            <listitem>
               <para>Cria um par de chaves criptográficas privada e pública.</para>
            </listitem>
            <listitem>
                 <para>Cria uma requisição de certificado baseada na chave pública. A requisição de certificado contém informação a respeito do seu servidor e da empresa que o hospeda.</para>
            </listitem>
            <listitem>
                 <para>Envie o pedido de certificado, juntamente com documentos provando sua identidade, para o CA. Não podemos lhe dizer qual Autoridade em Certificados (CA) escolher. Sua decisão deve ser baseada nas suas experiências anteriores, na experiência de amigos ou colegas, ou puramente por fatores financeiros.</para>

                    <para>Uma vez decido qual CA usar, você precisa seguir as instruções que eles disponibilizam em como obter um certificado deles.</para>
            </listitem>
            <listitem>
               <para>Quando o CA está satisfeito de que você é de fato quem diz ser, eles lhe enviam um certificado digital.</para>
            </listitem>
            <listitem>
              <para>Instala este certificado no seu servidor seguro, e configura as aplicações apropriadas para utilizar o certificado.</para>
            </listitem>
            </orderedlist>

        </sect2>
        <sect2 id="generating-a-csr" status="review">
          <title>Gerando uma Assinatura de Requisição de Certificado (CSR)</title>

          <para>Não importa se está recebendo um certificado de um CA ou gerando o seu certificado auto-assinado, o primeiro passo é criar uma chave.</para>

          <para>Se o certificado será usado por serviços de sistema, como Apache, Postfix, Dovecot, etc, uma chave sem frase secreta é frequentemente mais apropriada. Não ter uma frase secreta permite que os serviços iniciem sem intervenção manual, usualmente o caminho preferido para iniciar um serviço de sistema.</para>

          <para>Esta seção cobrirá  a criação de uma chave com uma frase secreta, e uma sem. A chave sem frase secreta será então usada para gerar um certificado que pode ser usado com vários serviços de sistema.</para>

          <warning>
            <para>Executar seu serviço de segurança  sem uma frase secreta é conveniente pois você não precisará entrá-la cada vez que iniciar seu serviço de segurança. Mas ela é insegura e um comprometimento da chave é um comprometimento do servidor também.</para>
          </warning>

          <para>Para gerar a <emphasis>chave</emphasis> para o Certificate Signing Request (CSR) execute o seguinte comando em um terminal:</para>

<screen>
<command>openssl genrsa -des3 -out server.key 1024</command>
</screen>

<programlisting>
Gerando chave privada RSA, 1024 bit módulos longos
.....................++++++
.................++++++
impossível escrever 'estado aleatório'
e é 65537 (0x10001)
Informe a chave senha para o server.key:
</programlisting>

        <para>Agora, você pode inserir a sua senha. Para uma segurança melhor, ela deve conter no mínimo oito caracteres. O tamanho mínimo quando -des3 é especificado é de quatro caracteres. É bom incluir números e/ou pontuação e não ser uma palavra de dicionário. Também, lembre-se que a sua senha é sensível à caixa alta e/ ou baixa.</para>

        <para>Digite a combinação de palavras novamente para verificação. Após ter regiditado corretamente, a chave do servidor é gerada e armazenada no arquivo <filename>server.key</filename>.</para>
      
        <para>Agora criada a chave insegura,a qual sem uma frase secreta, e embaralhe os nomes da chave:</para>

<screen>
<command>openssl rsa -in server.key -out server.key.insecure</command>
<command>mv server.key server.key.secure</command>
<command>mv server.key.insecure server.key</command>
</screen>

        <para>A chave insegura é agora chamada <filename>server.key</filename>, e você pode usar este arquivo para gerar o CSR sem frase secreta.</para>

        <para>Para criar um CSR, execute o seguinte comando no prompt do terminal:</para>

<screen>
<command>openssl req -new -key server.key -out server.csr</command>
</screen>

        <para>Ele irá solicitar a combinação de palavras. Se você digitar a combinação correta, ele irá perguntar pelo Nome da Empresa. Após informar todos os detalhes, sua CSR será criada e armazenada no arquivo <filename>server.csr</filename>. Nome do Site, Email, etc.</para>
	<para>Agora você pode submeter o arquivo CSR para um CA para processamento. O CA irá usar este arquivo CSR e caracterizar o certificado. Por outro lado, você mesmo poderá auto assinar um certificado utilizando este CSR.</para>
        
	</sect2>
        <sect2 id="creating-a-self-signed-certificate" status="review">
          <title>Criando um certificado Auto-Assinado</title>
            <para>Para criar um certificado auto-assinado, execute o seguinte comando no prompt de terminal:</para>
<screen>
<command>openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</command>
</screen>

            <para>O comando abaixo irá lhe pedir uma senha. Assim que você informar a senha correta, seu certificado será criado e ele será armazenado no arquivo <filename>server.crt</filename>.</para>
        <warning>
        <para>Se o seu servidor seguro deve ser utilizado em um ambiente de produção, você provavelmente precisa de um certificado assinado por uma CA. Não é recomendado usar certificados auto-assinados.</para>
        </warning>
        </sect2>
        <sect2 id="installing-the-certificate" status="review">
          <title>Instalando o Certificado</title>

            <para>Você pode instalar o arquivo de chave <filename>server.key</filename> e o arquivo do certificado <filename>server.crt</filename>, ou o arquivo de certificado enviado pelo seu CA, executando os seguintes comandos no terminal:</para>
<screen>
<command>sudo cp server.crt /etc/ssl/certs</command>
<command>sudo cp server.key /etc/ssl/private</command>
</screen>
        <para>Agora simplesmente configure qualquer aplicação, com a habilidade de usar chaves-publicas criptografadas, para usar os arquivos  <emphasis>certificate</emphasis> e <emphasis>key</emphasis>. Por exemplo, <application>Apache</application> pode prover HTTPS, <application>Dovecot</application> pode prover IMAPS e POP3S, etc.</para>
        </sect2>
        <sect2 id="certificate-authority" status="review">
          <title>Autoridade Certificadora</title>

          <para>Se os serviços de sua rede exigem mais do que alguns certificados auto-assinado pode valer a pena o esforço para adicionar sua própria configuração interna <emphasis> Autoridade Certificadora (AC) emphasis&gt;. Usando certificados assinados pelo seu pr</emphasis></para>

          <procedure>
            <step>
  
              <para>Em primeiro lugar, criar os diretórios para armazenar o certificado CA e arquivos relacionados:</para>    

<screen>
<command>sudo mkdir /etc/ssl/CA</command>
<command>sudo mkdir /etc/ssl/newcerts</command>
</screen>

            </step>
            <step>
  
              <para>O CA precisa de arquivos adcionais para operar , um para acompanhar o ultimo numero de série usado pelo CA , cada certificado deve ter uma chave única , e outro arquivo para gravar quais certificados foram usados.</para>    

<screen>
<command>sudo sh -c "echo '01' &gt; /etc/ssl/CA/serial"</command>
<command>sudo touch /etc/ssl/CA/index.txt</command>
</screen>

            </step>
            <step>
  
              <para>O terceiro arquivo é um arquivo de configuração CA. Embora não estritamente necessário, é muito conveniente quando se trabalha com certificados múltiplos. Edite <filename>/etc/ssl/openssl.cnf</filename> e, em <emphasis>[ CA_default ]</emphasis>, altere:</para>    

<programlisting>
dir             = /etc/ssl/             # Onde qualquer coisa é mantida.
database        = $dir/CA/index.txt     # Arquivo de Indexação do Banco de Dados.
certificate     = $dir/certs/cacert.pem # O Certificado CA.
serial          = $dir/CA/serial        # O número serial atual.
private_key     = $dir/private/cakey.pem# A chave privada.
</programlisting>    

            </step>
            <step>
  
              <para>Próximo, crie sua própria assinatura de certificação</para>    

<screen>
<command>openssl req -new -x509 -extensions v3_ca -keyout cakey.pem -out cacert.pem -days 3650</command>
</screen>

              <para>Você será solicitado a digitar as informações sobre o certificado.</para>

            </step>
            <step>
  
              <para>Agora instale o certificado raiz e chave:</para>    

<screen>
<command>sudo mv cakey.pem /etc/ssl/private/</command>
<command>sudo mv cacert.pem /etc/ssl/certs/</command>
</screen>

            </step>
            <step>
  
              <para>Agora você está pronto para assinar certificados. O primeiro item necessário é uma CSR (Solicitação de Assinatura de Certificado), veja em <xref linkend="generating-a-csr"/> para maiores detalhes. Assim que possuir uma CSR, digite o seguinte para gerar um certificado assinado pela Autoridade Certificadora:</para>    

<screen>
<command>sudo openssl ca -in server.csr -config /etc/ssl/openssl.cnf</command>
</screen>

              <para>Depois de entrar com com a senha para a chave CA  , será solicitado que você assinar um certificado , e mais uma vez se aceitar o novo certificado . Você deve então ver uma grande quantidade de saídas relacionadas a criação de certificado</para>

            </step>
            <step>
  
              <para>Agora, deverá haver um novo arquivo, <filename>/etc/ssl/newcerts/01.pem</filename>, contendo a mesma saída. Copie e cole tudo entre as linhas <emphasis>-----BEGIN CERTIFICATE-----</emphasis> e <emphasis>----END CERTIFICATE-----</emphasis> em um arquivo nomeado de acordo com o nome do host do servidor em que o certificado será instalado. Por exemplo, <filename>mail.example.com.crt</filename> é um bom nome descritivo.</para>    

              <para>Subseqüentemente os certificados serão nomeados <filename>02.pem</filename>, <filename>03.pem</filename>, etc.</para>

              <note>
                <para>Substituir <emphasis>mail.example.com.crt</emphasis> com seu próprio nome descritivo.</para>
              </note>

            </step>
            <step>
  
              <para>Enfim , copie o novo certificado para o host que precisa desse certificado , e configure as aplicações apropriadas para usa-los . O local padrão de instalação dos certificados é <filename role="directory">/etc/ssl/certs</filename>.Isso disponibiliza serviços múltiplos para o usar o mesmo certificado sem execessiva complicações de permissões de arquivos .</para>    

              <para>Para aplicações que podem ser configuradas use um certificado CA, você deve copiar o arquivo <filename>/etc/ssl/certs/cacert.pem</filename> para <filename role="directory">/etc/ssl/certs/</filename> no diretório em cada servidor.</para>

            </step>
          </procedure>

        </sect2>
        <sect2 id="certificate-references" status="review">
          <title>Referências</title>
          <itemizedlist>
            <listitem>
              <para>
              For more detailed instructions on using cryptography see the
              <ulink url="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html">SSL Certificates HOWTO</ulink> by tlpd.org
              </para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.pki-page.org/">The PKI Page</ulink> contém uma lista de Certificate Authorities.</para>
            </listitem>
            <listitem>
              <para>A página do Wikipedia <ulink url="http://en.wikipedia.org/wiki/Https">HTTPS</ulink> tem mais informações a respeito de HTTPS.</para>
            </listitem>
            <listitem>
              <para>Para mais informações sobre o emphasis&gt;OpenSSL</para>
            </listitem>
            <listitem>
              <para>Além disso, O'Reilly's <ulink url="http://oreilly.com/catalog/9780596002701/">Segurança de Rede com OpenSSL</ulink> é uma boa fonte de referência.</para>
            </listitem>
          </itemizedlist>
        </sect2>
        </sect1>
        <sect1 id="ecryptfs" status="review">
          <title>eCryptfs</title>
          
          <para><emphasis>eCryptfs</emphasis> é um sistema de arquivos de criptografia em pilha, compatível com POSIX e de padrão corporativo, para Linux.  Estendendo-se sobre a camada do sistema de arquivos, o <emphasis>eCryptfs</emphasis> protege os arquivos não importando o sistema de arquivos subjacente, tipo de partição, etc.</para>

          <para>Durante a instalação, há uma opção para encriptar a partição <filename role="directory">/home</filename>. Isto irá configurar automaticamente tudo que é preciso para encriptar e montar a partição.</para>

          <para>Como um exemplo, esta seção será protegida configurando <filename role="directory">/srv</filename> para ser encriptado usando o eCryptfs.</para>

          <sect2 id="ecryptfs-usage" status="review">
            <title>Usando o eCryptfs</title>

            <para>Em primeiro lugar, instalar os pacotes necessários. A partir de um prompt do terminal digite:</para>

<screen>
<command>sudo apt-get install ecryptfs-utils</command>
</screen>

            <para>Agora, monte a partição a ser encriptada:</para>

<screen>
<command>sudo mount -t ecryptfs /srv /srv</command>
</screen>

            <para>Você será solicitado a fornecer alguns detalhes sobre como deve encriptar os dados no <application>ecryptfs</application>.</para>
         
            <para>Para testar os arquivos colocados em <filename>/srv</filename> são, na verdade, a cópia criptografada <filename>/etc/default</filename> pasta para <filename>/srv</filename>:</para>

<screen>
<command>sudo cp -r /etc/default /srv</command>
</screen>

            <para>Agora desmonte <filename>/srv</filename>, e tente exibir um arquivo:</para>

<screen>
<command>sudo umount /srv</command>
<command>cat /srv/default/cron</command>
</screen>

            <para>Remontando <filename>/srv</filename> usando <application>ecryptfs</application> colocará os dados visualizáveis novamente.</para>
     
          </sect2>
          <sect2 id="ecryptfs-automount" status="review">
            <title>Montando automaticamente partições encriptadas</title>
            
            <para>Há algumas formas de montar automaticamente um sistema de arquivos criptografado pelo <application>ecryptfs</application> no boot. Este exemplo utilizará um arquivo <filename>/root/.ecryptfsrc</filename> contendo as opções de montagem, juntamente com o arquivo de senha senha residente na memória USB.</para>

            <para>Primeiro, crie <filename>/root/.ecryptfsrc</filename> contendo:</para>

<programlisting>
key=passphrase:passphrase_passwd_file=/mnt/usb/passwd_file.txt
ecryptfs_sig=5826dd62cf81c615
ecryptfs_cipher=aes
ecryptfs_key_bytes=16
ecryptfs_passthrough=n
ecryptfs_enable_filename_crypto=n
</programlisting>

            <note>
              <para>Ajuste o <emphasis>ecryptfs_sig</emphasis> à assinatura no <filename>/root/.ecryptfs/sig-cache.txt</filename>.</para>
            </note>

            <para>Em seguida, crie o arquivo senha <filename>/mnt/usb/passwd_file.txt</filename>:</para>

<programlisting>
passphrase_passwd=[secrets]
</programlisting>

            <para>Agora adicione as linhas necessárias ao <filename>/etc/fstab</filename>:</para>

<programlisting>
/dev/sdb1       /mnt/usb        ext3    ro      0 0
/srv /srv ecryptfs defaults 0 0
</programlisting>

            <para>Certifique-se que a unidade USB está montada antes de chamar a partição encriptada.</para>

            <para>Finalmente, reinicie o <filename>/srv</filename> deve ser montado utilizando ecryptfs.</para>
            
          </sect2>
          <sect2 id="ecryptfs-other-utils" status="review">
            <title>Outros Utilitários</title>

            <para>O pacote <application>ecryptfs-utils</application> inclui vários outros utilitários úteis:</para>

            <itemizedlist>
              <listitem>
                <para><emphasis>ecryptfs-setup-private:</emphasis> cria o diretório <filename>~/Private</filename> para conter informação criptografada. Este utilitário pode ser executado por um usuário não-administrador para manter dados privados a salvo de outros usuários no sistema.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-mount-private and ecryptfs-umount-private:</emphasis> irá montar e desmontar o diretório <filename>~/Private</filename> de um usuário, respectivamente.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-add-passphrase:</emphasis> adiciona uma nova senha ao chaveiro do kernel.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-manager:</emphasis> gerencia objetos <application>eCryptfs</application> tais como chaves.</para>
              </listitem>
              <listitem>
                <para><emphasis>ecryptfs-stat:</emphasis> permite visualizar meta-dados de um arquivo <application>ecryptfs</application>.</para>
              </listitem>
            </itemizedlist>

          </sect2>
          <sect2 id="ecryptfs-references" status="review">
            <title>Referências</title>
            
            <itemizedlist>
              <listitem>
                <para>Para obter mais informações sobre eCryptfs veja a página <ulink url="https://launchpad.net/ecryptfs">Launch Pad projetos</ulink></para>
              </listitem>
              <listitem>
                <para>Há também um artigo do <ulink url="http://www.linuxjournal.com/article/9400">Linux Journal</ulink> cobrindo o eCryptfs.</para>
              </listitem>
              <listitem>
                <para>Além disso, para mais opções do <application>ecryptfs</application>, veja o <ulink url="http://manpages.ubuntu.com/manpages/jaunty/en/man7/ecryptfs.7.html">manual do ecryptfs</ulink>.</para>
              </listitem>
            </itemizedlist>

          </sect2>
        </sect1>
    </chapter>
