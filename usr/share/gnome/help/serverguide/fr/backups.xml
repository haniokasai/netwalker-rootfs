<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % globalent SYSTEM "../../libs/global.ent">
<!-- NAMES --><!ENTITY canonical-name "Canonical Ltd.">
<!ENTITY project-name "Ubuntu Documentation Project">
<!ENTITY ubuntu "<phrase>Ubuntu</phrase>">
<!ENTITY sg-title "Server Guide">
<!-- VERSIONS --><!ENTITY distro-version "Jaunty Jackalope">
<!ENTITY distro-rev "9.04">
<!ENTITY distro-release-date "April 2009">
<!ENTITY distro-short-codename "jaunty">
<!ENTITY distro-apt-cd-name "Ubuntu 9.04_Jaunty_Jackalope">
<!ENTITY linux-kernel-version "2.6.27">
<!ENTITY gcc-version "4.3.1">
<!ENTITY glibc-version "2.8">
<!ENTITY python-version "2.5">
<!ENTITY glossary SYSTEM "../common/C/glossary.xml">
<!-- LEGAL URLs --><!ENTITY legalnotice SYSTEM "../libs/C/legalnotice.xml">
<!ENTITY gpl-url '<ulink url="http://www.gnu.org/licenses/gpl.html">GNU General Public License</ulink>'>
<!ENTITY cc "http://creativecommons.org/">
<!ENTITY cc-attrib '<ulink url="http://creativecommons.org/licenses/by-sa/2.5/">Attribution-ShareAlike 2.5</ulink>'>
<!ENTITY cc-fulldeed-url "http://creativecommons.org/licenses/by-sa/2.5/legalcode/">
<!ENTITY fdl-url '<ulink url="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</ulink>'>
<!ENTITY cc-disclaimer-url "http://creativecommons.org/licenses/disclaimer-popup?lang=en">
<!-- CANONICAL URL RESOURCES --><!ENTITY canonical-url "http://www.canonical.com">
<!-- OTHER UBUNTU RELATED RESOURCES --><!ENTITY upstart-url "http://upstart.ubuntu.com">
<!-- UBUNTU IRC INFORMATION --><!ENTITY irc-network "Freenode">
<!ENTITY irc-server "irc.ubuntu.com">
<!ENTITY ubuntu-irc "irc.ubuntu.com channel #ubuntu">
<!ENTITY kubuntu-irc "irc.ubuntu.com channel #kubuntu">
<!ENTITY xubuntu-irc "irc.ubuntu.com channel #xubuntu">
<!ENTITY edubuntu-irc "irc.ubuntu.com channel #edubuntu">
<!-- UBUNTU URL RESOURCES --><!ENTITY ubuntu-packages "http://packages.ubuntu.com">
<!ENTITY ubuntu-web "http://www.ubuntu.com">
<!ENTITY ubuntu-main "http://www.ubuntu.com">
<!ENTITY ubuntu-download "http://www.ubuntu.com/download">
<!ENTITY ubuntu-forums "http://www.ubuntu.com/community/forums">
<!ENTITY ubuntu-components "http://www.ubuntu.com/ubuntu/components">
<!ENTITY ubuntu-lists "http://lists.ubuntu.com">
<!ENTITY ubuntu-wiki "http://wiki.ubuntu.com">
<!ENTITY ubuntu-bugzilla "https://launchpad.net/distros/ubuntu/+bugs">
<!ENTITY ubuntu-doc-bugs "https://launchpad.net/products/ubuntu-doc/+bugs">
<!ENTITY ubuntu-support "http://www.ubuntu.com/support">
<!ENTITY ubuntu-paidsupport "http://www.ubuntu.com/support/paid">
<!ENTITY ubuntu-freesupport "http://www.ubuntu.com/support/free">
<!ENTITY ubuntu-comments "http://www.ubuntuforums.org/showthread.php?p=21787">
<!ENTITY ubuntu-documentation "http://help.ubuntu.com">
<!ENTITY ubuntu-documentation-repos "https://docteam.ubuntu.com/repos/trunk">
<!ENTITY ubuntu-doc-team "https://wiki.ubuntu.com/DocumentationTeam">
<!ENTITY ubuntu-doc-list "http://lists.ubuntu.com/mailman/listinfo/ubuntu-doc">
<!ENTITY ubuntu-shipit "http://shipit.ubuntu.com">
<!ENTITY ubuntu-launchpad "https://launchpad.ubuntu.com">
<!ENTITY ubuntu-rosetta "https://launchpad.ubuntu.com/rosetta">
<!ENTITY ubuntu-planet "http://planet.ubuntu.com">
<!ENTITY ubuntu-philosophy "http://www.ubuntu.com/ubuntu/philosophy">
<!ENTITY ubuntu-participate "http://www.ubuntu.com/community/participate/">
<!ENTITY ubuntu-marketplace "http://www.ubuntu.com/support/marketplace">
<!ENTITY ubuntu-hwdb "http://hwdb.ubuntu.com">
<!-- UBUNTU WIKI RESOURCES --><!ENTITY wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY restricted-formats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-RestrictedFormats "https://help.ubuntu.com/community/RestrictedFormats">
<!ENTITY wiki-XChatHowto "https://help.ubuntu.com/community/XChatHowto">
<!ENTITY wiki-RootSudo "https://help.ubuntu.com/community/RootSudo">
<!ENTITY wiki-HowToGetHelp "https://help.ubuntu.com/community/HowToGetHelp">
<!ENTITY transcode "https://help.ubuntu.com/community/DVDRippingandEncoding">
<!ENTITY wiki-Wine "https://help.ubuntu.com/community/Wine">
<!ENTITY wiki-Cedega "https://help.ubuntu.com/community/Cedega">
<!ENTITY wiki-Nano "https://help.ubuntu.com/community/NanoHowto">
<!ENTITY wiki-locoteams "https://wiki.ubuntu.com/LoCoTeamList">
<!ENTITY wiki-BasicCommands "https://help.ubuntu.com/community/BasicCommands">
<!ENTITY wiki-filepermissions "https://help.ubuntu.com/community/FilePermissions">
<!-- KUBUNTU URL RESOURCES --><!ENTITY kubuntu-web "http://www.kubuntu.org">
<!ENTITY kubuntu-main "http://www.kubuntu.org">
<!ENTITY kubuntu-download "http://releases.ubuntu.com/kubuntu/">
<!ENTITY kubuntu-packages "http://packages.ubuntu.com/edgy/">
<!ENTITY kubuntu-cdpackages-nodefault "http://people.ubuntu.com/~cjwatson/seeds/kubuntu-edgy/ship">
<!ENTITY kubuntu-lists "http://lists.ubuntu.com/archives/kubuntu-users/">
<!ENTITY kubuntu-lists-users "http://lists.ubuntu.com/mailman/listinfo/kubuntu-users/">
<!ENTITY kubuntu-lists-devel "http://lists.ubuntu.com/mailman/listinfo/kubuntu-devel/">
<!ENTITY kubuntu-mirrors "http://distrowatch.com/kubuntu">
<!ENTITY kubuntu-forums "http://kubuntuforums.net">
<!ENTITY kubuntu-wiki "https://wiki.kubuntu.org">
<!ENTITY kubuntu-documentation-site "http://www.kubuntu.org/documentation.php">
<!ENTITY kubuntu-wiki-UserDocumentation "https://help.ubuntu.com/community/UserDocumentation">
<!ENTITY kubuntu-support "http://www.kubuntu.org/support.php">
<!-- XUBUNTU URL RESOURCES --><!ENTITY xubuntu-web "http://www.xubuntu.org">
<!ENTITY xubuntu-main "http://www.xubuntu.org">
<!ENTITY xubuntu-web-help "http://www.xubuntu.org/help">
<!-- DEBIAN RESOURCES --><!ENTITY debian-apt "http://www.debian.org/doc/user-manuals#apt-howto">
<!-- EXTERNAL URL RESOURCES --><!ENTITY linmodem "http://www.linmodems.org/">
<!ENTITY gnome "http://www.gnome.org/">
<!ENTITY linuxorg "http://www.linux.org/">
<!ENTITY ooo "http://www.openoffice.org/">
<!ENTITY kde "http://www.kde.org/">
<!ENTITY lugww "http://lugww.counter.li.org/">
<!ENTITY ubuntu-watch "http://distrowatch.com/ubuntu/">
<!ENTITY realplayer-download "http://www.real.com/linux/">
<!ENTITY nvu-download "http://www.nvu.com/download.html">
<!ENTITY sunjava-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY xorg "http://www.x.org">
<!ENTITY dyndns "http://www.dyndns.org">
<!ENTITY shoutcast "http://www.shoutcast.com/">
<!ENTITY freedomtoaster "http://www.freedomtoaster.org/">
<!ENTITY xfce "http://www.xfce.org/">
<!-- ubuntu-screenshots TODO --><!ENTITY kubuntu-screenshots "http://shots.osdir.com/">
<!ENTITY mozilla "http://www.mozilla.org/">
<!ENTITY mozilla-firefox "http://www.mozilla.org/products/firefox/">
<!ENTITY gnu "http://www.gnu.org/">
<!ENTITY gnu-philosophy "http://www.gnu.org/philosophy/">
<!ENTITY win4lin "http://www.win4lin.com">
<!ENTITY codeweavers "http://www.codeweavers.com">
<!ENTITY kernel "http://www.kernel.org">
<!ENTITY google "http://www.google.com">
<!ENTITY kdelook " http://www.kde-look.org">
<!ENTITY lulu-store "http://www.lulu.com/ubuntu-doc">
<!-- this entity controls the url for addons--><!ENTITY java-download "http://java.sun.com/j2se/1.5.0/download.jsp">
<!ENTITY skype-deb "skype_1.2.0.17-1_i386.deb">
<!ENTITY skype-download "http://www.skype.com/go/getskype-linux-deb">
<!ENTITY scanmodem-gz "scanModem.gz">
<!ENTITY scanmodem-url "http://linmodems.technion.ac.il/packages/scanModem.gz">
<!ENTITY ext2fs-url "http://www.fs-driver.org/index.html">
<!ENTITY mvb-tar "mvb_1.6.tgz">
<!ENTITY mvb-url "http://www.xscd.com/pub/mvb/&mvb-tar;">
<!-- TLDP --><!ENTITY ldp-pre-install-check "http://tldp.org/HOWTO/Pre-Installation-Checklist/">
<!-- LANGUAGES (sorted by two letter code)--><!ENTITY Afar "aa">
<!ENTITY Abkhazian "ab">
<!ENTITY Afrikaans "af">
<!ENTITY Amharic "af">
<!ENTITY Arabic "ar">
<!ENTITY Assamese "as">
<!ENTITY Aymara "ay">
<!ENTITY Azerbaijani "az">
<!ENTITY Bashkir "ba">
<!ENTITY Byelorussian "be">
<!ENTITY Bulgarian "bg">
<!ENTITY Bihari "bh">
<!ENTITY Bislama "bi">
<!ENTITY Bangla "bn">
<!ENTITY Bengali "bn">
<!ENTITY Tibetan "bo">
<!ENTITY Breton "br">
<!ENTITY Catalan "ca">
<!ENTITY Corsican "co">
<!ENTITY Czech "cs">
<!ENTITY Welsh "cy">
<!ENTITY Danish "da">
<!ENTITY German "de">
<!ENTITY Bhutani "dz">
<!ENTITY Greek "el">
<!-- <!ENTITY EnglishAmerican 'en'> --><!ENTITY EnglishAmerican "C">
<!ENTITY Esperanto "eo">
<!ENTITY Spanish "es">
<!ENTITY Estonian "et">
<!ENTITY Basque "eu">
<!ENTITY Persian "fa">
<!ENTITY Finnish "fi">
<!ENTITY Fiji "fj">
<!ENTITY Faeroese "fo">
<!ENTITY French "fr">
<!ENTITY Frisian "fy">
<!ENTITY Irish "ga">
<!ENTITY Gaelic "gd">
<!ENTITY ScotsGaelic "gd">
<!ENTITY Galician "gl">
<!ENTITY Guarani "gn">
<!ENTITY Gujarati "gu">
<!ENTITY Hausa "ha">
<!ENTITY Hindi "hi">
<!ENTITY Croatian "hr">
<!ENTITY Hungarian "hu">
<!ENTITY Armenian "hy">
<!ENTITY Interlingua "ia">
<!ENTITY Interlingue "ie">
<!ENTITY Inupiak "ik">
<!ENTITY Indonesian "in">
<!ENTITY Icelandic "is">
<!ENTITY Italian "it">
<!ENTITY Hebrew "iw">
<!ENTITY Japanese "ja">
<!ENTITY Yiddish "ji">
<!ENTITY Javanese "jw">
<!ENTITY Georgian "ka">
<!ENTITY Kazakh "kk">
<!ENTITY Greenlandic "kl">
<!ENTITY Cambodian "km">
<!ENTITY Kannada "kn">
<!ENTITY Korean "ko">
<!ENTITY Kashmiri "ks">
<!ENTITY Kurdish "ku">
<!ENTITY Kirghiz "ky">
<!ENTITY Latin "la">
<!ENTITY Lingala "ln">
<!ENTITY Laothian "lo">
<!ENTITY Lithuanian "lt">
<!ENTITY Latvian "lv">
<!ENTITY Lettish "lv">
<!ENTITY Malagasy "mg">
<!ENTITY Maori "mi">
<!ENTITY Macedonian "mk">
<!ENTITY Malayalam "ml">
<!ENTITY Mongolian "mn">
<!ENTITY Moldavian "mo">
<!ENTITY Marathi "mr">
<!ENTITY Malay "ms">
<!ENTITY Maltese "mt">
<!ENTITY Burmese "my">
<!ENTITY Nauru "na">
<!ENTITY Nepali "ne">
<!ENTITY Dutch "nl">
<!ENTITY Norwegian "no">
<!ENTITY Occitan "oc">
<!ENTITY Afan "om">
<!ENTITY Oromo "om">
<!ENTITY Oriya "or">
<!ENTITY Punjabi "pa">
<!ENTITY Polish "pl">
<!ENTITY Pushto "ps">
<!ENTITY Pashto "ps">
<!ENTITY Portuguese "pt">
<!ENTITY Quechua "qu">
<!ENTITY Rhaeto-Romance "rm">
<!ENTITY Kirundi "rn">
<!ENTITY Romanian "ro">
<!ENTITY Russian "ru">
<!ENTITY Kinyarwanda "rw">
<!ENTITY Sanskrit "sa">
<!ENTITY Sindhi "sd">
<!ENTITY Sangro "sg">
<!ENTITY Serbo-Croatian "sh">
<!ENTITY Singhalese "si">
<!ENTITY Slovak "sk">
<!ENTITY Slovenian "sl">
<!ENTITY Samoan "sm">
<!ENTITY Shona "sn">
<!ENTITY Somali "so">
<!ENTITY Albanian "sq">
<!ENTITY Serbian "sr">
<!ENTITY Siswati "ss">
<!ENTITY Sesotho "st">
<!ENTITY Sudanese "su">
<!ENTITY Swedish "sv">
<!ENTITY Swahili "sw">
<!ENTITY Tamil "ta">
<!ENTITY Tegulu "te">
<!ENTITY Tajik "tg">
<!ENTITY Thai "th">
<!ENTITY Tigrinya "ti">
<!ENTITY Turkmen "tk">
<!ENTITY Tagalog "tl">
<!ENTITY Setswana "tn">
<!ENTITY Tonga "to">
<!ENTITY Turkish "tr">
<!ENTITY Tsonga "ts">
<!ENTITY Tatar "tt">
<!ENTITY Twi "tw">
<!ENTITY Ukrainian "uk">
<!ENTITY Urdu "ur">
<!ENTITY Uzbek "uz">
<!ENTITY Vietnamese "vi">
<!ENTITY Volapuk "vo">
<!ENTITY Wolof "wo">
<!ENTITY Xhosa "xh">
<!ENTITY Yoruba "yo">
<!ENTITY Chinese "zh">
<!ENTITY Zulu "zu">
<!ENTITY % gnome-menus-C SYSTEM "../../libs/gnome-menus-C.ent">
<!-- MENUS --><!-- Please keep entries alphabetical, it makes them much easier to find & use --><!ENTITY about-me "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>About-me</guimenuitem></menuchoice>">
<!ENTITY accessories "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem></menuchoice>">
<!ENTITY acro-read "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Acrobat Reader</guimenuitem></menuchoice>">
<!ENTITY administration "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem></menuchoice>">
<!ENTITY aisleriot "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>AisleRiot Solitaire</guimenuitem></menuchoice>">
<!ENTITY amule "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY anjuta-ide "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Anjuta IDE</guimenuitem></menuchoice>">
<!ENTITY archive-man "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Archive Manager</guimenuitem></menuchoice>">
<!ENTITY assistive-technology-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Assistive Technology Support</guimenuitem></menuchoice>">
<!ENTITY audacity "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Audacity</guimenuitem></menuchoice>">
<!ENTITY azureus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Azureus</guimenuitem></menuchoice>">
<!ENTITY baobab "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Disk Usage Analyzer</guimenuitem></menuchoice>">
<!ENTITY bittorrent "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Bittorrent</guimenuitem></menuchoice>">
<!ENTITY blender3d "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Blender 3d modeller</guimenuitem></menuchoice>">
<!ENTITY bluefish "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Programming</guimenuitem><guimenuitem>Bluefish Editor</guimenuitem></menuchoice>">
<!ENTITY boot "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Boot</guimenuitem></menuchoice>">
<!ENTITY brasero "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Brasero Disc Burning</guimenuitem></menuchoice>">
<!ENTITY bum "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Boot-up Manager</guimenuitem></menuchoice>">
<!ENTITY bzrgtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Olive bazaar Branch Manager</guimenuitem></menuchoice>">
<!ENTITY calculator "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Calculator</guimenuitem></menuchoice>">
<!ENTITY character-map "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Character Map</guimenuitem></menuchoice>">
<!ENTITY compizconfig "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>CompizConfig Settings Manager</guimenuitem></menuchoice>">
<!ENTITY computer "<menuchoice><guimenu>Places</guimenu><guimenuitem>Computer</guimenuitem></menuchoice>">
<!ENTITY connecttoserver "<menuchoice><guimenu>Places</guimenu><guimenuitem>Connect to Server...</guimenuitem></menuchoice>">
<!ENTITY cowbell "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>Cowbell Music Organizer</guimenuitem>	</menuchoice>">
<!ENTITY chromium "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Chromium</guisubmenu></menuchoice>">
<!ENTITY computer-janitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guisubmenu>System Janitor</guisubmenu></menuchoice>">
<!ENTITY desktop-background "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Desktop Background</guimenuitem></menuchoice>">
<!ENTITY desktop-effects "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Appearance</guimenuitem><guimenuitem>Visual Effects</guimenuitem></menuchoice>">
<!ENTITY desktop-preferences "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem></menuchoice>">
<!ENTITY devhelp "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>Devhelp</guimenuitem></menuchoice>">
<!ENTITY device-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Hardware Information</guimenuitem></menuchoice>">
<!ENTITY dictionary "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Dictionary</guimenuitem></menuchoice>">
<!ENTITY disks "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Disks</guimenuitem></menuchoice>">
<!ENTITY downloader-x "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Downloader for X</guimenuitem></menuchoice>">
<!ENTITY eclipse-ide "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Eclipse IDE</guimenuitem></menuchoice>">
<!ENTITY ekiga "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Internet</guimenuitem><guimenuitem>Ekiga Softphone</guimenuitem></menuchoice>">
<!ENTITY efax-gtk "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Office</guisubmenu><guimenuitem>Efax-gtk</guimenuitem></menuchoice>">
<!ENTITY etherape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Etherape</guimenuitem></menuchoice>">
<!ENTITY evolution-mail "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Evolution Mail</guimenuitem></menuchoice>">
<!ENTITY file-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>File Management</guimenuitem></menuchoice>">
<!ENTITY firefox "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Internet</guisubmenu><guimenuitem>Firefox Web Browser</guimenuitem></menuchoice>">
<!ENTITY firestarter-firewall-tool "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Firestarter</guimenuitem></menuchoice>">
<!ENTITY five-or-more "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Five or More</guimenuitem></menuchoice>">
<!ENTITY font "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Font</guimenuitem></menuchoice>">
<!ENTITY f-spot "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>F-Spot Photo Manager</guimenuitem></menuchoice>">
<!ENTITY frozen-bubble "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Frozen Bubble</guisubmenu></menuchoice> to play <application>Frozen Bubble</application>">
<!ENTITY gambas "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>Gambas</guimenuitem></menuchoice>">
<!ENTITY games "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Games</guimenuitem></menuchoice>">
<!ENTITY gdesklets "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>gDesklets</guimenuitem></menuchoice>">
<!ENTITY gftp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>gFTP</guimenuitem></menuchoice>">
<!ENTITY gimp "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>GIMP Image Editor</guimenuitem></menuchoice>">
<!ENTITY gnome-app-install "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Add/Remove...</guimenuitem></menuchoice>">
<!ENTITY gnome-config-editor "<screen><command>gconf-editor</command></screen>">
<!ENTITY gnome-sound-recorder "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Sound Recorder</guimenuitem></menuchoice>">
<!ENTITY gparted "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration </guisubmenu><guimenuitem>Gnome Partition Editor</guimenuitem></menuchoice>">
<!ENTITY graphics "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem></menuchoice>">
<!ENTITY gthumb "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>gThumb Image Viewer</guimenuitem></menuchoice>">
<!ENTITY gtkpod "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Sound &amp; Video</guisubmenu><guimenuitem>gtkpod</guimenuitem></menuchoice>">
<!ENTITY gnucash "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>GnuCash Finance Management</guimenuitem></menuchoice>">
<!ENTITY gxine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>gxine</guimenuitem></menuchoice>">
<!ENTITY home-folder "<menuchoice><guimenu>Places</guimenu><guimenuitem>Home Folder</guimenuitem></menuchoice>">
<!ENTITY homebank "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>HomeBank</guimenuitem></menuchoice>">
<!ENTITY hubackup "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Backup</guimenuitem></menuchoice>">
<!ENTITY hurestore "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>Home User Restore</guimenuitem></menuchoice>">
<!ENTITY inkscape "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>Inkscape SVG Vector Illustrator</guimenuitem></menuchoice>">
<!ENTITY internet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem></menuchoice>">
<!ENTITY kdevelop "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Programming</guisubmenu><guimenuitem>KDevelop</guimenuitem></menuchoice>">
<!ENTITY keyboard "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard</guimenuitem></menuchoice>">
<!ENTITY keyboard-shortcuts "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Keyboard Shortcuts</guimenuitem></menuchoice>">
<!ENTITY language-support "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Language Support</guimenuitem></menuchoice>">
<!ENTITY liferea "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Liferea Feed Reader</guimenuitem></menuchoice>">
<!ENTITY limewire "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>LimeWire</guimenuitem></menuchoice>">
<!ENTITY lockscreen "<menuchoice><guimenu>System</guimenu><guimenuitem>Lock Screen</guimenuitem></menuchoice>">
<!ENTITY login-screen-setup "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Login Window</guimenuitem></menuchoice>">
<!ENTITY mahjongg "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Games</guimenuitem><guimenuitem>Mahjongg</guimenuitem></menuchoice>">
<!ENTITY menu-editor "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Accessories</guisubmenu><guimenuitem>Applications Menu Editor</guimenuitem></menuchoice>">
<!ENTITY menus-and-toolbars "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Menus &amp; Toolbars</guimenuitem></menuchoice>">
<!ENTITY monodevelop "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDevelop</guimenuitem></menuchoice>">
<!ENTITY monodoc "<menuchoice><guimenuitem>Applications</guimenuitem><guimenuitem>Programming</guimenuitem><guimenuitem>MonoDoc</guimenuitem></menuchoice>">
<!ENTITY mouse "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Mouse</guimenuitem></menuchoice>">
<!ENTITY mtink "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>mtink</guimenuitem></menuchoice>">
<!ENTITY music "<menuchoice><guimenu>Places</guimenu><guimenuitem>Music</guimenuitem></menuchoice>">
<!ENTITY multimedia-systems-selector "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Multimedia Systems Selector</guimenuitem></menuchoice>">
<!ENTITY ndisgtk "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Windows Wireless Drivers</guimenuitem></menuchoice>">
<!ENTITY network-proxy "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Network Proxy</guimenuitem></menuchoice>">
<!ENTITY network-tools "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network Tools</guimenuitem></menuchoice>">
<!ENTITY networking "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY network-servers "<menuchoice><guimenu>Places</guimenu><guimenuitem>Network</guimenuitem></menuchoice>">
<!ENTITY neverball "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverball</guisubmenu></menuchoice>">
<!ENTITY neverputt "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Neverputt</guisubmenu></menuchoice>">
<!ENTITY nexuiz "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Nexuiz</guisubmenu></menuchoice>">
<!ENTITY open-office "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem></menuchoice>">
<!ENTITY openoffice-base "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Database</guimenuitem></menuchoice>">
<!ENTITY openoffice-draw "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>OpenOffice.org Draw</guimenuitem></menuchoice>">
<!ENTITY openoffice-presentation "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Presentation</guimenuitem></menuchoice>">
<!ENTITY openoffice-spreadsheet "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Spreadsheet</guimenuitem></menuchoice>">
<!ENTITY openoffice-writer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>OpenOffice.org Word Processor</guimenuitem></menuchoice>">
<!ENTITY palmos-devices "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>PalmOS Devices</guimenuitem></menuchoice>">
<!ENTITY pan "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pan Newsreader</guimenuitem></menuchoice>">
<!ENTITY photoprint "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>PhotoPrint</guimenuitem></menuchoice>">
<!ENTITY pidgin "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Pidgin Internet Messenger</guimenuitem></menuchoice>">
<!ENTITY power-management "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Power Management</guimenuitem></menuchoice>">
<!ENTITY ppracer "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Planet Penguin Racer</guisubmenu></menuchoice>">
<!ENTITY preferences "<menuchoice><guimenu>System</guimenu><guisubmenu>Preferences</guisubmenu></menuchoice>">
<!ENTITY preferred-applications "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Preferred Applications</guimenuitem></menuchoice>">
<!ENTITY print "<menuchoice><guimenu>File</guimenu><guimenuitem>Print</guimenuitem></menuchoice>">
<!ENTITY printing "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Printing</guimenuitem></menuchoice>">
<!ENTITY qtparted "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem><guimenuitem>QTParted</guimenuitem></menuchoice>">
<!ENTITY remote-desktop "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Remote Desktop</guimenuitem></menuchoice>">
<!ENTITY removable-drives-and-media "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Removable Drives and Media</guimenuitem></menuchoice>">
<!ENTITY realplayer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>RealPlayer 11</guimenuitem></menuchoice>">
<!ENTITY restricted-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Hardware Drivers</guimenuitem></menuchoice>">
<!ENTITY rhythmbox "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Rhythmbox Music Player</guimenuitem></menuchoice>">
<!ENTITY route-planner "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>aMule</guimenuitem></menuchoice>">
<!ENTITY scorched3d "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guimenuitem>Scorched 3D</guimenuitem></menuchoice>">
<!ENTITY screen-resolution "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screen Resolution</guimenuitem></menuchoice>">
<!ENTITY screensaver "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Screensaver</guimenuitem></menuchoice>">
<!ENTITY scribus "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Office</guimenuitem><guimenuitem>Scribus</guimenuitem></menuchoice>">
<!ENTITY serpentine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Serpentine Audio CD Creator</guimenuitem></menuchoice>">
<!ENTITY services "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Services</guimenuitem></menuchoice>">
<!ENTITY sessions "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sessions</guimenuitem></menuchoice>">
<!ENTITY shared-folders "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Shared Folders</guimenuitem></menuchoice>">
<!ENTITY skype "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Skype</guimenuitem></menuchoice>">
<!ENTITY software-properties "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY software-sources "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Software Sources</guimenuitem></menuchoice>">
<!ENTITY sound "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Sound</guimenuitem></menuchoice>">
<!ENTITY soundandvideo "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem></menuchoice>">
<!ENTITY soundjuicer "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Audio CD Extractor</guimenuitem></menuchoice>">
<!ENTITY supertux "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>SuperTux</guisubmenu></menuchoice>">
<!ENTITY shutdown "<menuchoice><guimenu>System</guimenu><guimenuitem>Shut Down...</guimenuitem></menuchoice>">
<!ENTITY synaptic "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Synaptic Package Manager</guimenuitem></menuchoice>">
<!ENTITY system-monitor "<menuchoice><guimenu>System</guimenu><guisubmenu>Administration</guisubmenu><guimenuitem>System Monitor</guimenuitem></menuchoice>">
<!ENTITY systemtools "<menuchoice><guimenu>Applications</guimenu><guimenuitem>System Tools</guimenuitem></menuchoice>">
<!ENTITY terminal "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Terminal</guimenuitem></menuchoice>">
<!ENTITY text-editor "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Accessories</guimenuitem><guimenuitem>Text Editor</guimenuitem></menuchoice>">
<!ENTITY theme "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Theme</guimenuitem></menuchoice>">
<!ENTITY thunderbird "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Mozilla Thunderbird Mail/News</guimenuitem></menuchoice>">
<!ENTITY time-date "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Time and Date</guimenuitem></menuchoice>">
<!ENTITY totem "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>Movie Player</guimenuitem></menuchoice>">
<!ENTITY touchpad "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Touchpad</guimenuitem></menuchoice>">
<!ENTITY tremulous "<menuchoice><guimenu>Applications</guimenu><guisubmenu>Games</guisubmenu><guisubmenu>Tremulous</guisubmenu></menuchoice>">
<!ENTITY ubuntu-update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Ubuntu Update Manager</guimenuitem></menuchoice>">
<!ENTITY update-manager "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Update Manager</guimenuitem></menuchoice>">
<!ENTITY users "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY users-groups "<menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice>">
<!ENTITY windows "<menuchoice><guimenu>System</guimenu><guimenuitem>Preferences</guimenuitem><guimenuitem>Windows</guimenuitem></menuchoice>">
<!ENTITY wireshark "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Wireshark</guimenuitem></menuchoice>">
<!ENTITY xchat-gnome "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Internet</guimenuitem><guimenuitem>Xchat-GNOME IRC Chat</guimenuitem></menuchoice>">
<!ENTITY xine "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>xine</guimenuitem></menuchoice>">
<!ENTITY xmms "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Sound &amp; Video</guimenuitem><guimenuitem>XMMS</guimenuitem></menuchoice>">
<!ENTITY xsane "<menuchoice><guimenu>Applications</guimenu><guimenuitem>Graphics</guimenuitem><guimenuitem>XSane Image Scanner</guimenuitem></menuchoice>">
<!ENTITY % xinclude SYSTEM "../../libs/xinclude.mod">
<!ELEMENT xi:include (xi:fallback)?>
<!ATTLIST xi:include xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ATTLIST xi:include href CDATA #REQUIRED>
<!ATTLIST xi:include parse (xml | text) "xml">
<!ATTLIST xi:include xpointer CDATA #IMPLIED>
<!ATTLIST xi:include encoding CDATA #IMPLIED>
<!ATTLIST xi:include accept CDATA #IMPLIED>
<!ATTLIST xi:include accept-charset CDATA #IMPLIED>
<!ATTLIST xi:include accept-language CDATA #IMPLIED>
<!ELEMENT xi:fallback ANY>
<!ATTLIST xi:fallback xmlns:xi CDATA #FIXED "http://www.w3.org/2001/XInclude">
<!ENTITY % local.preface.class "| xi:include">
<!ENTITY % local.part.class "| xi:include">
<!ENTITY % local.chapter.class "| xi:include">
<!ENTITY % local.divcomponent.mix "| xi:include">
<!ENTITY % local.para.char.mix "| xi:include">
<!ENTITY % local.info.class "| xi:include">
<!ENTITY % local.common.attrib "xmlns:xi            CDATA       #FIXED       'http://www.w3.org/2001/XInclude'">
<!ENTITY language "&EnglishAmerican;">
]>
<chapter id="backups" status="review">
  <title>Sauvegardes</title>
  <para>Il y a de nombreuses manières de sauvegarder une installation Ubuntu. La chose la plus importante à propos des sauvegardes est de développer un <emphasis>plan de sauvegarde</emphasis> détaillant ce qu'il faut sauvegarder, où le sauvegarder et comment le restaurer.</para>
  <para>Les sections suivantes proposent diverses manières d'accomplir ces tâches :</para>
  <sect1 id="backup-shellscripts" status="review">
    <title>Scripts shell</title>
    <para>Une des méthodes les plus simples pour sauvegarder un système est d'utiliser un <emphasis>script shell</emphasis>. On peut, par exemple, se servir d'un script pour définir les répertoires à sauvegarder et utiliser ensuite ces répertoires comme arguments pour <application>tar</application> afin de créer un fichier archive. Ce fichier archive peut être ensuite déplacé ou copié vers un autre endroit de stockage. Il peut aussi être créé sur un système de fichiers distant comme un montage NFS.</para>
    <para>L'utilitaire <application>tar</application> crée un fichier archive à partir de plusieurs fichiers ou répertoires. <application>tar</application> peut aussi faire appel à des utilitaires de compression pour réduire la taille de l'archive.</para>

    <sect2 id="backup-shellscript" status="review">
      <title>Script shell simple</title>
      <para>Le script shell suivant se sert de <application>tar</application> pour créer une archive sur un montage NFS. Le nom de l'archive est défini en se servant de divers utilitaires en ligne de commande.</para>
<programlisting>
#!/bin/sh
####################################
#
# Sauvegarde dans un point de montage NFS
#
####################################

# Ce qu'il faut sauvegarder. 
backup_files="/home /var/spool/mail /etc /root /boot /opt"

# Où sauvegarder l'archive.
dest="/mnt/backup"

# Création du nom de l'archive.
day=$(date +%A)
hostname=$(hostname -s)
archive_file="$hostname-$day.tgz"

# Affichage du commencement de la sauvegarde.
echo "Sauvegarde de $backup_files vers $dest/$archive_file"
date
echo

# Sauvegarde à l'aide de tar.
tar czf $dest/$archive_file $backup_files

# Affichage de la fin de la sauvegarde
echo
echo "Sauvegarde terminée"
date

# Liste détaillée des fichiers de $dest pour vérifier la taille des fichiers
ls -lh $dest
</programlisting>
      <itemizedlist>
        <listitem>           
          <para><emphasis>$backup_files :</emphasis> variable listant les répertoires que vous souhaitez sauvegarder. La liste doit être adaptée à vos besoins.</para>
        </listitem>
        <listitem>           
          <para><emphasis>$day :</emphasis> variable contenant le jour de la semaine (lundi, mardi, mercredi, etc.). Elle est utilisée pour créer une archive pour chaque jour de la semaine, donnant un historique hebdomadaire de sauvegarde. Il y a d'autres façons de réaliser ceci, y compris en utilisant <application>date</application>.</para>
        </listitem>
        <listitem>           
          <para><emphasis>$hostname :</emphasis> variable contenant le nom d'hôte de votre système en format <emphasis>court</emphasis>. Vous pourrez ainsi placer les archives quotidiennes de plusieurs hôtes dans un même répertoire.</para>
        </listitem>
        <listitem>           
          <para><emphasis>$archive_file :</emphasis> le nom complet de l'archive.</para>
        </listitem>
        <listitem>           
          <para><emphasis>$dest :</emphasis> destination du fichier archive. Le répertoire doit être créé à l'avance et, dans ce cas-ci, <emphasis>monté</emphasis> avant d'exécuter le script. Consultez <xref linkend="network-file-system"/> pour plus d'informations sur l'utilisation de <emphasis>NFS</emphasis>.</para>
        </listitem>
        <listitem>           
          <para><emphasis>status messages :</emphasis> messages optionnels affichés dans la console lors de l'utilisation de la commande <application>echo</application>.</para>
        </listitem>
        <listitem>           
          <para><emphasis>tar czf $dest/$archive_file $backup_files :</emphasis> la commande <application>tar</application> utilisée pour créer le fichier d'archive.</para>
  	  <itemizedlist>
            <listitem>           
              <para><emphasis>c :</emphasis> crée une archive.</para>
            </listitem>
            <listitem>           
              <para><emphasis>z :</emphasis> compresser l'archive avec <application>gzip</application>.</para>
            </listitem>
            <listitem>           
              <para><emphasis>f :</emphasis> utilisation d'un fichier archive. Sans cette option, le résultat de <application>tar</application> sera envoyé vers STDOUT.</para>
            </listitem>
          </itemizedlist>
        </listitem>
        <listitem>           
          <para><emphasis>ls -lh $dest :</emphasis> instruction optionnelle affichant une liste du répertoire de destination détaillée <emphasis>-l</emphasis> et au format lisible par facilement <emphasis>-h</emphasis>. Ceci est utile pour vérifier rapidement la taille du fichier archive, mais ne devrait pas remplacer le test de celui-ci.</para>
        </listitem>
      </itemizedlist>
      <para>Ceci est un exemple simple d'un script shell de sauvegarde. Bien des options peuvent être ajoutées à un tel script de sauvegarde. Consultez <xref linkend="backup-shellscript-references"/> pour des liens vers des ressources fournissant plus d'informations concernant les scripts shell.</para>
    </sect2>

    <sect2 id="backup-executing-shellscript" status="review">
      <title>Exécution du script</title>
      <sect3 id="backup-script-execute-shell" status="review">
        <title>Exécution à partir d'un terminal</title>
        <para>La manière la plus simple d'exécuter le script de sauvegarde ci-dessus est de copier et coller les contenus dans un fichier, <filename>backup.sh</filename> par exemple. Ensuite, tapez dans un terminal :</para>
<screen>
<command>sudo bash backup.sh</command>
</screen>
        <para>C'est une excellente manière de tester le script pour s'assurer que tout fonctionne comme prévu.</para>
      </sect3>
      <sect3 id="backup-script-execute-cron" status="review">
        <title>Exécution avec cron</title>
        <para>L'exécution du script peut être automatisée avec l'utilitaire <application>cron</application>. Le démon <application>cron</application> permet d'exécuter des scripts ou des commandes, à une date et une heure déterminées.</para>
        <para><application>cron</application> est configuré au travers d'entrées dans un fichier <filename>crontab</filename>. Les fichiers <filename>crontab</filename> sont séparés en champs:</para>
<programlisting>
# m h dom mon dow   command
</programlisting>
        <itemizedlist>
          <listitem>
            <para><emphasis>m :</emphasis> minute entre 0 et 59 à laquelle la commande s'exécute.</para>
          </listitem>
          <listitem>
            <para><emphasis>h :</emphasis> heure entre 0 et 23 à laquelle la commande s'exécute.</para>
          </listitem>
          <listitem>
            <para><emphasis>dom :</emphasis> jour du mois durant lequel la commande s'exécute.</para>
          </listitem>
          <listitem>
            <para><emphasis>mon :</emphasis> mois entre 1 et 12 durant lequel la commande s'exécute.</para>
          </listitem>
          <listitem>
            <para><emphasis>dow:</emphasis> jour de la semaine entre 0 et 7 durant lequel la commande s'exécute. Le dimanche peut être défini indifféremment par 0 ou 7.</para>
          </listitem>
          <listitem>
            <para><emphasis>command :</emphasis> la commande à exécuter.</para>
          </listitem>
        </itemizedlist>
        <para>La commande <application>crontab -e</application> doit être utilisée pour ajouter ou modifier les entrées d'un fichier <filename>crontab</filename>. Le contenu d'un fichier <filename>crontab</filename> peut être affiché avec la commande <application>crontab -l</application>.</para>
        <para>Afin d'exécuter le script <application>backup.sh</application> précédent en utilisant <application>cron</application>, saisissez dans une invite de terminal :</para>
<screen>
<command>sudo crontab -e</command>
</screen>
        <note>
	  <para>
          Using <application>sudo</application> with the <application>crontab -e</application> command edits the <emphasis>root</emphasis> user's crontab.  
          This is necessary if you are backing up directories only the root user has access to.
          </para>
        </note>
        <para>Ajoutez l'entrée suivante au fichier <filename>crontab</filename> :</para>
<programlisting>
# m h dom mon dow   command
0 0 * * * bash /usr/local/bin/backup.sh
</programlisting>
        <para>Le script <application>backup.sh</application> sera maintenant lancé tous les jours à 12h00.</para>
        <note>
          <para>Pour que cette entrée puisse se dérouler correctement, vous devrez copier le script <application>backup.sh</application> dans le répertoire <filename>/usr/local/bin/</filename>. Le script peut se situer n'importe où dans le système de fichiers, changez simplement son chemin dans l'entrée cron.</para>
        </note>
        <para>Consultez <xref linkend="backup-shellscript-references"/> pour plus d'informations concernant les options de <application>crontab</application>.</para>
      </sect3>
    </sect2>
    <sect2 id="backup-shellscript-archive-testing" status="review">
      <title>Restauration à partir d'une archive</title>
      <para>Il est important de vérifier une archive après sa création. Une archive peut être testée en listant les fichiers qu'elle contient, mais le mieux est de <emphasis>restaurer</emphasis> un fichier depuis cette archive.</para>
      <itemizedlist>
        <listitem>
          <para>Pour lister le contenu d'une archive, saisissez dans une invite de terminal :</para>
<screen>
<command>tar -tzvf /mnt/backup/host-Monday.tgz</command>
</screen>
        </listitem>
        <listitem>
          <para>Pour restaurer un fichier à partir de l'archive dans un répertoire différent, tapez :</para>
<screen>
<command>tar -xzvf /mnt/backup/host-Monday.tgz -C /tmp etc/hosts</command>
</screen>
          <para>L'option <emphasis>-C</emphasis> pour <application>tar</application> redirige les fichiers extraits vers le répertoire spécifié. L'exemple ci-dessus va extraire le fichier <filename>/etc/hosts</filename> vers <filename>/tmp/etc/hosts</filename>. <application>tar</application> recrée l'arborescence des dossiers qu'il contient.</para>
          <para>Notez également que le premier <emphasis>« / »</emphasis> est enlevé du chemin du fichier à restaurer.</para>  
        </listitem>
        <listitem>
          <para>Pour restaurer tous les fichiers de l'archive saisissez ceci :</para>
<screen>
<command>cd /</command>
<command>sudo tar -xzvf /mnt/backup/host-Monday.tgz</command>
</screen>
        </listitem>
      </itemizedlist>
      <note>
        <para>Cela écrasera les fichiers actuellement sur le système de fichiers.</para>
      </note>
    </sect2>
    <sect2 id="backup-shellscript-references" status="review">
      <title>Références</title>
      <itemizedlist>
        <listitem>
          <para>Voir <ulink url="http://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</ulink> pour de plus amples informations à propos de l'écriture de scripts shell.</para>
        </listitem>
        <listitem>
          <para>Le livre <ulink url="http://safari.samspublishing.com/0672323583">Teach Yourself Shell Programming in 24 Hours</ulink> est disponible en ligne et est une mine d'or pour l'écriture de scripts shell.</para>
        </listitem>
        <listitem>
          <para>La <ulink url="https://help.ubuntu.com/community/CronHowto">Page Wiki CronHowto</ulink> contient des détails sur l'utilisation des options avancées de <application>cron</application>.</para>
        </listitem>
        <listitem>
          <para>Voir le <ulink url="http://www.gnu.org/software/tar/manual/index.html">Manuel GNU tar</ulink> pour plus d'information concernant les options de <application>tar</application>.</para>
        </listitem>
        <listitem>
          <para>
          The Wikipedia <ulink url="http://en.wikipedia.org/wiki/Backup_rotation_scheme">Backup Rotation Scheme</ulink> article contains
          information on other backup rotation schemes.
          </para>
        </listitem>
        <listitem>
        <para>Le script shell utilise la commande <application>tar</application> pour la création de l'archive, mais il existe bien d'autres utilitaires en ligne de commande qui peuvent être utilisés. Par exemple :</para>
          <itemizedlist>
            <listitem>
              <para><ulink url="http://www.gnu.org/software/cpio/">cpio</ulink> : pour copier des fichiers depuis et vers des archives.</para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.gnu.org/software/coreutils/">dd</ulink> : fait partie du paquet <application>coreutils</application>. Utilitaire de bas niveau qui peut copier des données d'un format à un autre.</para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.rsnapshot.org/">rsnapshot</ulink> : programme de capture d'instantanés utilisé pour créer des copies d'un système de fichiers entier.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </sect2>
  </sect1>
  <sect1 id="backups-shellscripts-rotation" status="review">
    <title>Rotation des archives</title>
    <para>Le script shell de la section <xref linkend="backup-shellscripts"/> ne vous donne qu'un jeu de sauvegardes hebdomadaire. Ceci peut être suffisant pour un serveur dont les données ne varient pas souvent. Si le serveur contient une grande quantité de données, il est préférable d'utiliser un schéma plus robuste de rotations.</para>
    <sect2 id="backups-nfs-rotation" status="review">
      <title>Rotation des archives NFS</title>
      <para>Dans cette section le script shell sera légèrement modifié pour implémenter un schéma de rotation grand-père - père - fils (mensuel-hebdomadaire-journalier):</para>
      <itemizedlist>
        <listitem>
          <para>La rotation va effectuer une sauvegarde <emphasis>journalière</emphasis> du dimanche au vendredi.</para>
        </listitem>
        <listitem>
          <para>Le samedi une sauvegarde <emphasis>hebdomadaire</emphasis> est effectuée donnant 4 sauvegardes hebdomadaires par mois.</para>
        </listitem>
        <listitem>
          <para>La sauvegarde <emphasis>mensuelle</emphasis> est effectuée le premier du mois avec une rotation bi-mensuelle en fonction de la parité du mois.</para>
        </listitem>
      </itemizedlist>
      <para>Voici le nouveau script:</para>
<programlisting>
#!/bin/bash
####################################
#
# Sauvegarde vers un point de montage NFS en utilisant
# une rotation grand-parent - parent - enfant
#
####################################

# Ce qu'il faut sauvegarder 
backup_files="/home /var/spool/mail /etc /root /boot /opt"

# Où le sauvegarder
dest="/mnt/backup"

# Initialisation des variables utilisées dans le nom de l'archive
day=$(date +%A)
hostname=$(hostname -s)

# Déterminer le numéro de semaine (1-4) du mois en cours
day_num=$(date +%d)
if (( $day_num &lt;= 7 )); then
        week_file="$hostname-week1.tgz"
elif (( $day_num &gt; 7 &amp;&amp; $day_num &lt;= 14 )); then
        week_file="$hostname-week2.tgz"
elif (( $day_num &gt; 14 &amp;&amp; $day_num &lt;= 21 )); then
        week_file="$hostname-week3.tgz"
elif (( $day_num &gt; 21 &amp;&amp; $day_num &lt; 32 )); then
        week_file="$hostname-week4.tgz"
fi

# Déterminer si le mois est pair ou impair
month_num=$(date +%m)
month=$(expr $month_num % 2)
if [ $month -eq 0 ]; then
        month_file="$hostname-month2.tgz"
else
        month_file="$hostname-month1.tgz"
fi

# Création du nom de l'archive
if [ $day_num == 1 ]; then
	archive_file=$month_file
elif [ $day != "Saturday" ]; then
        archive_file="$hostname-$day.tgz"
else 
	archive_file=$week_file
fi

# Affichage du commencement des opérations
echo "Sauvegarde de $backup_files vers $dest/$archive_file"
date
echo

# Sauvegarde des fichiers à l'aide de tar.
tar czf $dest/$archive_file $backup_files

# Affichage de la fin des opérations
echo
echo "Sauvegarde terminée"
date

# Listing détaillé des fichiers de $dest pour vérifier leur poids
ls -lh $dest/
</programlisting>
      <para>Le script peut être exécuté en utilisant les mêmes méthodes que dans <xref linkend="backup-executing-shellscript"/>.</para>
      <para>Une bonne pratique est de stocker les supports en-dehors de vos locaux. Dans le script d'exemple, le support de sauvegarde est un autre serveur fournissant un partage NFS. Selon toute vraisemblance, il ne serait pas pratique de changer de lieu le serveur NFS. Selon la vitesse de connexion, on peut choisir de copier les sauvegardes sur un serveur distant à travers un lien WAN.</para>
      <para>Un autre moyen est de copier les sauvegardes sur un disque dur externe qui peut alors être changé de lieu. Comme le prix des disques durs externes continue de baisser, il peut être rentable d'utiliser deux disques pour chaque niveau d'archive. Ceci vous permettrait d'avoir un disque externe relié au serveur de sauvegarde et un en lieu sûr.</para>
    </sect2>
    <sect2 id="backup-shellscript-tapedrive" status="review">
      <title>Lecteurs de bande</title>
      <para>Un lecteur de bande peut être installé sur le serveur et remplacer un partage NFS. L'utilisation d'un lecteur de bande simplifie la rotation des archives, et la sécurisation des médias hors-site.</para>
      <para>Lors de l'utilisation d'un lecteur de bande, la partie nom de fichier du script n'est pas nécessaire vu l'envoi direct de la date vers le périphérique. Certaines commandes sont nécessaires à l'utilisation de la bande. Ceci est effectué par l'utilisation de <application>mt</application>, un utilitaire de gestion de bande magnétique faisant partie du paquet <application>cpio</application>.</para>
      <para>Voici le script shell modifié pour l'utilisation d'un lecteur de bande:</para>
<programlisting>
#!/bin/bash
####################################
#
# Sauvegarde vers une cassette
#
####################################

# Ce qu'il faut sauvegarder 
backup_files="/home /var/spool/mail /etc /root /boot /opt"

# Où le sauvegarder
dest="/dev/st0"

# Affichage du commencement des opérations
echo "Backing up $backup_files to $dest"
date
echo

# S'assurer que la cassette est rembobinée
mt -f $dest rewind

# Sauvegarde à l'aide de tar.
tar czf $dest $backup_files

# Rembobinage et ejection de la cassette
mt -f $dest rewoffl

# Affichage de la fin des opérations
echo
echo "Sauvegarde terminée"
date
</programlisting>
      <note>
        <para>Le nom de périphérique par défaut pour un lecteur de bandes SCSI est <filename>/dev/st0</filename>. Employez le chemin correspondant à votre système.</para>
      </note>
      <para>La restauration à partir d'un lecteur de bandes est essentiellement équivalente à la restauration à partir d'un fichier. Il suffit de rembobiner la bande et remplacer le chemin du fichier par celui du périphérique. Par exemple, pour restaurer le fichier <filename>/etc/hosts</filename> vers <filename>/tmp/etc/hosts</filename> :</para>
<screen>
<command>mt -f /dev/st0 rewind</command>
<command>tar -xzf /dev/st0 -C /tmp etc/hosts</command>
</screen>
    </sect2>
  </sect1>
  <sect1 id="bacula" status="review">
    <title>Bacula</title>
    <para><application>Bacula</application> est un programme de sauvegarde vous permettant de sauvegarder, restaurer et vérifier les données à travers votre réseau. Il existe des clients Bacula pour Linux, Windows, et Mac OSX, ce qui en fait une solution réseau multi-plateforme.</para> 
    <sect2 id="bacula-overview" status="review">
      <title>Aperçu</title>
      <para><application>Bacula</application> est fait de nombreux composants et services utilisés pour déterminer quels fichiers sauvegarder et vers où les restaurer.</para>
      <itemizedlist>
        <listitem>
          <para><application>Bacula Director :</application> service contrôlant les opérations de sauvegarde, de restauration, de vérification et d'archivage.</para>
        </listitem>
        <listitem>
          <para><application>Bacula Console :</application> application permettant de communiquer avec Bacula Director. Il existe trois versions de la Console :</para>
	  <itemizedlist>
            <listitem><para>Version en mode texte via ligne de commande.</para></listitem>
            <listitem><para>Version graphique GTK+ (Gnome).</para></listitem>
            <listitem><para>Version graphique wxWidgets.</para></listitem>
          </itemizedlist>
        </listitem>
        <listitem>
          <para><application>Bacula File :</application> connu aussi sous le nom <application>Bacula Client</application>. Cette application est installée sur les machines à sauvegarder et se charge d'envoyer les données demandées par Bacula Director.</para>
        </listitem>
        <listitem>
          <para><application>Bacula Storage :</application> programmes effectuant le stockage et la récupération des données sur le support physique.</para>
        </listitem>
        <listitem>
          <para><application>Bacula Catalog :</application> responsable de la mise à jour des index de fichiers et des bases de données de volumes pour tous les fichiers sauvegardés, permettant ainsi la localisation et la restauration rapide des fichiers archivés. Bacula Catalog prend en charge trois types de bases de données : MySQL, PostgreSQL et SQLite.</para>
        </listitem>
        <listitem>
          <para><application>Bacula Monitor :</application> permet le contrôle de Director et des démons File et Storage. Actuellement, Monitor est uniquement disponible avec une interface GTK+.</para>
        </listitem>
      </itemizedlist>
      <para>Ces services et applications peuvent être lancées sur de multiples serveurs et clients, ou ils peuvent être installés sur une machine, dans le cas de la sauvegarde d'un seul disque ou volume.</para>
    </sect2>
    <sect2 id="bacula-installation" status="review">
      <title>Installation</title>
      <para>Il existe plusieurs paquets contenant les différents composants de <application>Bacula</application>. Pour installer Bacula, saisissez dans un terminal :</para>
<screen>
<command>sudo apt-get install bacula</command>
</screen>
      <para>L'installation par défaut du paquet <application>bacula</application> va utiliser une base de données <application>MySQL</application> pour le catalogue. Si vous voulez utiliser SQLite ou PostgreSQL pour le catalogue, installez respectivement <application>bacula-director-sqlite3</application> ou <application>bacula-director-pgsql</application>.</para>
      <para>Pendant le processus d'installation, il vous sera demandé de fournir des informations d'authentification pour <emphasis>l'administrateur</emphasis> de la base de données et le <emphasis>propriétaire</emphasis> de la base de données <emphasis>bacula</emphasis>. L'administrateur de la base de données devra avoir les droits adéquats pour créer une base de données, consultez <xref linkend="mysql"/> pour plus d'informations.</para>
    </sect2>
    <sect2 id="bacula-configuration" status="review">
      <title>Configuration</title>
      <para>Les fichiers de configuration de <application>Bacula</application> sont consitués de <emphasis>ressources</emphasis> comprenant des <emphasis>directives</emphasis> entre accolades <quote>{}</quote>. Chaque composant Bacula possède un fichier individuel dans le répertoire <filename role="directory">/etc/bacula</filename>.</para>
      <para>Les divers composant de <application>Bacula</application> doivent s'autoriser mutuellement. Ceci est effectué par la directive <emphasis>password</emphasis>. Par exemple, le mot de passe de la ressource <emphasis>Storage</emphasis> dans le fichier <filename>/etc/bacula/bacula-dir.conf</filename> doit correspondre à celui de la ressource <emphasis>Director</emphasis> dans le fichier <filename>/etc/bacula/bacula-sd.conf</filename>.</para>
      <para>Par défaut, la tâche de sauvegarde appelée <emphasis>Client1</emphasis> est configurée pour archiver le catalogue <application>Bacula</application>. Si vous envisagez d'utiliser le serveur pour sauvegarder plus d'un client, vous devriez changer le nom de cette tâche pour quelque chose de plus descriptif. Pour changer ce nom, modifiez le fichier <filename>/etc/bacula/bacula-dir.conf</filename>:</para>
<programlisting>
#
# Definition des principales tâches nocturnes de sauvegardes
# Par défaut, cette tâche sauvegardera sur le disque dans
Job {
  Name = "BackupServer"
  JobDefs = "DefaultJob"
  Write Bootstrap = "/var/lib/bacula/Client1.bsr"
}
</programlisting>
      <note>
        <para>L'exemple ci-dessus remplace le nom de la tâche par <emphasis>BackupServer</emphasis>, correspondant au nom d'hôte de la machine. Remplacez <quote>BackupServer</quote> avec votre nom d'hôte adéquat, ou un autre nom descriptif.</para>
      </note>
      <para>La <emphasis>Console</emphasis> peut être utilisée pour interroger le <emphasis>Director</emphasis> sur des tâches, mais pour utiliser la Console avec un utilisateur <emphasis>non root</emphasis>, celui-ci doit être dans le groupe <emphasis>bacula</emphasis>. Pour ajouter un utilisateur au groupe bacula, saisissez la commande suivante dans un terminal :</para>
<screen>
<command>sudo adduser $username bacula</command>
</screen>
      <note>
        <para>Remplacez <emphasis>$username</emphasis> par le véritable nom d'utilisateur. De plus, si vous ajoutez l'utilisateur courant au groupe, vous devrez vous déconnecter puis vous reconnecter pour que les nouvelles autorisations prennent effet.</para>
      </note>
    </sect2>
    <sect2 id="bacula-localhost-backup" status="review">
      <title>Sauvegarde de l'hôte local</title>
      <para>Cette section décrit la façon de sauvegarder les répertoires spécifiés pour un unique hôte sur un lecteur de bande local.</para>
      <itemizedlist>
        <listitem>
          <para>Tout d'abord, le périphérique de <emphasis>stockage</emphasis> doit être configuré. Ajoutez, dans le fichier <filename>/etc/bacula/bacula-sd.conf</filename> :</para>
<programlisting>
Device {
  Name = "Tape Drive"
  Device Type = tape
  Media Type = DDS-4
  Archive Device = /dev/st0
  Hardware end of medium = No;
  AutomaticMount = yes; # when device opened, read it
  AlwaysOpen = Yes;
  RemovableMedia = yes;
  RandomAccess = no;
  Alert Command = "sh -c 'tapeinfo -f %c | grep TapeAlert'"
}
</programlisting>
          <para>L'exemple concerne un lecteur de bande <emphasis>DDS-4</emphasis>. Ajustez le type de média (« Media Type ») et le périphérique d'archive (« Archive Device ») afin de correspondre à votre matériel.</para>
          <para>Vous pouvez également dé-commenter l'un des autres exemples du fichier.</para>
        </listitem>
        <listitem>
          <para>Après avoir modifié <filename>/etc/bacula/bacula-sd.conf</filename>, le démon <application>Storage</application> devra être redémarré :</para>
<screen>
<command>sudo /etc/init.d/bacula-sd restart</command>
</screen>
        </listitem>
        <listitem>
          <para>Ajoutez maintenant une ressource <emphasis>Storage</emphasis> dans <filename>/etc/bacula/bacula-dir.conf</filename> pour utiliser le nouveau périphérique :</para>
<programlisting>
# Définition du périphérique de stockage "Tape Drive"
Storage {
  Name = TapeDrive
  # N'utilisez pas "localhost" ici    
  Address = backupserver               # N.B. utilisez ici un nom complet
  SDPort = 9103
  Password = "Cv70F6pf1t6pBopT4vQOnigDrR0v3LT3Cgkiyj"
  Device = "Tape Drive"
  Media Type = tape
}
</programlisting>
          <para>La directive <emphasis>Address</emphasis> doit être le nom de domaine complet (FQDN) du serveur. Remplacez <emphasis>backupserver</emphasis> par le véritable nom d'hôte.</para>
          <para>Assurez-vous également que la directive <emphasis>Password</emphasis> corresponde à celle dans <filename>/etc/bacula/bacula-sd.conf</filename>.</para>
        </listitem>
        <listitem>
          <para>Créez une nouvelle ressource <emphasis>FileSet</emphasis> (jeu de fichiers) qui définira les répertoires à sauvegarder, en ajoutant :</para>
<programlisting>
# FileSet de sauvegarde de l'hôte local.
FileSet {
  Name = "LocalhostFiles"
  Include {
    Options {
      signature = MD5
      compression=GZIP
    }
    File = /etc
    File = /home
  }
}
</programlisting>
          <para>Ce <emphasis>FileSet</emphasis> sauvegardera les répertoires <filename role="directory">/etc</filename> et <filename role="directory">/home</filename>. La directive <emphasis>Options</emphasis> de la ressource configure le FileSet pour créer une signature MD5 pour chaque fichier sauvegardé, et pour compresser les fichiers avec GZIP.</para>
        </listitem>
        <listitem>
          <para>Ensuite, créez une nouvelle ressource <emphasis>Schedule</emphasis> (planification) pour la tâche de sauvegarde :</para>
<programlisting>
# Planification de la sauvegarde de l'hôte local -- quotidienne.
Schedule {
  Name = "LocalhostDaily"
  Run = Full daily at 00:01
}
</programlisting>
          <para>La tâche sera lancée chaque jour à 00 h 01. Il y a bien d'autres possibilités de planification.</para>
        </listitem>
        <listitem>
          <para>Pour terminer, créez la <emphasis>tâche</emphasis> :</para>
<programlisting>
# sauvegarde de l'hôte local.
Job {
  Name = "LocalhostBackup"
  JobDefs = "DefaultJob"
  Enabled = yes
  Level = Full
  FileSet = "LocalhostFiles"
  Schedule = "LocalhostDaily"
  Storage = TapeDrive
  Write Bootstrap = "/var/lib/bacula/LocalhostBackup.bsr"
}  
</programlisting>
          <para>La tâche effectuera une sauvegarde <emphasis>complète</emphasis> (« Full ») quotidienne sur bande.</para>
        </listitem>
        <listitem>
          <para>Chaque bande utilisée devra posséder un <emphasis>label</emphasis>. Si la bande courante n'en possède pas, <application>Bacula</application> vous enverra un courriel vous en informant. Pour donner un label à une bande en utilisant la <application>Console</application>, saisissez la commande suivante dans un terminal :</para>
<screen>
<command>bconsole</command>
</screen>
        </listitem>
        <listitem>
          <para>À l'invite de commande de la console de Bacula saisissez :</para>
<screen>
<command>label</command>
</screen>
        </listitem>
        <listitem>
          <para>Il vous sera alors demandé de choisir la ressource de <emphasis>stockage</emphasis> (« storage ») :</para>
<screen>
<computeroutput>
Automatically selected Catalog: MyCatalog
Using Catalog "MyCatalog"
The defined Storage resources are:
     1: File
     2: TapeDrive
Select Storage resource (1-2):<userinput>2</userinput>
</computeroutput>
</screen>
        </listitem>
        <listitem>
          <para>Saisissez le nouveau nom du <emphasis>volume</emphasis> :</para>
<screen>
<computeroutput>
Enter new Volume name: <userinput>dimanche</userinput>
Defined Pools:
     1: Default
     2: Scratch</computeroutput>
</screen>
          <para>Remplacez <emphasis>dimanche</emphasis> par l'étiquette désirée.</para>
        </listitem>
        <listitem>
          <para>Sélectionnez maintenant le <emphasis>pool</emphasis>:</para>
<screen>
<computeroutput>
Select the Pool (1-2): <userinput>1</userinput>
Connecting to Storage daemon TapeDrive at backupserver:9103 ...
Sending label command for Volume "Sunday" Slot 0 ...
</computeroutput>
</screen>
        </listitem>
      </itemizedlist>
      <para>Félicitations, vous venez de configurer <emphasis>Bacula</emphasis> pour sauvegarder l'hôte local vers un lecteur de bande connecté.</para>
    </sect2>
    <sect2 id="bacula-resources" status="review">
      <title>Ressources</title>
      <itemizedlist>
        <listitem>
          <para>Pour plus d'options de configuration de <emphasis>Bacula</emphasis>, veuillez-vous référer au <ulink url="http://www.bacula.org/en/rel-manual/index.html">Manuel de l'utilisateur Bacula</ulink> (en anglais)</para>
        </listitem>
        <listitem>
          <para>La <ulink url="http://www.bacula.org/">page d'accueil de Bacula</ulink> contient les dernières informations et versions de développement.</para>
        </listitem>
      </itemizedlist>
    </sect2> 
  </sect1>
</chapter>
